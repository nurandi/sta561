[["index.html", "STA561 Pemrograman Statistika Welcome", " STA561 Pemrograman Statistika Nur Andi Setiabudi 2021-10-07 Welcome cowsay &quot;Data science is awesome!&quot; ## __________________________ ## &lt; Data science is awesome! &gt; ## -------------------------- ## \\ ^__^ ## \\ (oo)\\_______ ## (__)\\ )\\/\\ ## ||----w | ## || || "],["pengenalan-r.html", "Bagian 1 Pengenalan R 1.1 Apa itu R? 1.2 Fitur Dasar R 1.3 Sistem R", " Bagian 1 Pengenalan R 1.1 Apa itu R? Pada 1976, John Chambers dan tim di Bell Telephone Laboratories (bagian dari AT&amp;T Corp) mengembangkan bahasa pemrograman S sebagai tools analisis statistika di internal perusahaan. Awalnya S diimplementasikan sebagai modul yang berjalan pada Fortran. Lalu pada 1988, S ditulis dalam bahasa C (yang merupakan versi ke-3) dan mulai mirip dengan bahasa yang kita kenal sekarang. Versi 4 dari bahasa S yang dirilis tahun 1998 merupakan versi yang kita gunakan sekarang. Meskipun banyak pengembangan, secara fundamental bahasa S tidak mengalami perubahan berarti sejak saat itu. Salah satu batasan utama bahasa S adalah hanya tersedia dalam paket komersial, S-PLUS. Pada tahun 1991, dengan mengimplementasikan bahas S, R diciptakan oleh Ross Ihaka dan Robert Gentleman di Departemen Statistika di Universitas Auckland. Pada tahun 1993 diumumkan bahwa R dibuat untuk publik. Pada tahun 1995, atas saran dari Martin MÃ¤chler, Ross dan Robert mengubah lisensi R menjadi GNU General Public License sehingga menjadikan R perangkat lunak bebas. Ini sangat penting karena memungkinkan kode sumber untuk seluruh sistem R dapat diakses oleh siapa saja. 1.2 Fitur Dasar R Pada fase awal, fitur utama R adalah sintaksnya sangat mirip dengan S, sehingga memudahkan pengguna S-PLUS untuk beralih menggunakan R. Saat ini, R dapat dijalankan di hampir semua platform komputasi dan sistem operasi. Sifatnya yang terbuka (opensource) membuat siapa pun bebas untuk mengadaptasi perangkat lunak ke platform apa pun yang mereka pilih. Salah satu hal menarik R sebagai perangkat lunak terbuka adalah perilisan fitur baru secara reguler, yang biasanya dilakukan di bulan Oktober. Fitur utama lain yang dimiliki R adalah kemampuan grafisnya yang canggih. Kemampuan R untuk membuat grafik kualitas publikasi telah ada sejak awal dan secara umum lebih baik dibandingkan banyak paket statistik lainnya. R mempertahankan filosofi bahasa S, yaitu menyediakan bahasa yang berguna untuk pekerjaan secara interaktif, dan juga memungkinkan pengguna untuk mengembangkan alat baru. Artinya pengguna dapat menggunakan R dan menerapkannya ke data, lalu secara perlahan menjadi pengembang yang menciptakan alat baru. Terakhir, salah satu keunggulan R adalah adanya komunitas aktif dan supportive di mana ribuan orang di seluruh dunia telah berkontribusi kepada R baik untuk mengembangkan paket maupun saling membantu menggunakan R untuk berbagai keperluan. 1.3 Sistem R R terbagi menjadi dua bagian utama, yaitu Base R yang merupakan perangkat lunak dasar yang berisi bahasa pemrograman R Paket/package Paket R dapat dibagi menjadi beberapa bagian, antara lain. Base R berisi paket base yang diperlukan untuk menjalankan R dan berisi fungsi-fungsi paling mendasar, Selain itu saat instalasi, disertakan juga paket pendukung lainnya seperti utils, stats, datasets dan lain-lain. Paket-paket lainnya dapat ditambahkan setelah instalasi, yang berasal dari Lebih dari 4000 paket di The Comprehensive R Archive Network atau CRAN Sejumlah paket termasuk paket dalam pengembangan di repositori GitHub Sumber-sumber lainnya "],["pemrograman-r-dasar.html", "Bagian 2 Pemrograman R Dasar 2.1 Input 2.2 Assigment 2.3 Penamaan Objek 2.4 Working Directory 2.5 Objek Data 2.6 Tipe Objek Data 2.7 Missing value 2.8 Penamaan Elemen 2.9 Struktur Kendali", " Bagian 2 Pemrograman R Dasar 2.1 Input R merupakan bahasa interpreter. Ketika kita memasukkan suatu input pada console R (atau menjalankan sebuah script R), sebuah program dalam sistem R, dinamakan interpreter, akan mengeksekusi perintah yang kita tulis. R juga bersifat interaktif, artinya setiap perintah yang kita tulis dapat langsung dievaluasi oleh R dan hasilnya dapat ditampilkan pada layar. Misalnya, dengan memasukkan perintah perkalian berikut pada console R: 10*2 Ketika kita menekan tombol enter, R akan mengeksekusi dan menampilkan hasilnya ## [1] 20 Console R diawali tanda &gt;, yang menunjukkan bahwa R siap menerima perinta baru. Jika kita memasukan perintah yang tidak lengkap, maka tanda tersebut akan berubah menjadi tanda +. Semua perintah atau teks yang ditulis setelah tanda # tidak akan dieksekusi oleh R. Biasanya ini berguna untuk memberikan komentar atau catatan # perkalian 10 x 2 10*2 ## [1] 20 2.2 Assigment Dalam R, sangat disarankan untuk menggunakan tanda &lt;- sebagai operator assigment. obj &lt;- expr berarti masukkan nilai hasil dari operasi di sisi kanan (expr) ke dalam objek di sisi kiri (obj). Misalnya: x &lt;- 20 Artinya kita memasukkan nilai 20 ke dalam objek x. Contoh lain y &lt;- 100 + 50 Artinya kita memasukkan hasi dari operasi 100 + 50 ke dalam objek y. Selain dengan operator &lt;-, kita juga dapat menggunakan operator = atau -&gt;. Untuk menampilkan objek dalam layar, cukup tuliskan nama objek lalu enter. x ## [1] 20 y ## [1] 150 Atau bisa juga dengan perintah print() print(x) ## [1] 20 print(y) ## [1] 150 2.3 Penamaan Objek Segala hal dalam R dipandang sebagai objek, misalnya data, fungsi, dan lain-lain. Objek-objek tersebut dapat diberi nama dengan apapun yang kita mau. Pada contoh sebelumnya, kita mempunyai objek dengan nama x dan y. Meskipun demikian, ada beberapa aturan penamaan objek dalam R yang harus dipenuhi, yaitu: Menggunakan kombinasi alfabet (a-z, A-Z), angka (0-9), titik (.) atau underscore (_), Hanya dapat diawali oleh alfabet, titik atau underscore dan tidak boleh diawali dengan angka, Tidak mengandung spasi, tab atau karakter khusus seperti !, @, #, Sebaiknya tidak menggunakan penamaan atau nilai yang sudah digunakan oleh R, seperti c, df, rnorm dan lainnya. Ketika membuat sebuah program dalam R (atau bahasa pemrograman apapun), disarankan untuk menggunakan penamaan yang lazin dan konsisten, seperti: alllowercase: misal adjustcolor period.separated: misal plot.new underscore_separated: misal numeric_version lowerCamelCase: misal addTaskCallback UpperCamelCase: misal SignatureMethod Note: meskipun diizinkan, penggunaan undescore sebaiknya dihindari karena tidak diimplementasikan disemua engine S. R bersifat case-sensitive baik dalam penamaan objek maupun isi dari objek tersebut. Artinya huruf kecil dan huruf besar menunjukkan hal berbeda. Dengan demikian, ABC berbeda dengan abc, berbeda dengan Abc dan berbeda dengan AbC dan seterusnya. 2.4 Working Directory Sesuai namanya, working directory adalah folder atau directory di mana kita bekerja. Untuk mengetahui working directory kita saat ini, bisa menggunakan perintah getwd() ## [1] &quot;D:/SSD21/Bookdown/sta561&quot; Untuk mengganti working directory, dapat menggunakan perintah setwd(&quot;D:/Learning/R&quot;) Perhatikan path dipisahkan oleh tanda /, atau bisa juga dengan tanda \\\\. setwd(&quot;D:\\\\Learning\\\\R&quot;) Untuk mengakses file yang berada dalam working directory, kita cukup menuliskan nama filenya saja, misalnya read.csv(&quot;dataku.csv&quot;) 2.5 Objek Data R mempunyai beberapa jenis mode objek dasar, atau disebut sebagai atomic class dari objek, yaitu: character, misalnya \"ipb\", \"mahasiswa\", \"stastika\" numeric, misalnya 12, 2.3, 1.2e-2 complex, misalnya 1.2e6+2i logical, misalnya T, F, TRUE, FALSE Objek Angka: Angka dalam R umumnya diperlakukan sebagai objek numerik (atau angka riil). Artinya, sebuah angka yang terlihat sebagai 1 atau 2, sebetulnya direpresentasikan oleh R sebagai objek numerik, seperti 1.00 atau 2.00. Apabila kita menginginkan objek integer, kita harus menambahkan akhiran L. Misal untuk mendapatkan integer 1 harus ditulis 1L. 2.6 Tipe Objek Data Terdapat beberapa tipe objek data standar dalam R, yaitu: Vector: tipe sederhana dari objek data dalam R di mana setiap elemennya mempunyai mode yang sama Factor: vektor dengan anggota/elemennya berupa kategori Matrix: vektor yang berdimensi dua yaitu baris dan kolom Array: tipe objek yang dapat menyimpan data lebih dari dua dimensi Dataframe: objek yang menyimpan data dalam bentuk tabular (baris dan kolom) List: vektor dengan anggota/elemennya berupa objek. Mode dari elemen list boleh berbeda-beda Tipe Object R 2.6.1 Vector Vector merupakan objek data paling sederhana dalam R dan digunakan oleh hampir semua fungsi aritmetik. Dalam vector, mode anggota/elemen adalah sama. Ada beberapa cara membuat vector, di antaranya: 2.6.1.1 Membuat vector Banyak cara membuat vector. Beberapa di antaranya adalah menggunakan perintah c(), seq() dan rep(). 2.6.1.1.1 Fungsi c() Sebuah vektor dapat dibuat dengan fungsi c() di mana setiap elemen dipisahkan oleh tanda koma. Misalnya. a &lt;- c(0.5, 0.6) a ## [1] 0.5 0.6 Contoh lain b &lt;- c(TRUE, FALSE) ## logical c &lt;- c(T, F) ## logical d &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;) ## character e &lt;- 9:29 ## integer f &lt;- c(1+0i, 2+4i) ## complex Kadang kita memasukkan objek dengan mode berbeda kedalam suatu vektor, baik karena disengaja maupun tidak. Apa yang akan terjadi? a &lt;- c(1.7, &quot;a&quot;) # character a ## [1] &quot;1.7&quot; &quot;a&quot; b &lt;- c(TRUE, 2) # numeric b ## [1] 1 2 c &lt;- c(&quot;a&quot;, TRUE) # character c ## [1] &quot;a&quot; &quot;TRUE&quot; Untuk kasus seperti itu, R akan mengkonversi data kedalam mode yang paling sesuai. Pada contoh pertama, ada dua kemungkinan mode yaitu numeric da character. Karena mengkonversi yang memungkinkan adalah konversi numeric ke character (bukan sebaliknya), maka akan mengkonversi 1.7 menjadi character \"1.7\". 2.6.1.1.2 Fungsi seq() Fungsi seq() digunakan untuk membuat vector yang berisi angka berurutan. Misalnya Vector 1 sampai dengan 10, dengan incremental 1 x &lt;- seq(from = 1, to = 10) x ## [1] 1 2 3 4 5 6 7 8 9 10 Atau bisa ditulis dengan perintah berikut x &lt;- 1:10 x ## [1] 1 2 3 4 5 6 7 8 9 10 Vector 1 sampai dengan 10, dengan incremental 2 y &lt;- seq(from = 1, to = 10, by = 2) y ## [1] 1 3 5 7 9 2.6.1.1.3 Fungsi rep() Fungsi rep() digunakan untuk membuat vector dengan mengulang nilai yang diinginak, misalnya x &lt;- rep(1, 10) x ## [1] 1 1 1 1 1 1 1 1 1 1 2.6.1.2 Mengakses element dari vector Element pada vector dapat diakses melalui indeksnya dengan menggunakan operator [ ]. Dua contoh berikut mengambil elemen pertama serta elemen ke-2 dan ke-3 dari vector x &lt;- c(10, 20, 30, 40, 50) x[1] ## [1] 10 x[c(2,3)] ## [1] 20 30 2.6.1.3 Fungsi lain Fungsi lain sering digunakan dalam vector adalah length() dan class(). Fungsi length() berguna untuk mengetahui pajang atau banyaknye elemen dari suatu vector sedangkan class() untuk mengetahi class atau mode dari suatu vector. 2.6.2 Factor Faktor digunakan untuk merepresentasikan data kategorik, baik terurut/ordered maupun tidak diurutkan/unordered. Faktor dapat dianggap sebagai vektor di mana setiap elemennya memiliki label. Objek faktor dapat dibuat dengan fungsi factor(). f &lt;- factor(c(&quot;SD&quot;, &quot;SMA&quot;, &quot;SMP&quot;, &quot;SD&quot;, &quot;SMA&quot;, &quot;SMP&quot;, &quot;SD&quot;, &quot;SMP&quot;)) f ## [1] SD SMA SMP SD SMA SMP SD SMP ## Levels: SD SMA SMP factor(f, levels = c(&quot;SD&quot;, &quot;SMP&quot;, &quot;SMA&quot;)) ## [1] SD SMA SMP SD SMA SMP SD SMP ## Levels: SD SMP SMA factor(f, levels = c(&quot;SD&quot;, &quot;SMP&quot;, &quot;SMA&quot;), ordered = TRUE) ## [1] SD SMA SMP SD SMA SMP SD SMP ## Levels: SD &lt; SMP &lt; SMA length(y) ## [1] 5 class(y) ## [1] &quot;numeric&quot; 2.6.3 Matriks Matriks/matrix merupakan vector yang berdimensi dua yaitu baris dan kolom. Matriks dapat dibuat dengan mengubah dimensi dari suatu vector. Matriks dapat dibentuk dengan perintah matrix(). Secara default, matriks dibentuk dengan cara column-wise (byrow = FALSE), yaitu dengan mengisi kolom pertama terlebih dahulu, dari atas ke bawah, dilanjutkan kolom berikutnya. Misalnya untuk membuat matriks berukuran 2 x 3 : m &lt;- matrix(1:6, nrow = 2, ncol = 3) m ## [,1] [,2] [,3] ## [1,] 1 3 5 ## [2,] 2 4 6 Atau bisa dengan menambahkan argumen byrow = TRUE sehingga akan mengisi baris pertama terlebih dahulu, mulai dari kiri ke kanan, dilanjutknya ke baris berikutnya. m &lt;- matrix(1:6, nrow = 2, ncol = 3, byrow = TRUE) m ## [,1] [,2] [,3] ## [1,] 1 2 3 ## [2,] 4 5 6 Matriks dapat dibentuk secara langsung dari vector dengan cara menambahkan atribut dimensi. m &lt;- 1:10 dim(m) &lt;- c(2, 5) m ## [,1] [,2] [,3] [,4] [,5] ## [1,] 1 3 5 7 9 ## [2,] 2 4 6 8 10 Cara lain membentuk matriks adalah dengan penggabungan kolom dengan fungsi cbind() dan penggabungan baris dengan fungsi rbind(). x &lt;- 1:3 y &lt;- 10:12 cbind(x, y) ## x y ## [1,] 1 10 ## [2,] 2 11 ## [3,] 3 12 rbind(x, y) ## [,1] [,2] [,3] ## x 1 2 3 ## y 10 11 12 2.6.4 Array Array adalah struktur data yang dapat menampung data multidimensi. Dalam R, jika matriks hanya mempunyai 2 dimensi, maka array dapat memiliki lebih dari 2 dimensi. v1 &lt;- c(5, 10, 15, 20) v2 &lt;- c(25, 30, 35, 40, 45, 50, 55, 60) arr &lt;- array(c(v1, v2), dim =c(4,4,3)) Untuk mengetahui dimensi dari suatu array, dapat menggunakan fungsi dim() dim(arr) ## [1] 4 4 3 2.6.5 Dataframe Baris dalam dataframe merepresentasikan pengamatan/observasi, sedangkan kolom mereprentasikan peubah/variable. Setiap elemen dalam kolom yang sama mempunyai mode yang sama, namun antar kolom bisa mempunyai mode yang berbeda. Dataframe dapat dibuat menggunakan fungsi data.frame(): df &lt;- data.frame(foo = 1:4, bar = c(T, T, F, F)) df ## foo bar ## 1 1 TRUE ## 2 2 TRUE ## 3 3 FALSE ## 4 4 FALSE df2 &lt;- data.frame(numbers = c(10, 20, 30, 40), text = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;a&quot;)) df2 ## numbers text ## 1 10 a ## 2 20 b ## 3 30 c ## 4 40 a 2.6.6 List List merupakan bentuk khusus dari vector yang memungkinkan elemennya bisa berupa objek dengan mode yang berbeda-beda. Elemen-elemen dari list dapat berupa vector, matriks, array, list atau gabungan beberapa struktur data. List dapat dibuat dengan menggunakan fungsi list() s &lt;- &quot;A&quot; v &lt;- c(1:20) m &lt;- matrix(1:6, nrow = 2, ncol = 3, byrow = TRUE) df &lt;- data.frame(numbers = c(10, 20, 30, 40), text = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;a&quot;)) l &lt;- list(s, v, m, df) l ## [[1]] ## [1] &quot;A&quot; ## ## [[2]] ## [1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ## ## [[3]] ## [,1] [,2] [,3] ## [1,] 1 2 3 ## [2,] 4 5 6 ## ## [[4]] ## numbers text ## 1 10 a ## 2 20 b ## 3 30 c ## 4 40 a 2.7 Missing value Ada beberapa missing value dalam R, yaitu: NULL Sebuah objek yang diperoleh ketika suatu ekspresi atau fungsi menghasilkan nilai yang tidak terdefinisi (undefined value) NA Singkatan dari Not Available. Merupakan sebuah logical untuk mengindikasikan missing value. NaN Singkatan dari Not a Number. Merupakan sebuah logical untuk angka dan merupakan gambaran imajiner dari nilai nilai yang sangat kompleks. Inf / -Inf Singkatand ari infinity atau tidak hingga. Merupakan angka yang sangat besar atau sangat kecil. x &lt;- c(1, 2, NA, 10, 3) is.na(x) ## [1] FALSE FALSE TRUE FALSE FALSE is.nan(x) ## [1] FALSE FALSE FALSE FALSE FALSE x &lt;- c(1, 2, NaN, NA, 4) is.nan(x) ## [1] FALSE FALSE TRUE FALSE FALSE 2.8 Penamaan Elemen Objek R dapat mempunyai nama. Demikian juga dengan setiap elemen dalam sebuah objek data. Hal ini sangat berguna ketika menuliskan kode dan menjelaskan objek. Untuk memberikan nama bagi elemen-elemen dari vector, dapat menggunakan fungsi names() x &lt;- 1:3 names(x) ## NULL names(x) &lt;- c(&quot;New York&quot;, &quot;Seattle&quot;, &quot;Los Angeles&quot;) x ## New York Seattle Los Angeles ## 1 2 3 names(x) ## [1] &quot;New York&quot; &quot;Seattle&quot; &quot;Los Angeles&quot; Cara yang sama untuk list names(l) ## NULL names(l) &lt;- c(&quot;teks&quot;, &quot;vektor&quot;, &quot;matriks&quot;, &quot;tabel&quot;) l ## $teks ## [1] &quot;A&quot; ## ## $vektor ## [1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ## ## $matriks ## [,1] [,2] [,3] ## [1,] 1 2 3 ## [2,] 4 5 6 ## ## $tabel ## numbers text ## 1 10 a ## 2 20 b ## 3 30 c ## 4 40 a names(l) ## [1] &quot;teks&quot; &quot;vektor&quot; &quot;matriks&quot; &quot;tabel&quot; Matriks dapat mempunyai nama kolom dan barisnya dengan menggunakan fungsi dimnames() m &lt;- matrix(1:4, nrow = 2, ncol = 2) dimnames(m) &lt;- list(c(&quot;a&quot;, &quot;b&quot;), c(&quot;c&quot;, &quot;d&quot;)) m ## c d ## a 1 3 ## b 2 4 Penamaan kolom dan baris pada matriks bisa dilakukan terpisah menggunakan fungsi colnames() dan rownames() colnames(m) &lt;- c(&quot;h&quot;, &quot;f&quot;) rownames(m) &lt;- c(&quot;x&quot;, &quot;z&quot;) m ## h f ## x 1 3 ## z 2 4 Seperti halnya matriks, kolom dan baris pada dataframe juga dapat diberikan nama dengan menggunakan fungsi names() dan rownames(). Perhatikan ada perbedaan fungsi yang digunakan. a &lt;- c(10, 20, 30, 40) b &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;a&quot;) df &lt;- data.frame(a, b) df ## a b ## 1 10 a ## 2 20 b ## 3 30 c ## 4 40 a names(df) &lt;- c(&quot;numbers&quot;, &quot;chars&quot;) row.names(df) &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;) df ## numbers chars ## a 10 a ## b 20 b ## c 30 c ## d 40 a Note: Ketika membuat dataframe, R akan memberikan nama untuk kolom-kolom yang terbentuk. Hanya saja kadang nama yang diberikan tidak sesuai dengan apa yang kita inginkan. df2 &lt;- data.frame(c(10, 20, 30, 40), c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;a&quot;)) names(df2) ## [1] &quot;c.10..20..30..40.&quot; &quot;c..a....b....c....a..&quot; 2.9 Struktur Kendali 2.9.1 Percabangan Pemilihan atau percabangan merupakan bagian penting dalam programming. Dalam R, hal ini dapat dilakukan dengan menggunakan perintah if ... else. if Statement akan dieksekusi jika expression benar. Jika expression salah, maka tidak ada yang dieksekusi. # https://www.datamentor.io/r-programming if (expression) { statement } Contoh x &lt;- 5 if(x &gt; 0){ print(&quot;Positive&quot;) } ## [1] &quot;Positive&quot; if  else Jika expression benar, maka statement1 akan dieksekusi. Jaka salah maka statement2 akan dieksekusi. if (expression) { statement1 } else { statement2 } Contoh x &lt;- -5 if(x &gt; 0){ print(&quot;Non Negative&quot;) } else { print(&quot;Negative&quot;) } ## [1] &quot;Negative&quot; if  else if  else Jika expression benar, maka statement1 akan dieksekusi. Jaka salah maka akan periksa expression2. Jika bener maka statement2 akan dieksekusi. Jika salah maka statement3 akan dieksekusi if ( expression) { statement1 } else if ( expression2) { statement2 } else { statement3 } Contoh: x &lt;- -5 if(x == 0){ prin(&quot;Zero&quot;) } else if(x &lt; 0){ print(&quot;Negative&quot;) } else { print(&quot;Positive&quot;) } ## [1] &quot;Negative&quot; 2.9.2 Loop Loop berfungsi untuk mengulang perintah atau blok perintah. Dalam R, ada beberapa fungsi perintah looping, yaitu for, while, repeat for loop For loop digunakan untuk mengiterasi vektor for (val in sequence) { statement } Contoh mengiterasi vektor dan menjumlahkan angka genap x &lt;- c(2,5,3,9,8,11,6) count &lt;- 0 for (val in x) { if(val %% 2 == 0) { count = count+1 } } print(count) ## [1] 3 while loop While loop digunakan untuk melakukan iterasi selama kondisi/expression tertentu terpenuhi. while (expression) { statement } Contoh i &lt;- 1 while (i &lt; 6) { print(i) i = i+1 } ## [1] 1 ## [1] 2 ## [1] 3 ## [1] 4 ## [1] 5 break dan next Perintah break gigunakan di dalam loop untuk menghentikan iterasi. Sedangkan perintah next digunakan untuk melewati sebuah iterasi. # break if (expression) { break } # next if (expression) { next } Contoh # break, berhenti pada iterasi ke-3 x &lt;- 1:5 for (val in x) { if (val == 3){ break } print(val) } ## [1] 1 ## [1] 2 # next, skip iterasi ke-3 x &lt;- 1:5 for (val in x) { if (val == 3){ next } print(val) } ## [1] 1 ## [1] 2 ## [1] 4 ## [1] 5 repeat loop Repeat loop digunakan untuk iterasi blok perintah berulang kali. Dalam repeat, tidak ada kondisi untuk keluar dari loop. Untuk itu, kita harus menggunakan perintah break secara eksplisit atau looping akan terus berjalan (infinite loop) repeat { statement } Contoh x &lt;- 1 repeat { print(x) x = x+1 if (x == 6){ break } } ## [1] 1 ## [1] 2 ## [1] 3 ## [1] 4 ## [1] 5 "],["operasi-dasar-r.html", "Bagian 3 Operasi Dasar R 3.1 Akses Elemen 3.2 Operasi aritmatika dasar 3.3 Operasi pada matriks 3.4 Latihan", " Bagian 3 Operasi Dasar R 3.1 Akses Elemen Ada tiga operator yang dapat digunakan untuk mengekstrak/mengakses elemen atau bagian dari objek R. Operator [ ] selalu mengembalikan objek dari kelas yang sama dengan aslinya. Dapat digunakan untuk memilih satu atau beberapa elemen dari suatu objek. Operator [[ ]] digunakan untuk mengekstrak elemen dari list atau dataframe. Hanya dapat digunakan untukmengekstrak satu elemen dan kelas objek yang dikembalikan tidak harus sama seperti objek awalnya. Operator $ digunakan untuk mengekstrak elemen list atau dataframe melalui namanya. Secara semantik, ini mirip dengan operator [[ ]]. 3.1.1 Akses elemen vector Elemen vector dapat diekstrak dengan memasukkan nomor urut elemen ke dalam operator [ ]. Elemen dari vektor dan objek R lainnya, dimulai dari `. x &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;c&quot;, &quot;d&quot;, &quot;a&quot;) Mengakses elemen pertama x[1] ## [1] &quot;a&quot; Mengakses elemen ke-2 x[2] ## [1] &quot;b&quot; Mengakses semua elemen kecuali elemen ke-2 x[-2] ## [1] &quot;a&quot; &quot;c&quot; &quot;c&quot; &quot;d&quot; &quot;a&quot; Jika vector sudah mempunyai nama, dapat diakses menggunakan namanya y &lt;- 1:3 names(y) &lt;- c(&quot;New York&quot;, &quot;Seattle&quot;, &quot;Los Angeles&quot;) y[&quot;Seattle&quot;] ## Seattle ## 2 Operator [ ] dapat digunakan untuk mengakses beberapa elemen sekaligus, misalnya untuk mengekstrak element pertama sampai ke-4 x[1:4] ## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;c&quot; Mengkases elemen ke-1, ke-2 dan ke-4 x[c(1,2,4)] ## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; Selain dengan integer, memilih elemen juga bisa menggunakan logical. Misalnya untuk memilih elemen bukan a u &lt;- x != &quot;a&quot; u ## [1] FALSE TRUE TRUE TRUE TRUE FALSE x[u] ## [1] &quot;b&quot; &quot;c&quot; &quot;c&quot; &quot;d&quot; Atau dapat diringkas x[x != &quot;a&quot;] ## [1] &quot;b&quot; &quot;c&quot; &quot;c&quot; &quot;d&quot; 3.1.2 Akses elemen matriks Sepertihalnya vector, akses terhadap elemen matriks dapat dilakukan dengan operator [ ] dengan memasukkan posisi baris dan kolom dengan format [row, col]. Sehingga apabila akan mengambil elemen di baris ke-2 kolom ke-1 dan baris ke-1 kolom ke-3 dapat kita tuliskan: x &lt;- matrix(1:6, 2, 3) x ## [,1] [,2] [,3] ## [1,] 1 3 5 ## [2,] 2 4 6 x[2,1] # baris ke-2 kolom ke-1 ## [1] 2 x[1,3] # baris ke-1 kolom ke-3 ## [1] 5 Atau untuk mengekstrak seluruh kolom atau baris tertentu x[2,] # ekstrak baris ke-2 ## [1] 2 4 6 x[,3] # ekstrak kolom ke-3 ## [1] 5 6 3.1.3 Akses elemen list Elemen dari list dapat diakses dengan menggunakan tiga operator di atas dengan tujuan yang berbeda-beda. x &lt;- list(foo = 1:4, bar = 0.6, foobar = c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)) x ## $foo ## [1] 1 2 3 4 ## ## $bar ## [1] 0.6 ## ## $foobar ## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; Akses list dengan [ ] sama seperti vektor x[1] # elemen pertama ## $foo ## [1] 1 2 3 4 x[1:2] # elemen pertama dan kedua ## $foo ## [1] 1 2 3 4 ## ## $bar ## [1] 0.6 Untuk akses elemen tunggal, dapat menggunakan operator [[ ]] x[[2]] # akses elemen ke-2 ## [1] 0.6 x[[&quot;bar&quot;]] # akses elemen yang bernama &quot;bar&quot; ## [1] 0.6 Untuk mengakses elemen dalam elemen: x[[3]][[1]] ## [1] &quot;a&quot; Atau menggunakan operator $ x$bar ## [1] 0.6 x$data ## NULL Perhatikan tidak ada elemen bernama data, sehingga R mengembalikan NULL, bukan error. 3.1.4 Akses elemen dataframe Akses elemen data frame mirip seperti matriks dengan menggunakan operator [ ] df &lt;- data.frame(numbers = c(10, 20, 30, 40), text = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;a&quot;), logic = c(T, F, T, F)) df ## numbers text logic ## 1 10 a TRUE ## 2 20 b FALSE ## 3 30 c TRUE ## 4 40 a FALSE df[1,2] # baris pertama kolom ke-2 ## [1] &quot;a&quot; df[1,] # baris pertama ## numbers text logic ## 1 10 a TRUE df[,2] # kolom ke-2 ## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;a&quot; df[df[1] &lt; 30, ] # semua kolom dan semua baris yang lebih kecil dari 20 ## numbers text logic ## 1 10 a TRUE ## 2 20 b FALSE Atau dengan operator [[ ]] df[[2]] # kolom ke-2 ## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;a&quot; df[[&quot;text&quot;]] # kolom &quot;text&quot; ## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;a&quot; Atau dengan operator $ df$text ## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;a&quot; 3.2 Operasi aritmatika dasar 3.2.1 Menampilkan atribut Objek R biasanya mempunyai atribut, seperti names, dimnames dimensions class (e.g.Â integer, numeric) length dan lain-lain Misalnya kita mempunyai data frame df &lt;- data.frame(numbers = c(10, 20, 30, 40), text = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;a&quot;), logic = c(T, F, T, F)) names(df) # nama dari kolom ## [1] &quot;numbers&quot; &quot;text&quot; &quot;logic&quot; dim(df) # dimensi dari df ## [1] 4 3 nrow(df) # jumlah kolom ## [1] 4 ncol(df) # jumlah kolom ## [1] 3 class(df) # class objek ## [1] &quot;data.frame&quot; x &lt;- df[[1]] length(x) # jumlah elemen ## [1] 4 Untuk mengetahui atribut apasaja yang ada data objek kita, dapat menggunakan perintah attributes(). attributes(df) ## $names ## [1] &quot;numbers&quot; &quot;text&quot; &quot;logic&quot; ## ## $class ## [1] &quot;data.frame&quot; ## ## $row.names ## [1] 1 2 3 4 3.2.2 Operasi pada vector Operasi-operasi pada vector dilakukan secara element by element (elementwise). Misalnya x &lt;- c(1:10) y &lt;- c(11:20) x + y ## [1] 12 14 16 18 20 22 24 26 28 30 Maka elemen pertama dari x akan dijumlahkan dengan elemen pertama dari y, elemen ke-2 dari x akan dijumlahkan dengan elemen ke-2 dari y, dan seterusnya. Jika vector-vector yang dioperasikan memiliki panjang berbeda, maka berlalu aturan recycling, yaitu vektor dengan elemen sedikit akan diulang mengikuti vektor yang memiliki elemen paling banyak. Contoh x &lt;- c(1:10) y &lt;- c(11:18) x + y ## Warning in x + y: longer object length is not a multiple of shorter object ## length ## [1] 12 14 16 18 20 22 24 26 20 22 Objek x mempunyai 10 elemen sedangkan y hanya ada 8. Untuk penjumlahan elemen 1 sd. 8, berlaku normal seperti contoh sebelumnya, sedangkan untuk elemen 9 dan 10 menggunakan aturan recycling. Dalam hal ini, R akan me-recycle elemen pertama dan ke-2 dari y sebagai objek pengganti bagi elemen ke-9 dan 10. 3.2.2.1 Operasi sederhana vector numerik R mengenal banyak sekali operasi numerik, seperti + - * / : Penjumlahan, pengurangan, perkalian, pembagian %% : Modulus %/% : Pembagian integer %*% : Perkalian matriks setara x'x %o% : Perkalian matriks setara xx' &lt; &lt;= &gt; &gt;= == != : Operasi logika/perbandingan Contoh x &lt;- c(1:10) y &lt;- c(11:20) x + y # penjumlah ## [1] 12 14 16 18 20 22 24 26 28 30 x &lt; y # logical ## [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE y %% 3 # modulus ## [1] 2 0 1 2 0 1 2 0 1 2 y %/% 3 # pembagian integral ## [1] 3 4 4 4 5 5 5 6 6 6 x %*% y # Perkalian matriks setara `x&#39;x` ## [,1] ## [1,] 935 x %o% y # Perkalian matriks setara `xx&#39;` ## [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] ## [1,] 11 12 13 14 15 16 17 18 19 20 ## [2,] 22 24 26 28 30 32 34 36 38 40 ## [3,] 33 36 39 42 45 48 51 54 57 60 ## [4,] 44 48 52 56 60 64 68 72 76 80 ## [5,] 55 60 65 70 75 80 85 90 95 100 ## [6,] 66 72 78 84 90 96 102 108 114 120 ## [7,] 77 84 91 98 105 112 119 126 133 140 ## [8,] 88 96 104 112 120 128 136 144 152 160 ## [9,] 99 108 117 126 135 144 153 162 171 180 ## [10,] 110 120 130 140 150 160 170 180 190 200 3.2.2.2 Operasi sederhana vector karakter R juga mempunyai banyak fungsi untuk operasi terhadap vektor karakter, beberapa diantaranya nchar() : Menghitung panjang karakter paste() : Menggabungkan elemen substr() : Mengambil bagian dari teks berdasarkan posisi tertentu Contoh: y &lt;- c(&quot;Institut&quot;, &quot;Pertanian&quot;, &quot;Bogor&quot;, &quot;IPB&quot;) nchar(y) # menghitung panjang karakter ## [1] 8 9 5 3 paste(y, collapse = &quot; &quot;) # menggabungkan elemen ## [1] &quot;Institut Pertanian Bogor IPB&quot; paste(y, &quot;ku&quot;, sep = &quot;&quot;) # menggabungkan dengan vektor lain ## [1] &quot;Institutku&quot; &quot;Pertanianku&quot; &quot;Bogorku&quot; &quot;IPBku&quot; substr(y, 1, 3) # mengambil huruf pertama sampai huruf ke-3 ## [1] &quot;Ins&quot; &quot;Per&quot; &quot;Bog&quot; &quot;IPB&quot; 3.3 Operasi pada matriks R dilengkapi banyak fungsi untuk matriks. Beberapa diataranya: * * : Perkalain element by element * t() : Transpose * %*% : Perkalian matriks setara x'x * %o% : Perkalian matriks setara xx' * solve() : Menghitung matriks inverse * eigen() : Menghitung eigen value dan eigen vector Contoh Z1 &lt;- matrix(1:6,2,3) Z2 &lt;- matrix(1:6,3,2,byrow=T) Z3 &lt;- matrix(6:9,2,2) Z4 &lt;- Z1 %*% Z2 Z4 ## [,1] [,2] ## [1,] 35 44 ## [2,] 44 56 Z1 %o% Z2 ## , , 1, 1 ## ## [,1] [,2] [,3] ## [1,] 1 3 5 ## [2,] 2 4 6 ## ## , , 2, 1 ## ## [,1] [,2] [,3] ## [1,] 3 9 15 ## [2,] 6 12 18 ## ## , , 3, 1 ## ## [,1] [,2] [,3] ## [1,] 5 15 25 ## [2,] 10 20 30 ## ## , , 1, 2 ## ## [,1] [,2] [,3] ## [1,] 2 6 10 ## [2,] 4 8 12 ## ## , , 2, 2 ## ## [,1] [,2] [,3] ## [1,] 4 12 20 ## [2,] 8 16 24 ## ## , , 3, 2 ## ## [,1] [,2] [,3] ## [1,] 6 18 30 ## [2,] 12 24 36 Z3 * Z4 ## [,1] [,2] ## [1,] 210 352 ## [2,] 308 504 invZ &lt;- solve(Z4) # invers invZ ## [,1] [,2] ## [1,] 2.333333 -1.833333 ## [2,] -1.833333 1.458333 invZ %*% Z4 # matriks identitas ## [,1] [,2] ## [1,] 1 2.842171e-14 ## [2,] 0 1.000000e+00 h &lt;- c(5,11) p &lt;- solve(Z4,h) #solusi persamaan linear Zp=h e &lt;- eigen(Z4) #eigen value &amp; eigen vector dr Z4 e$values #akses eigen values ## [1] 90.7354949 0.2645051 e[[2]] #akses eigen vectors ## [,1] [,2] ## [1,] 0.6196295 -0.7848945 ## [2,] 0.7848945 0.6196295 3.4 Latihan 3.4.1 Latihan 1 Tentukan output syntax program berikut: c(&quot;la&quot;,&quot;ye&quot;)[rep(c(1,2,2,1),times=4)] c(&quot;la&quot;,&quot;ye&quot;)[rep(rep(1:2,each=3),2)] Jawab: c(&quot;la&quot;,&quot;ye&quot;)[rep(c(1,2,2,1),times=4)] ## [1] &quot;la&quot; &quot;ye&quot; &quot;ye&quot; &quot;la&quot; &quot;la&quot; &quot;ye&quot; &quot;ye&quot; &quot;la&quot; &quot;la&quot; &quot;ye&quot; &quot;ye&quot; &quot;la&quot; &quot;la&quot; &quot;ye&quot; &quot;ye&quot; ## [16] &quot;la&quot; c(&quot;la&quot;,&quot;ye&quot;)[rep(rep(1:2,each=3),2)] ## [1] &quot;la&quot; &quot;la&quot; &quot;la&quot; &quot;ye&quot; &quot;ye&quot; &quot;ye&quot; &quot;la&quot; &quot;la&quot; &quot;la&quot; &quot;ye&quot; &quot;ye&quot; &quot;ye&quot; 3.4.2 Latihan 2 Buatlah syntax agar dihasilkan output vektor sebagai berikut X1 Y2 X3 Y4 X5 Y6 X7 Y8 X9 Y10 1 4 7 10 13 16 19 22 25 28 3.4.3 Latihan 3 Seorang peneliti merancang sebuah perancangan percobaan RAKL dengan 4 perlakuan dan 3 kelompok (anggaplah respon percobaan berupa baris bilangan). Bantulah peneliti tersebut untuk membuat raw data seperti output sebagai berikut! &gt; data1 Perl Kel Resp 1 P1 1 1 2 P1 2 3 3 P1 3 5 4 P2 1 7 5 P2 2 9 6 P2 3 11 7 P3 1 13 8 P3 2 15 9 P3 3 17 10 P4 1 19 11 P4 2 21 12 P4 3 23 Jawab jPerl &lt;- 4 jKel &lt;- 3 Perl &lt;- factor(rep(paste0(&quot;P&quot;, c(1:jPerl)), each = jKel)) Kel &lt;- factor(rep(1:jKel, jPerl)) Resp &lt;- 2*seq(jPerl*jKel) - 1 data1 &lt;- data.frame(Perl, Kel, Resp) data1 ## Perl Kel Resp ## 1 P1 1 1 ## 2 P1 2 3 ## 3 P1 3 5 ## 4 P2 1 7 ## 5 P2 2 9 ## 6 P2 3 11 ## 7 P3 1 13 ## 8 P3 2 15 ## 9 P3 3 17 ## 10 P4 1 19 ## 11 P4 2 21 ## 12 P4 3 23 Atau bisa dibuat fungsi sebagai berikut genRancob &lt;- function(jPerl = 4, jKel = 3){ Perl &lt;-factor(rep(paste0(&quot;P&quot;, c(1:jPerl)), each = jKel)) Kel &lt;- factor(rep(1:jKel, jPerl)) Resp &lt;- 2*seq(jPerl*jKel) - 1 data1 &lt;- data.frame(Perl, Kel, Resp) return(data1) } data1 &lt;- genRancob(jPerl = 4, jKel = 3) data1 "],["data-wrangling.html", "Bagian 4 Data Wrangling 4.1 Inspeksi dataframe 4.2 Mengakses elemen 4.3 Mengubah data 4.4 Mengurutkan baris 4.5 Menggabungkan dataframe 4.6 Agregasi data 4.7 Reshaping dataframe", " Bagian 4 Data Wrangling Data wrangling, disebut juga data munging atau data manipulation (dalam konotasi positif), merupakam proses transformasi atau menyiapkan data menjadi format siap dianalisis. Banyak tantangan yang dihadapi dalam tahapan ini, mulai dari ukuran data yang besar, format yang beragam, sumber yang tidak terintegrasi dan lain-lain. Sehingga tidak heran jika data wrangling menghabiskan hingga 80% dari waktu keseluruhan analsis yang kita lakukan. Aktivitas utama dalam data wrangling di antaranya adalah: Membuat kolom baru, biasanya diturunkan dari kolom yang sudah ada Subsetting data atau memilih baris dan/kolom tertentu dari data Sorting atau mengurutkan data Recoding atau mengkodekan ulang nilai-nilai dari data Merging data atau menggabungkan data, baik penggabungan baris maupun kolom Reshaping data atau mengubah format menjadi bentuk wide ataupun long Pada bagian ini akan dipraktikan bagaimana melakukan data wrangling menggunakan paket base atau paket-paket bawaan R lainnya. Adapun data yang akan digunakan adalah sebagai berikut: employees &lt;- data.frame(ID = c(1,2,3,5,6,7), Name = c(&quot;Alex&quot;, &quot;Joni&quot;, &quot;Banu&quot;, &quot;Ani&quot;, &quot;Riska&quot;, &quot;John&quot;), Age = c(21,27,18,25,22,27), Sex = c(&quot;M&quot;,&quot;M&quot;,&quot;M&quot;, &quot;F&quot;, &quot;F&quot;,&quot;M&quot;)) employees ## ID Name Age Sex ## 1 1 Alex 21 M ## 2 2 Joni 27 M ## 3 3 Banu 18 M ## 4 5 Ani 25 F ## 5 6 Riska 22 F ## 6 7 John 27 M more.employees &lt;- data.frame(ID = c(11,12,13), Name = c(&quot;Bunga&quot;, &quot;Kembang&quot;, &quot;Puspa&quot;), Age = c(25,27,21), Sex = c(&quot;M&quot;,&quot;M&quot;,&quot;M&quot;)) more.employees ## ID Name Age Sex ## 1 11 Bunga 25 M ## 2 12 Kembang 27 M ## 3 13 Puspa 21 M address &lt;- data.frame(ID = c(1,2,3,5,6,7), City = c(&quot;Bandung&quot;,&quot;Jakarta&quot;,&quot;Bogor&quot;, &quot;Jakarta&quot;, &quot;Bandung&quot;, &quot;Jakarta&quot;)) address ## ID City ## 1 1 Bandung ## 2 2 Jakarta ## 3 3 Bogor ## 4 5 Jakarta ## 5 6 Bandung ## 6 7 Jakarta 4.1 Inspeksi dataframe Selelum melakukan data wranglingk lebih lanjut, hal utama yang dikerjakan ada inspeksi terhadap dataframe, diantaranya menampilkan jumlah baris dan kolom, melihat statistik ringkasan, melihat struktur dataframe serta melihat beberapa baris data (baik baris teratas maupun terbawah) # menghitung jumlah baris nrow(employees) ## [1] 6 # menghitung jumlah baris ncol(employees) ## [1] 4 # menghitung dimensi (baris dan kolom) dim(employees) ## [1] 6 4 # menghitung statistik ringkasan summary(employees) ## ID Name Age Sex ## Min. :1.00 Length:6 Min. :18.00 Length:6 ## 1st Qu.:2.25 Class :character 1st Qu.:21.25 Class :character ## Median :4.00 Mode :character Median :23.50 Mode :character ## Mean :4.00 Mean :23.33 ## 3rd Qu.:5.75 3rd Qu.:26.50 ## Max. :7.00 Max. :27.00 # melihat struktur dataframe str(employees) ## &#39;data.frame&#39;: 6 obs. of 4 variables: ## $ ID : num 1 2 3 5 6 7 ## $ Name: chr &quot;Alex&quot; &quot;Joni&quot; &quot;Banu&quot; &quot;Ani&quot; ... ## $ Age : num 21 27 18 25 22 27 ## $ Sex : chr &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;F&quot; ... # menampilkan beberapa baris teratas head(employees) ## ID Name Age Sex ## 1 1 Alex 21 M ## 2 2 Joni 27 M ## 3 3 Banu 18 M ## 4 5 Ani 25 F ## 5 6 Riska 22 F ## 6 7 John 27 M # menampilkan beberapa baris terbawah tail(employees) ## ID Name Age Sex ## 1 1 Alex 21 M ## 2 2 Joni 27 M ## 3 3 Banu 18 M ## 4 5 Ani 25 F ## 5 6 Riska 22 F ## 6 7 John 27 M 4.2 Mengakses elemen Mengakses atau memilih sebagian elemen dari dataframe dapat menggunakan operator [ ], [[ ]] dan $ # baris 1, kolom 2 employees[1,2] ## [1] &quot;Alex&quot; # baris 1, kolom &quot;Name&quot; employees[1,&quot;Name&quot;] ## [1] &quot;Alex&quot; # baris 1, kolom &quot;Name&quot; employees[1,]$Name ## [1] &quot;Alex&quot; # baris ke-1, semua kolom employees[1,] ## ID Name Age Sex ## 1 1 Alex 21 M # kolom ke-2, semua baris employees[,2] ## [1] &quot;Alex&quot; &quot;Joni&quot; &quot;Banu&quot; &quot;Ani&quot; &quot;Riska&quot; &quot;John&quot; # kolom &quot;Name&quot;, semua baris employees[,&quot;Name&quot;] ## [1] &quot;Alex&quot; &quot;Joni&quot; &quot;Banu&quot; &quot;Ani&quot; &quot;Riska&quot; &quot;John&quot; # kolom &quot;Name&quot;, semua baris employees$Name ## [1] &quot;Alex&quot; &quot;Joni&quot; &quot;Banu&quot; &quot;Ani&quot; &quot;Riska&quot; &quot;John&quot; # baris 1-2, semua kolom employees[1:2,] ## ID Name Age Sex ## 1 1 Alex 21 M ## 2 2 Joni 27 M # kolom 1-2, semua baris employees[,1:2] ## ID Name ## 1 1 Alex ## 2 2 Joni ## 3 3 Banu ## 4 5 Ani ## 5 6 Riska ## 6 7 John # kolom 1-2, semua baris employees[,c(1, 2)] ## ID Name ## 1 1 Alex ## 2 2 Joni ## 3 3 Banu ## 4 5 Ani ## 5 6 Riska ## 6 7 John # kolom &quot;ID&quot; dan &quot;Name&quot;, semua baris employees[,c(&quot;ID&quot;, &quot;Name&quot;)] ## ID Name ## 1 1 Alex ## 2 2 Joni ## 3 3 Banu ## 4 5 Ani ## 5 6 Riska ## 6 7 John # semua kolom, hanya baris yang memenuhi kriteria employees[employees$Age &gt; 20, ] ## ID Name Age Sex ## 1 1 Alex 21 M ## 2 2 Joni 27 M ## 4 5 Ani 25 F ## 5 6 Riska 22 F ## 6 7 John 27 M 4.3 Mengubah data Dimungkinkan untuk mengubah/mengupdate nilai dari dataframe (misalnya jika diketahui ada kesalahan pencatatan) # Mengubah data di baris ke-3 kolom &quot;Age&quot; employees[3,&quot;Age&quot;] &lt;- 29 employees ## ID Name Age Sex ## 1 1 Alex 21 M ## 2 2 Joni 27 M ## 3 3 Banu 29 M ## 4 5 Ani 25 F ## 5 6 Riska 22 F ## 6 7 John 27 M 4.4 Mengurutkan baris Mengurutkan baris dapat dilakukan secara ascending (dari kecil ke besar, atau A-Z) atau descending (dari kecil ke besar, atau Z-A). # mengurutkan ascending employees[order(employees$Age),] ## ID Name Age Sex ## 1 1 Alex 21 M ## 5 6 Riska 22 F ## 4 5 Ani 25 F ## 2 2 Joni 27 M ## 6 7 John 27 M ## 3 3 Banu 29 M # mengurutkan descending employees[order(employees$Age, decreasing=T),] ## ID Name Age Sex ## 3 3 Banu 29 M ## 2 2 Joni 27 M ## 6 7 John 27 M ## 4 5 Ani 25 F ## 5 6 Riska 22 F ## 1 1 Alex 21 M 4.5 Menggabungkan dataframe Penggabungan dataframe dapat dilakukan secara column-wise (merge) ataupun row-wise (union). Untuk merge, bisa dilakukan dengan perintah merge() (berdasarkan ID tertentu), atau cbind() (berdasarkan urutan baris). Untuk penggabungan union, bisa menggunakan rbind() # menggabungkan kolom berdasarkan ID merge(employees, address, by=&quot;ID&quot;) ## ID Name Age Sex City ## 1 1 Alex 21 M Bandung ## 2 2 Joni 27 M Jakarta ## 3 3 Banu 29 M Bogor ## 4 5 Ani 25 F Jakarta ## 5 6 Riska 22 F Bandung ## 6 7 John 27 M Jakarta # menggabungkan kolom berdardasarkan urutan baris Salary &lt;- c(100, 120, 110, 90, 130, 120) cbind(employees, Salary) ## ID Name Age Sex Salary ## 1 1 Alex 21 M 100 ## 2 2 Joni 27 M 120 ## 3 3 Banu 29 M 110 ## 4 5 Ani 25 F 90 ## 5 6 Riska 22 F 130 ## 6 7 John 27 M 120 # menggabungkan baris berdasarkan urutan kolom all.employees &lt;- rbind(employees, more.employees) all.employees ## ID Name Age Sex ## 1 1 Alex 21 M ## 2 2 Joni 27 M ## 3 3 Banu 29 M ## 4 5 Ani 25 F ## 5 6 Riska 22 F ## 6 7 John 27 M ## 7 11 Bunga 25 M ## 8 12 Kembang 27 M ## 9 13 Puspa 21 M 4.6 Agregasi data Menghitung agregasi data # menghitung rata-rata age mean(all.employees$Age) ## [1] 24.88889 # menghitung jumlah employees berdasarkan jenis kelamin aggregate(all.employees$Sex, list(City=all.employees$Sex), FUN=length) ## City x ## 1 F 2 ## 2 M 7 4.7 Reshaping dataframe Reshaping adalah mengubah format dataframe dari long ke wide atau sebaliknya. Sebagai contoh # https://riptutorial.com/r/example/12036/the-reshape-function set.seed(1234) df &lt;- data.frame(identifier=rep(1:5, each=3), location=rep(c(&quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;up&quot;, &quot;center&quot;), each=3), period=rep(1:3, 5), counts=sample(35, 15, replace=TRUE), values=runif(15, 5, 10))[-c(4,8,11),] df ## identifier location period counts values ## 1 1 up 1 28 9.052993 ## 2 1 up 2 16 7.628488 ## 3 1 up 3 22 9.573291 ## 5 2 down 2 5 5.228851 ## 6 2 down 3 16 7.280457 ## 7 3 left 1 4 6.325933 ## 9 3 left 3 22 7.536534 ## 10 4 up 1 26 5.905481 ## 12 4 up 3 15 6.006240 ## 13 5 center 1 14 6.294049 ## 14 5 center 2 14 9.960752 ## 15 5 center 3 4 9.036762 4.7.1 Long to wide Reshape ke format wide untuk pada kolom period df.wide &lt;- reshape(df, idvar=&quot;identifier&quot;, timevar=&quot;period&quot;, v.names=c(&quot;values&quot;, &quot;counts&quot;), direction=&quot;wide&quot;) df.wide ## identifier location values.1 counts.1 values.2 counts.2 values.3 counts.3 ## 1 1 up 9.052993 28 7.628488 16 9.573291 22 ## 5 2 down NA NA 5.228851 5 7.280457 16 ## 7 3 left 6.325933 4 NA NA 7.536534 22 ## 10 4 up 5.905481 26 NA NA 6.006240 15 ## 13 5 center 6.294049 14 9.960752 14 9.036762 4 4.7.2 Wide to long Reshape ke format long reshape(df.wide, idvar=&quot;identifier&quot;, varying=list(c(3,5,7), c(4,6,8)), direction=&quot;long&quot;) ## identifier location time values.1 counts.1 ## 1.1 1 up 1 9.052993 28 ## 2.1 2 down 1 NA NA ## 3.1 3 left 1 6.325933 4 ## 4.1 4 up 1 5.905481 26 ## 5.1 5 center 1 6.294049 14 ## 1.2 1 up 2 7.628488 16 ## 2.2 2 down 2 5.228851 5 ## 3.2 3 left 2 NA NA ## 4.2 4 up 2 NA NA ## 5.2 5 center 2 9.960752 14 ## 1.3 1 up 3 9.573291 22 ## 2.3 2 down 3 7.280457 16 ## 3.3 3 left 3 7.536534 22 ## 4.3 4 up 3 6.006240 15 ## 5.3 5 center 3 9.036762 4 "],["data-wrangling-dengan-tidyverse.html", "Bagian 5 Data Wrangling dengan tidyverse 5.1 Data Wrangling 5.2 R, tidyverse dan dplyr 5.3 Studi Kasus: Data MovieLens 5.4 Join/Merge Dataframe 5.5 Reshaping Dataframe", " Bagian 5 Data Wrangling dengan tidyverse Tiga sub-bab pertama dalam artikel ini merupakan bagian dari tugas STA581 dan pernah dipublikasikan RPubs.com/nurandi. 5.1 Data Wrangling Aktivitas apa yang biasa dilakukan oleh data scientist terhadap data tabular? Barangkali menghapus kolom atau baris, melakukan kalkulasi, menambahkan kolom baru atau melakukan agregasi. Aktivitas-aktivitas tersebut sering disebut sebagai data wrangling (The OHI Team 2019) atau manipulasi data (dalam konitasi positif) yang bertujuan untuk mengubah data menjadi format yang lebih mudah digunakan atau mudah dipahami. Manipulasi data menjadi bagian tidak diterpisahkan dalam persiapan data yang umumnya membutuhkan waktu paling lama dari keseluruhan rangkaian analisis data. Skenario dalam proses ini berbeda-beda tergantung pada data yang digunakan dan tujuan yang ingin dicapai (Stobierski 2021). 5.2 R, tidyverse dan dplyr Sebagai bahasa pemrograman populer dalam sains data, R menyediakan berbagai paket/library untuk tujuan-tujuan spesifik. Sebagai contoh, kita dapat memanfaatkan paket tidyverse; sekumpulan beberapa paket untuk ekplorasi, manipulasi dan visualisasi data (Wickham et al. 2019), yang terdiri dari paket-paket antara lain: ggplot2 : membuat grafik dan visualisasi data dplyr : manipulasi data tidyr : membentuk tidy data, yaitu data dalam format yang konsisten readr : membaca berbagai data tabular purrr : bekerja dengan fungsi dan vektor tibble : bentuk lain dari data frame yang lebih modern stringr : bekerja dengan string forcats : bekerja dengan factor lubridate : bekerja dengan data berformat tanggal dan waktu tidyverse. Sumber gambar: Che Smith (chsmith1@davidson.edu) Artikel ini akan fokus pada pemanfaatan paket dplyr (Wickham et al. 2021b). Paket yang dikembangkan oleh Hadley Wickham dan tim ini dipandang sebagai grammar yang di dalamnya tersedia sejumlah verb untuk menyesaikan berbagai pekerjaan terkait manipulasi data (Wickham et al. 2021a), di antaranya untuk: memilih kolom, menyeleksi baris berdasarkan kriteria tertentu, agregasi data, menghitung kolom/variabel baru, mengatur urutan baris, dan lain-lain 5.3 Studi Kasus: Data MovieLens Untuk mengeksplorasi dasar-dasar manipulasi data dengan dplyr, kita akan menggunakan data MoviLens (Harper and Konstan 2015), yang bisa diperoleh dari paket dslabs. Data set ini berisi rating dari movie/film dari website MovieLens yang dikumpulkan dan dikelola oleh GroupLens, kelompok riset di Universitas Minnesota 5.3.1 Persiapan Instalasi paket-paket yang diperlukan, yaitu tidyverse (atau cukup dplyr) dan dslabs. Instalasi paket ini sifatnya opsional. Maksudnya apabila paket tersebut sudah terinstal maka tidak perlu melakukan instalasi lagi. install.packages(c(&quot;tidyverse&quot;,&quot;dslabs&quot;)) Lalu load paket-paket tersebut. library(tidyverse) ## -- Attaching packages --------------------------------------- tidyverse 1.3.1 -- ## v ggplot2 3.3.5 v purrr 0.3.4 ## v tibble 3.1.3 v dplyr 1.0.7 ## v tidyr 1.1.4 v stringr 1.4.0 ## v readr 2.0.2 v forcats 0.5.1 ## Warning: package &#39;tidyr&#39; was built under R version 4.1.1 ## Warning: package &#39;readr&#39; was built under R version 4.1.1 ## -- Conflicts ------------------------------------------ tidyverse_conflicts() -- ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() library(dslabs) Selanjutnya load data movilens dari paket dslabs data(movielens) Sebelum memulai proses manipulasi data, sangat direkomendasikan untuk melihat bentuk dan struktur data. Kita sudah mempunyai data movilens, yang merupakan sebuah data frame, yang dapat kita ubah menjadi tibble agar lebih mudah dalam menginspeksi data, terutama data yang berukuran besar. Sebuah tibble apabila ditampilkan dalam layar, hanya muncul maksimal 10 baris pertama, dilengkapi dengan informasi mengenai dimensi tabel, nama dan tipe kolom serta tampilan akan menyesuaikan lebar layar. movielens &lt;- as_tibble(movielens) movielens ## # A tibble: 100,004 x 7 ## movieId title year genres userId rating timestamp ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; ## 1 31 Dangerous Minds 1995 Drama 1 2.5 1.26e9 ## 2 1029 Dumbo 1941 Animation|Childr~ 1 3 1.26e9 ## 3 1061 Sleepers 1996 Thriller 1 3 1.26e9 ## 4 1129 Escape from New York 1981 Action|Adventure~ 1 2 1.26e9 ## 5 1172 Cinema Paradiso (Nuo~ 1989 Drama 1 4 1.26e9 ## 6 1263 Deer Hunter, The 1978 Drama|War 1 2 1.26e9 ## 7 1287 Ben-Hur 1959 Action|Adventure~ 1 2 1.26e9 ## 8 1293 Gandhi 1982 Drama 1 2 1.26e9 ## 9 1339 Dracula (Bram Stoker~ 1992 Fantasy|Horror|R~ 1 3.5 1.26e9 ## 10 1343 Cape Fear 1991 Thriller 1 2 1.26e9 ## # ... with 99,994 more rows Alternatif lain untuk menampilkan struktur data adalah fungsi glimpse. Fungsi ini sebenernya mirip dengan fungsi str dari paket utils. glimpse(movielens) ## Rows: 100,004 ## Columns: 7 ## $ movieId &lt;int&gt; 31, 1029, 1061, 1129, 1172, 1263, 1287, 1293, 1339, 1343, 13~ ## $ title &lt;chr&gt; &quot;Dangerous Minds&quot;, &quot;Dumbo&quot;, &quot;Sleepers&quot;, &quot;Escape from New Yor~ ## $ year &lt;int&gt; 1995, 1941, 1996, 1981, 1989, 1978, 1959, 1982, 1992, 1991, ~ ## $ genres &lt;fct&gt; Drama, Animation|Children|Drama|Musical, Thriller, Action|Ad~ ## $ userId &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ~ ## $ rating &lt;dbl&gt; 2.5, 3.0, 3.0, 2.0, 4.0, 2.0, 2.0, 2.0, 3.5, 2.0, 2.5, 1.0, ~ ## $ timestamp &lt;int&gt; 1260759144, 1260759179, 1260759182, 1260759185, 1260759205, ~ Dari output di atas kita tahun bahwa data movielens terdiri dari 100004 baris dan 7 kolom, yaitu Nama Tipe Contoh Keterangan movieId int 31 ID film title chr Dangerous Minds Judul film year int 1995 Tahun rilis genres fct Drama Genre/aliran (bisa terdapat beberapa genre) userId int 1 ID pengguna rating dbl 2.5 Rating timestamp int 1260759144 Waktu dalam format unix timestamp 5.3.2 Operator pipe %&gt;% Sebelum membahas dplyr lebih lanjut, mari berkenalan dengan operator pipe %&gt;%. Pipe merupakan operator yang berasal dari paket magrittr (Bache and Wickham 2020), yang dalam tidyverse dimuat secara otomatis. Perhatikan perintah berikut ini. nama_fungsi(nama_object) apabila ditulis dengan pipe, akan menjadi nama_object %&gt;% nama_fungsi Operator pipe sangat bermafaat untuk menuliskan banyak operasi secara sekuensial atau berurutan. Sebagai contoh, kita ingin membulatkan vektor numerik hingga dua tempat desimal, mengurutkannya dari besar ke kecil, lalu tampilkan enam elemen pertama. set.seed(123) number_data &lt;- runif(n = 15, min = 0, max = 100) Dengan base R dapat kita tulis head(sort(round(number_data, digit = 2), decreasing = TRUE)) ## [1] 95.68 94.05 89.24 88.30 78.83 67.76 Dengan operator pipe menjadi: number_data %&gt;% round(digits = 2) %&gt;% sort(decreasing = TRUE) %&gt;% head() ## [1] 95.68 94.05 89.24 88.30 78.83 67.76 5.3.3 dplyrs verbs Sebagai grammar untuk manipulasi data, paket dplyr mempunyai setidaknya lima verbs utama, masing-masing mempunya fungsi yang spesifik, yaitu: select() : memilih kolom filter() : menyeleksi baris berdasarkan kriteria tertentu summarise() : meringkas atau agregasi data mutate() : menghitung kolom/variabel baru arrange() : mengatur urutan baris Selain fungsi-fungsi di atas, masih banyak fungsi lain yang dapat digunakan, misalnya group_by() untuk pengelompokan data. Mari kita eksplorasi lebih lanjut. 5.3.4 Memilih kolom: select() Ketika bekerja dengan data yang mempunyai banyak kolom, biasanya kita ingin memilih kolom-kolom tertentu saja. Hal ini bisa kita lakukan dengan memanfaatkan fungsi select()berdasarkan nama atau posisi kolom. Misalnya dua perintah berikut akan memilih kolom title, year dan genres dari movielens. movielens %&gt;% select(title, year, genres) ## # A tibble: 100,004 x 3 ## title year genres ## &lt;chr&gt; &lt;int&gt; &lt;fct&gt; ## 1 Dangerous Minds 1995 Drama ## 2 Dumbo 1941 Animation|Children|Drama|Music~ ## 3 Sleepers 1996 Thriller ## 4 Escape from New York 1981 Action|Adventure|Sci-Fi|Thrill~ ## 5 Cinema Paradiso (Nuovo cinema Paradiso) 1989 Drama ## 6 Deer Hunter, The 1978 Drama|War ## 7 Ben-Hur 1959 Action|Adventure|Drama ## 8 Gandhi 1982 Drama ## 9 Dracula (Bram Stoker&#39;s Dracula) 1992 Fantasy|Horror|Romance|Thriller ## 10 Cape Fear 1991 Thriller ## # ... with 99,994 more rows movielens %&gt;% select(2, 3, 4) ## # A tibble: 100,004 x 3 ## title year genres ## &lt;chr&gt; &lt;int&gt; &lt;fct&gt; ## 1 Dangerous Minds 1995 Drama ## 2 Dumbo 1941 Animation|Children|Drama|Music~ ## 3 Sleepers 1996 Thriller ## 4 Escape from New York 1981 Action|Adventure|Sci-Fi|Thrill~ ## 5 Cinema Paradiso (Nuovo cinema Paradiso) 1989 Drama ## 6 Deer Hunter, The 1978 Drama|War ## 7 Ben-Hur 1959 Action|Adventure|Drama ## 8 Gandhi 1982 Drama ## 9 Dracula (Bram Stoker&#39;s Dracula) 1992 Fantasy|Horror|Romance|Thriller ## 10 Cape Fear 1991 Thriller ## # ... with 99,994 more rows Kita dapat menambahkan tanda minus - untuk tidak memilih kolom tersebut. movielens %&gt;% select(-title, -year, -genres) ## # A tibble: 100,004 x 4 ## movieId userId rating timestamp ## &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; ## 1 31 1 2.5 1260759144 ## 2 1029 1 3 1260759179 ## 3 1061 1 3 1260759182 ## 4 1129 1 2 1260759185 ## 5 1172 1 4 1260759205 ## 6 1263 1 2 1260759151 ## 7 1287 1 2 1260759187 ## 8 1293 1 2 1260759148 ## 9 1339 1 3.5 1260759125 ## 10 1343 1 2 1260759131 ## # ... with 99,994 more rows Ada sejumlah fungsi pembantu (helper function) yang bisa digunakan dalam select(), di antaranya: starts_with(\"abc\") : nama kolom diawali abc. ends_with(\"xyz\") : nama kolom diakhiri xyz. contains(\"ijk\") : nama kolom mengandung ijk. num_range(\"x\", 1:3) : memilih kolom x1, x2 dan x3. Selain memilih kolom, select() juga dapat digunakan untuk mengubah nama kolom, misalnya movielens %&gt;% select(movie_title = title, year, genres) ## # A tibble: 100,004 x 3 ## movie_title year genres ## &lt;chr&gt; &lt;int&gt; &lt;fct&gt; ## 1 Dangerous Minds 1995 Drama ## 2 Dumbo 1941 Animation|Children|Drama|Music~ ## 3 Sleepers 1996 Thriller ## 4 Escape from New York 1981 Action|Adventure|Sci-Fi|Thrill~ ## 5 Cinema Paradiso (Nuovo cinema Paradiso) 1989 Drama ## 6 Deer Hunter, The 1978 Drama|War ## 7 Ben-Hur 1959 Action|Adventure|Drama ## 8 Gandhi 1982 Drama ## 9 Dracula (Bram Stoker&#39;s Dracula) 1992 Fantasy|Horror|Romance|Thriller ## 10 Cape Fear 1991 Thriller ## # ... with 99,994 more rows 5.3.5 Menyeleksi baris: filter() filter() digunakan untuk menyeleksi atau memilih baris atau observasi berdasarkan nilainya. Misalnya kita ingin menampilkan film-film yang dirilis tahun 1995. movielens %&gt;% filter(year == 1995) ## # A tibble: 6,635 x 7 ## movieId title year genres userId rating timestamp ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; ## 1 31 Dangerous Minds 1995 Drama 1 2.5 1.26e9 ## 2 10 GoldenEye 1995 Action|Adventur~ 2 4 8.35e8 ## 3 17 Sense and Sensibility 1995 Drama|Romance 2 5 8.35e8 ## 4 39 Clueless 1995 Comedy|Romance 2 5 8.35e8 ## 5 47 Seven (a.k.a. Se7en) 1995 Mystery|Thriller 2 4 8.35e8 ## 6 50 Usual Suspects, The 1995 Crime|Mystery|T~ 2 4 8.35e8 ## 7 52 Mighty Aphrodite 1995 Comedy|Drama|Ro~ 2 3 8.35e8 ## 8 62 Mr. Holland&#39;s Opus 1995 Drama 2 3 8.35e8 ## 9 110 Braveheart 1995 Action|Drama|War 2 4 8.35e8 ## 10 144 Brothers McMullen, The 1995 Comedy 2 3 8.35e8 ## # ... with 6,625 more rows Dalam filter(), kita dapat menggunakan berbagai operator, seperti operator dasar &lt;, &lt;=, &gt;, &gt;, == (sama dengan) dan %in% (bagian dari). Argumen filter() yang lebih dari satu dapat digabungkan dengan bolean operator, yaitu &amp; (and/dan), | (or/atau) dan ! (not/tidak). Misalnya untuk menampilkan film-film yang dirilis tahun 1995 dan 1996 serta beraliran/genre hanya drama: movielens %&gt;% filter(year %in% c(1995, 1996) &amp; genres == &#39;Drama&#39;) ## # A tibble: 582 x 7 ## movieId title year genres userId rating timestamp ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; ## 1 31 Dangerous Minds 1995 Drama 1 2.5 1260759144 ## 2 62 Mr. Holland&#39;s Opus 1995 Drama 2 3 835355749 ## 3 1358 Sling Blade 1996 Drama 6 2 1109258181 ## 4 31 Dangerous Minds 1995 Drama 7 3 851868750 ## 5 40 Cry, the Beloved Country 1995 Drama 7 4 851866901 ## 6 1358 Sling Blade 1996 Drama 8 0.5 1154474527 ## 7 26 Othello 1995 Drama 9 3 938628655 ## 8 1358 Sling Blade 1996 Drama 9 4 938628450 ## 9 1358 Sling Blade 1996 Drama 10 5 942766420 ## 10 1423 Hearts and Minds 1996 Drama 10 4 942766420 ## # ... with 572 more rows Sekarang, kolom genres hanya berisi satu nilai yaitu Drama sehingga kita bisa harus kolom tersebut movielens %&gt;% filter(year %in% c(1995, 1996) &amp; genres == &#39;Drama&#39;) %&gt;% select(-genres) ## # A tibble: 582 x 6 ## movieId title year userId rating timestamp ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; ## 1 31 Dangerous Minds 1995 1 2.5 1260759144 ## 2 62 Mr. Holland&#39;s Opus 1995 2 3 835355749 ## 3 1358 Sling Blade 1996 6 2 1109258181 ## 4 31 Dangerous Minds 1995 7 3 851868750 ## 5 40 Cry, the Beloved Country 1995 7 4 851866901 ## 6 1358 Sling Blade 1996 8 0.5 1154474527 ## 7 26 Othello 1995 9 3 938628655 ## 8 1358 Sling Blade 1996 9 4 938628450 ## 9 1358 Sling Blade 1996 10 5 942766420 ## 10 1423 Hearts and Minds 1996 10 4 942766420 ## # ... with 572 more rows 5.3.6 Menambah kolom: mutate() Selain menggunakan kolom yang sudah tersedia dalam data, seringkali kita ingin membuat kolom baru yang merupakan turunan dari kolom yang sudah ada. Dalam movielens, kolom timestamp ditulis dalam format unix timestamp (jumlah detik dihitung sejak 1 Januari 1970, jam 00:00:00 UTC). Agar lebih mudah dipahami, kita dapat membuat kolom baru dengan mengubah kolom tersebut ke format datetime. movielens %&gt;% mutate(ts = as.POSIXct(timestamp, origin = &quot;1970-01-01&quot;)) %&gt;% select(-timestamp) ## # A tibble: 100,004 x 7 ## movieId title year genres userId rating ts ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;dttm&gt; ## 1 31 Dangerous Minds 1995 Drama 1 2.5 2009-12-14 09:52:24 ## 2 1029 Dumbo 1941 Animation|Ch~ 1 3 2009-12-14 09:52:59 ## 3 1061 Sleepers 1996 Thriller 1 3 2009-12-14 09:53:02 ## 4 1129 Escape from Ne~ 1981 Action|Adven~ 1 2 2009-12-14 09:53:05 ## 5 1172 Cinema Paradis~ 1989 Drama 1 4 2009-12-14 09:53:25 ## 6 1263 Deer Hunter, T~ 1978 Drama|War 1 2 2009-12-14 09:52:31 ## 7 1287 Ben-Hur 1959 Action|Adven~ 1 2 2009-12-14 09:53:07 ## 8 1293 Gandhi 1982 Drama 1 2 2009-12-14 09:52:28 ## 9 1339 Dracula (Bram ~ 1992 Fantasy|Horr~ 1 3.5 2009-12-14 09:52:05 ## 10 1343 Cape Fear 1991 Thriller 1 2 2009-12-14 09:52:11 ## # ... with 99,994 more rows Contoh lain, kita ingin membuat kolom baru yang menyatakan bahwa film berjenis Drama atau bukan: movielens %&gt;% mutate(isDrama = grepl(&quot;Drama&quot;, genres)) ## # A tibble: 100,004 x 8 ## movieId title year genres userId rating timestamp isDrama ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;lgl&gt; ## 1 31 Dangerous Minds 1995 Drama 1 2.5 1.26e9 TRUE ## 2 1029 Dumbo 1941 Animation|Chi~ 1 3 1.26e9 TRUE ## 3 1061 Sleepers 1996 Thriller 1 3 1.26e9 FALSE ## 4 1129 Escape from New~ 1981 Action|Advent~ 1 2 1.26e9 FALSE ## 5 1172 Cinema Paradiso~ 1989 Drama 1 4 1.26e9 TRUE ## 6 1263 Deer Hunter, The 1978 Drama|War 1 2 1.26e9 TRUE ## 7 1287 Ben-Hur 1959 Action|Advent~ 1 2 1.26e9 TRUE ## 8 1293 Gandhi 1982 Drama 1 2 1.26e9 TRUE ## 9 1339 Dracula (Bram S~ 1992 Fantasy|Horro~ 1 3.5 1.26e9 FALSE ## 10 1343 Cape Fear 1991 Thriller 1 2 1.26e9 FALSE ## # ... with 99,994 more rows Kedua perintah di atas dapat digabungkan menjadi movielens %&gt;% mutate(ts = as.POSIXct(timestamp, origin = &quot;1970-01-01&quot;), isDrama = grepl(&quot;Drama&quot;, genres)) %&gt;% select(-timestamp) ## # A tibble: 100,004 x 8 ## movieId title year genres userId rating ts isDrama ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;dttm&gt; &lt;lgl&gt; ## 1 31 Dangerous ~ 1995 Drama 1 2.5 2009-12-14 09:52:24 TRUE ## 2 1029 Dumbo 1941 Animatio~ 1 3 2009-12-14 09:52:59 TRUE ## 3 1061 Sleepers 1996 Thriller 1 3 2009-12-14 09:53:02 FALSE ## 4 1129 Escape fro~ 1981 Action|A~ 1 2 2009-12-14 09:53:05 FALSE ## 5 1172 Cinema Par~ 1989 Drama 1 4 2009-12-14 09:53:25 TRUE ## 6 1263 Deer Hunte~ 1978 Drama|War 1 2 2009-12-14 09:52:31 TRUE ## 7 1287 Ben-Hur 1959 Action|A~ 1 2 2009-12-14 09:53:07 TRUE ## 8 1293 Gandhi 1982 Drama 1 2 2009-12-14 09:52:28 TRUE ## 9 1339 Dracula (B~ 1992 Fantasy|~ 1 3.5 2009-12-14 09:52:05 FALSE ## 10 1343 Cape Fear 1991 Thriller 1 2 2009-12-14 09:52:11 FALSE ## # ... with 99,994 more rows 5.3.7 Meringkas data: summarise() summarise() berfungsi untuk meringkas atau agregasi baris data, seperti untuk menghitung banyaknya pengamatan, nilai tengah, total, nilai maksimum dan minimum, dan lain-lain. movielens %&gt;% summarise(uniqueTitle = n_distinct(title), totalReview = n(), avgRating = mean(rating)) ## # A tibble: 1 x 3 ## uniqueTitle totalReview avgRating ## &lt;int&gt; &lt;int&gt; &lt;dbl&gt; ## 1 8832 100004 3.54 Contoh di atas menghitung banyaknya baris, banyaknya judul unik, dan rata-rata dari rating dalam keseluruhan dataframe, dan meringkasnya menjadi satu baris. Kita dapat melakukan agregasi untuk setiap kelompok/group/class satu kolom atau lebih, dengan memanfaatkan perintah group_by(). Misalnya, contoh di atas dapat dimodifikasi agar perhitungan dilakukan untuk setiap tahun rilis. Dengan menambahkan group_by(year), maka perintah yang dimaksud adalah sebagai berikut: movielens %&gt;% group_by(year) %&gt;% summarise(uniqueTitle = n_distinct(title), totalReview = n(), avgRating = mean(rating)) ## # A tibble: 104 x 4 ## year uniqueTitle totalReview avgRating ## &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; ## 1 1902 1 6 4.33 ## 2 1915 1 2 3 ## 3 1916 1 1 3.5 ## 4 1917 1 2 4.25 ## 5 1918 1 2 4.25 ## 6 1919 1 1 3 ## 7 1920 3 15 3.7 ## 8 1921 5 12 4.42 ## 9 1922 6 28 3.80 ## 10 1923 3 3 4.17 ## # ... with 94 more rows Terlihat bahwa kolom tahun bersifat unik, artinya satu tahun hanya menempati satu baris. mutate() juga dapat dipasangkan dengan group_by(), sehingga kolom baru yang terbentu akan berisi nilai agregat yang dihitung per grup. Misal movielens %&gt;% group_by(year) %&gt;% mutate(uniqueTitle = n_distinct(title), totalReview = n(), avgRating = mean(rating)) %&gt;% filter(year &lt; 1920) ## # A tibble: 14 x 10 ## # Groups: year [6] ## movieId title year genres userId rating timestamp uniqueTitle totalReview ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; ## 1 7065 Birth ~ 1915 Drama|~ 262 2.5 1.43e9 1 2 ## 2 32898 Trip t~ 1902 Action~ 262 3 1.43e9 1 6 ## 3 32898 Trip t~ 1902 Action~ 299 4.5 1.34e9 1 6 ## 4 32898 Trip t~ 1902 Action~ 378 4 1.44e9 1 6 ## 5 3309 Dog&#39;s ~ 1918 Comedy 468 4.5 1.30e9 1 2 ## 6 7065 Birth ~ 1915 Drama|~ 468 3.5 1.30e9 1 2 ## 7 8511 Immigr~ 1917 Comedy 468 4.5 1.30e9 1 2 ## 8 32898 Trip t~ 1902 Action~ 468 4.5 1.30e9 1 6 ## 9 62383 20,000~ 1916 Action~ 468 3.5 1.30e9 1 1 ## 10 72626 Billy ~ 1919 Comedy~ 468 3 1.30e9 1 1 ## 11 32898 Trip t~ 1902 Action~ 481 5 1.44e9 1 6 ## 12 32898 Trip t~ 1902 Action~ 547 5 1.43e9 1 6 ## 13 3309 Dog&#39;s ~ 1918 Comedy 554 4 1.01e9 1 2 ## 14 8511 Immigr~ 1917 Comedy 648 4 1.18e9 1 2 ## # ... with 1 more variable: avgRating &lt;dbl&gt; Perhatikan output diatas, untuk kelompok tahun yang sama, maka uniqueTitle, totalReview dan avgRating juga sama nilainya. 5.3.8 Mengurutkan baris: arrange() Data yang terurut umumnya lebih mudah dibaca. Di paket dplyr kita dapat mengurutkan dataframe berdasarkan kolom tertentu dengan fungsi arrange(). Contoh sebelumnya, misalnya, dapat kita urutkan dari tahun terlama ke tahun terbaru sebagai berikut: movielens %&gt;% group_by(year) %&gt;% mutate(uniqueTitle = n_distinct(title), totalReview = n(), avgRating = mean(rating)) %&gt;% filter(year &lt; 1920) %&gt;% arrange(year) ## # A tibble: 14 x 10 ## # Groups: year [6] ## movieId title year genres userId rating timestamp uniqueTitle totalReview ## &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; ## 1 32898 Trip t~ 1902 Action~ 262 3 1.43e9 1 6 ## 2 32898 Trip t~ 1902 Action~ 299 4.5 1.34e9 1 6 ## 3 32898 Trip t~ 1902 Action~ 378 4 1.44e9 1 6 ## 4 32898 Trip t~ 1902 Action~ 468 4.5 1.30e9 1 6 ## 5 32898 Trip t~ 1902 Action~ 481 5 1.44e9 1 6 ## 6 32898 Trip t~ 1902 Action~ 547 5 1.43e9 1 6 ## 7 7065 Birth ~ 1915 Drama|~ 262 2.5 1.43e9 1 2 ## 8 7065 Birth ~ 1915 Drama|~ 468 3.5 1.30e9 1 2 ## 9 62383 20,000~ 1916 Action~ 468 3.5 1.30e9 1 1 ## 10 8511 Immigr~ 1917 Comedy 468 4.5 1.30e9 1 2 ## 11 8511 Immigr~ 1917 Comedy 648 4 1.18e9 1 2 ## 12 3309 Dog&#39;s ~ 1918 Comedy 468 4.5 1.30e9 1 2 ## 13 3309 Dog&#39;s ~ 1918 Comedy 554 4 1.01e9 1 2 ## 14 72626 Billy ~ 1919 Comedy~ 468 3 1.30e9 1 1 ## # ... with 1 more variable: avgRating &lt;dbl&gt; 5.3.9 Gabungan beberapa fungsi sekaligus Setelah mempraktikan bagaimana menggunakan fungsi-fungsi dasar dplyr, mari gabungkan beberapa fungsi dalam satu perintah. Contoh 1: Katakan untuk setiap film drama, kita ingin menghitung berapa banyak penilaian yang diberikan pada tahun perdana dan tahun-tahun setelahnya. Hasilnya diurutkan dari yang mendapat penilaian terbanyak di tahun perdana. movielens %&gt;% filter(grepl(&quot;Drama&quot;, genres)) %&gt;% mutate(yearRating = as.numeric(format(as.POSIXct(timestamp, origin = &quot;1970-01-01&quot;), &quot;%Y&quot;))) %&gt;% mutate(firstYear = year == yearRating, nextYear = year &lt; yearRating) %&gt;% group_by(title) %&gt;% summarise(firstYear = sum(firstYear), nextYear = sum(nextYear)) %&gt;% arrange(desc(firstYear)) ## # A tibble: 4,249 x 3 ## title firstYear nextYear ## &lt;chr&gt; &lt;int&gt; &lt;int&gt; ## 1 Fargo 19 205 ## 2 Gladiator 19 153 ## 3 American Beauty 18 202 ## 4 Blair Witch Project, The 18 68 ## 5 Ex Machina 18 8 ## 6 High Fidelity 18 70 ## 7 Dark Knight, The 17 104 ## 8 Sixth Sense, The 17 176 ## 9 Erin Brockovich 16 69 ## 10 Eraser 14 55 ## # ... with 4,239 more rows Contoh 2: Kita akan menampilkan satu film dengan rata-rata rating terbaik untuk setiap tahun perilisan. Jika ada beberapa film yang mempunyai rating tertinggi, maka dipilih film dengan jumlah rating terbanyak. Hasil akhir berupa dataframe dengan kolom tahun, judul dan rata-rata rating. movielens %&gt;% group_by(year, title) %&gt;% summarise(avgRating = mean(rating), nRating = n()) %&gt;% group_by(year) %&gt;% arrange(year, desc(avgRating), desc(nRating)) %&gt;% mutate(rn = row_number()) %&gt;% filter(rn == 1) %&gt;% select(-rn, -nRating) %&gt;% ungroup() ## `summarise()` has grouped output by &#39;year&#39;. You can override using the `.groups` argument. ## # A tibble: 104 x 3 ## year title avgRating ## &lt;int&gt; &lt;chr&gt; &lt;dbl&gt; ## 1 1902 Trip to the Moon, A (Voyage dans la lune, Le) 4.33 ## 2 1915 Birth of a Nation, The 3 ## 3 1916 20,000 Leagues Under the Sea 3.5 ## 4 1917 Immigrant, The 4.25 ## 5 1918 Dog&#39;s Life, A 4.25 ## 6 1919 Billy Blazes, Esq. 3 ## 7 1920 Cabinet of Dr. Caligari, The (Cabinet des Dr. Caligari., Das) 4 ## 8 1921 Goat, The 5 ## 9 1922 Cops 5 ## 10 1923 Our Hospitality 4.5 ## # ... with 94 more rows Dari hasil eksplorasi di atas, paket dplyr yang merupakan salah satu bagian inti dari paket tidyverse merupakan alat yang bisa diandalkan untuk manipulasi dataframe dalam R. Meskipun demikian, untuk keperluan yang lebih komplek, dplyr membutuhkan fungsi-fungsi yang tersedia di paket lain, baik itu paket bawaan seperti base dan utils, maupun paket lain. Misalnya untuk mengolah data string/text bisa menggunakan paket stringr, data berformat tanggal dan waktu bisa menggunakan paket lubridate. Sementara untuk melakukan pivoting atau un-pivoting bisa menggunakan paket tidyr. Contoh-contoh lain dalam menggunakan dplyr dapat dipelajari di buku R for Data Science (Wickham and Grolemund 2017). 5.4 Join/Merge Dataframe Join atau merge merupakan proses penggabungan dua dataframe berdasarkan kolom kunci tertentu. Dalam dplyr/tidyverse dikenal beberapa jenis join yaitu inner_join(), semi_join(), left_join(), right_join(),full_join(), dan anti_join(). Join dalam tidyverse. Sumber gambar: Minnier &amp; Niederhausen) Kita akan mempraktikan penggunaan ke-enam jenis join tersebut menggunakan data berikut ini. Seluruh pembahasan dalam sub-bagian join/merge diambil dari stat545.com. superheroes &lt;- tibble::tribble( ~name, ~alignment, ~gender, ~publisher, &quot;Magneto&quot;, &quot;bad&quot;, &quot;male&quot;, &quot;Marvel&quot;, &quot;Storm&quot;, &quot;good&quot;, &quot;female&quot;, &quot;Marvel&quot;, &quot;Mystique&quot;, &quot;bad&quot;, &quot;female&quot;, &quot;Marvel&quot;, &quot;Batman&quot;, &quot;good&quot;, &quot;male&quot;, &quot;DC&quot;, &quot;Joker&quot;, &quot;bad&quot;, &quot;male&quot;, &quot;DC&quot;, &quot;Catwoman&quot;, &quot;bad&quot;, &quot;female&quot;, &quot;DC&quot;, &quot;Hellboy&quot;, &quot;good&quot;, &quot;male&quot;, &quot;Dark Horse Comics&quot; ) publishers &lt;- tibble::tribble( ~publisher, ~yr_founded, &quot;DC&quot;, 1934L, &quot;Marvel&quot;, 1939L, &quot;Image&quot;, 1992L ) 5.4.1 inner_join(x,y) Mengembalikan semua baris dari x yang berpasangan dengan nilai di tabel y berdasarkan kolom tertentu. Semua kolom dari kedua tabel akan ditampilkan. Jika ada multiple matches, maka seluruh kombinasi yang match tersebut akan dikembalikan. inner_join(superheroes, publishers) ## Joining, by = &quot;publisher&quot; ## # A tibble: 6 x 5 ## name alignment gender publisher yr_founded ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 Magneto bad male Marvel 1939 ## 2 Storm good female Marvel 1939 ## 3 Mystique bad female Marvel 1939 ## 4 Batman good male DC 1934 ## 5 Joker bad male DC 1934 ## 6 Catwoman bad female DC 1934 5.4.2 semi_join(x,y) Mirip seperti inner_join() hanya saja tidak akan mengembalikan nilai duplikat. Pada semi_join, hanya mengembalikan kolom-kolom dari tabel x. semi_join(superheroes, publishers) ## Joining, by = &quot;publisher&quot; ## # A tibble: 6 x 4 ## name alignment gender publisher ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Magneto bad male Marvel ## 2 Storm good female Marvel ## 3 Mystique bad female Marvel ## 4 Batman good male DC ## 5 Joker bad male DC ## 6 Catwoman bad female DC 5.4.3 left_join(x,y) Mengembalikan semua baris dari x. Jika ada match dengan tabel y, maka data akan dikembalikan. Jika tidak match, maka akan diisi dengan NA. Pada left_join() kolom-kolom dari tabel x dan y dikembalikan. left_join(superheroes, publishers) ## Joining, by = &quot;publisher&quot; ## # A tibble: 7 x 5 ## name alignment gender publisher yr_founded ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 Magneto bad male Marvel 1939 ## 2 Storm good female Marvel 1939 ## 3 Mystique bad female Marvel 1939 ## 4 Batman good male DC 1934 ## 5 Joker bad male DC 1934 ## 6 Catwoman bad female DC 1934 ## 7 Hellboy good male Dark Horse Comics NA 5.4.4 right_join(x,y) Kebalikannya dari left_join() right_join(superheroes, publishers) ## Joining, by = &quot;publisher&quot; ## # A tibble: 7 x 5 ## name alignment gender publisher yr_founded ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 Magneto bad male Marvel 1939 ## 2 Storm good female Marvel 1939 ## 3 Mystique bad female Marvel 1939 ## 4 Batman good male DC 1934 ## 5 Joker bad male DC 1934 ## 6 Catwoman bad female DC 1934 ## 7 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; Image 1992 5.4.5 full_join(x,y) Mengembalikan semua baris dari tabel x dan y baik yang berpasangan maupun tidak. Untuk baris yang tidak berpasangan akan diisi dengan NA. full_join() mengembalikan kolom-kolom dari kedua tabel. full_join(superheroes, publishers) ## Joining, by = &quot;publisher&quot; ## # A tibble: 8 x 5 ## name alignment gender publisher yr_founded ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 Magneto bad male Marvel 1939 ## 2 Storm good female Marvel 1939 ## 3 Mystique bad female Marvel 1939 ## 4 Batman good male DC 1934 ## 5 Joker bad male DC 1934 ## 6 Catwoman bad female DC 1934 ## 7 Hellboy good male Dark Horse Comics NA ## 8 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; Image 1992 5.4.6 anti_join(x,y) Mengembalikan baris-baris dari x yang tidak berpasangan dengan y. Hanya kolom dari x yang dikembalikan. anti_join(superheroes, publishers) ## Joining, by = &quot;publisher&quot; ## # A tibble: 1 x 4 ## name alignment gender publisher ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Hellboy good male Dark Horse Comics 5.5 Reshaping Dataframe Reshaping atau pivoting merupakan proses mengubah format tabel, dari wide ke long atau sebaliknya. Namun umumnya, analis data lebih tertarik untuk mendapatkan format data yang tidy. Suatu data disebut tidy apabila: Setiap kolom adalah variabel/peubah Setiap baris adalah pengamatan Setiap cell adalah nilai tunggal Format tidy data merupakan format penyimpanan standar dalam tidyverse. Apabila data kita sudah berformat tidy, maka akan memudahkan untuk dilakukan analisis. Selain dengan paket base (seperti yang telah dipelajari di bab sebelumnya), salah satu paket yang dapat digunakan untuk melakukan reshape data adalah tidyr yang merupakan bagian dari paket tidyverse. Apabila belum menginstal paket tersebut, dipersilakan menginstalnya terlebih dahulu dan load kedalam workspace: install.packages(&quot;tidyr&quot;) library(tidyr) Untuk praktik kita akan menggunakan data set airquality yang ada pada paket datasets (Sumber). data(airquality) head(airquality) ## Ozone Solar.R Wind Temp Month Day ## 1 41 190 7.4 67 5 1 ## 2 36 118 8.0 72 5 2 ## 3 12 149 12.6 74 5 3 ## 4 18 313 11.5 62 5 4 ## 5 NA NA 14.3 56 5 5 ## 6 28 NA 14.9 66 5 6 5.5.1 Long ke wide Data airquality berformat long. Misalnya kita akan mengubahnya menjadi format wide untuk kolom Month sebagai nama dan Temp sebagai nilai. Fungsi yang dapat digunakan adalah pivot_wider() air_wide &lt;- airquality %&gt;% select(Temp, Month, Day) %&gt;% pivot_wider(names_from = Month, values_from = Temp, names_prefix = &quot;Month&quot;) air_wide ## # A tibble: 31 x 6 ## Day Month5 Month6 Month7 Month8 Month9 ## &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; ## 1 1 67 78 84 81 91 ## 2 2 72 74 85 81 92 ## 3 3 74 67 81 82 93 ## 4 4 62 84 84 86 93 ## 5 5 56 85 83 85 87 ## 6 6 66 79 83 87 84 ## 7 7 65 82 88 89 80 ## 8 8 59 87 92 90 78 ## 9 9 61 90 92 90 75 ## 10 10 69 87 89 92 73 ## # ... with 21 more rows Sekarang tabel berformat wide, yang disusun berdasarkan baris Day dan kolom Month5, Month6, dan seterusnya. Nilai dalam setiap cell adalah Temp. 5.5.2 Wide ke long Jika tabel berupa format wide, kita bisa mengubahnya menjadi long dengan perintah pivot_longer(). air_long &lt;- airquality %&gt;% pivot_longer(cols = Ozone:Temp, names_to = &quot;Variable&quot;, values_to = &quot;Value&quot;) air_long ## # A tibble: 612 x 4 ## Month Day Variable Value ## &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;dbl&gt; ## 1 5 1 Ozone 41 ## 2 5 1 Solar.R 190 ## 3 5 1 Wind 7.4 ## 4 5 1 Temp 67 ## 5 5 2 Ozone 36 ## 6 5 2 Solar.R 118 ## 7 5 2 Wind 8 ## 8 5 2 Temp 72 ## 9 5 3 Ozone 12 ## 10 5 3 Solar.R 149 ## # ... with 602 more rows Contoh diatas mengubah tabel menjadi long, kolom Ozone hinggal Temp menjadi kolom variabel yang nilai-nilainya ditempatkan pada kolom value. "],["visualisasi-data.html", "Bagian 6 Visualisasi Data 6.1 Grafik R dasar 6.2 ggplot2 6.3 Visualisasi data spasial", " Bagian 6 Visualisasi Data Salah satu keunggulan R dibandingkan dengan software statistika lainnya adalah kemampuan menghasilkan grafik yang sangat mumpuni, baik untuk membuat plot untuk eksplorasi data awal, validasi model, atau untuk keperluan publikasi. Setidaknya ada tiga sistem utama untuk menghasilkan grafik dalam R yaitu grafik R dasar (base R graphics), lattice dan ggplot2. Masing-masing sistem ini memiliki kekuatan dan kelemahannya masing-masing. Pada kesempatan ini, kita akan lebih fokus pada grafik R dasar dan ggplot2. Untuk keperluan praktik pembuatan grafik, kita akan menggunakan salah satu dari data NYS Salary Information for the Public Sector yang dapat diperoleh di laman kaggle, di samping data-data lainnya. Untuk memudahkan proses latihan, data telah saya olah terlebih dahulu dengan perintah berikut library(dplyr) read.csv(&quot;data/salary-information-for-local-authorities.csv&quot;) %&gt;% filter(Has.Employees != &#39;No&#39;) %&gt;% mutate(Employee.Group = substr(Employee.Group.End.Date, 1, 4), Other.Allowances = Overtime.Paid + Performance.Bonus + Extra.Pay + Other.Compensation ) %&gt;% mutate_all(na_if, &quot;&quot;) %&gt;% select(Authority.Name, Employee.Group, Title, Group, Department, Pay.Type, Exempt.Indicator, Base.Annualized.Salary, Actual.Salary.Paid, Other.Allowances, Total.Compensation, Paid.By.Another.Entity, Paid.by.State.or.Local.Government ) %&gt;% saveRDS(&quot;data/salary.rds&quot;) Salary &lt;- readRDS(&quot;data/salary.rds&quot;) glimpse(Salary) ## Rows: 444,894 ## Columns: 13 ## $ Authority.Name &lt;chr&gt; &quot;Albany County Airport Authority&quot;, &quot;~ ## $ Fiscal.Year &lt;chr&gt; &quot;2019&quot;, &quot;2019&quot;, &quot;2019&quot;, &quot;2019&quot;, &quot;201~ ## $ Title &lt;chr&gt; &quot;Senior Account Technician&quot;, &quot;Chief ~ ## $ Employee.Group &lt;chr&gt; &quot;Administrative&quot;, &quot;Executive&quot;, &quot;Mana~ ## $ Department &lt;chr&gt; &quot;Finance&quot;, &quot;Administration&quot;, &quot;Financ~ ## $ Pay.Type &lt;chr&gt; &quot;FT&quot;, &quot;FT&quot;, &quot;FT&quot;, &quot;FT&quot;, &quot;PT&quot;, &quot;FT&quot;, ~ ## $ Exempt.Indicator &lt;chr&gt; &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;~ ## $ Base.Annualized.Salary &lt;dbl&gt; 57331.92, 185000.00, 86828.74, 84504~ ## $ Actual.Salary.Paid &lt;dbl&gt; 57331.92, 15416.66, 86828.74, 84504.~ ## $ Other.Allowances &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, ~ ## $ Total.Compensation &lt;dbl&gt; 57331.92, 15416.66, 86828.74, 84504.~ ## $ Paid.By.Another.Entity &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;~ ## $ Paid.by.State.or.Local.Government &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, ~ 6.1 Grafik R dasar 6.1.1 Histogram Membuat histogram dapat dilakukan dengan fungsi hist() hist(Salary$Actual.Salary.Paid) hist(Salary$Actual.Salary.Paid, freq = FALSE) hist(Salary$Actual.Salary.Paid, freq = FALSE, breaks = 50) plot(density(Salary$Actual.Salary.Paid, bw = 0.5)) 6.1.2 Bar plot counts &lt;- table(Salary$Employee.Group) counts ## ## Administrative Executive Managerial Operational Professional ## 65857 1864 37986 115146 132906 ## Technical ## 91135 barplot(counts) barplot(counts, cex.names=.8) counts &lt;- table(Salary$Pay.Type, Salary$Employee.Group) barplot(counts, cex.names=.8) barplot(counts, col = c(&quot;#ffd166&quot;,&quot;#06d6a0&quot;), #custom colors legend = rownames(counts), cex.names=.8) barplot(counts, col = c(&quot;#ffd166&quot;,&quot;#06d6a0&quot;), legend = rownames(counts), beside = TRUE, cex.names=.8) 6.1.3 Scatter plot x = seq(from = -2*pi, to = 2*pi, length.out = 100) y = 2*sin(x) plot(x,y) plot(x,y, type = &quot;l&quot;) plot(x,y, type = &quot;h&quot;) Salary100 &lt;- Salary[1:1000,] plot(Salary100$Base.Annualized.Salary, Salary100$Total.Compensation) plot(Salary100$Base.Annualized.Salary, Salary100$Total.Compensation, pch = 19) Salary100$Employee.Group &lt;- as.factor(Salary100$Employee.Group) plot(Salary100$Base.Annualized.Salary, Salary100$Total.Compensation, col = Salary100$Employee.Group, pch = 16) Salary100$Employee.Group &lt;- as.factor(Salary100$Employee.Group) plot(Salary100$Base.Annualized.Salary, Salary100$Total.Compensation, col = Salary100$Employee.Group, pch = 16) legend(x = 0, y = 200000, legend = levels(Salary100$Employee.Group), col = 1:6, pch = 19) mean.Total.Compensation &lt;- mean(Salary100$Total.Compensation) mean.Base.Annualized.Salary &lt;- mean(Salary100$Base.Annualized.Salary) plot(Salary100$Base.Annualized.Salary, Salary100$Total.Compensation, pch = 19) points(mean.Base.Annualized.Salary, mean.Total.Compensation , pch = 15, col = &#39;red&#39;, cex = 1.5) pairs(~ Total.Compensation + Base.Annualized.Salary + Actual.Salary.Paid + Other.Allowances, data = Salary100) 6.1.4 Line plot plot(x,y) lines(x, sin(x)) x &lt;- 1:40 y &lt;- rnorm(40,5,1) plot(x,y,type=&quot;o&quot;) plot(Salary100$Base.Annualized.Salary, Salary100$Total.Compensation, pch = 19) # regression line (y~x) abline(lm(Total.Compensation~Base.Annualized.Salary, data = Salary100), col = &quot;red&quot;) # lowess line (x,y) lines(lowess(Salary100$Base.Annualized.Salary,Salary100$Total.Compensation), col = &quot;blue&quot;) 6.1.5 Pie chart tbl.Employee &lt;- table(Salary$Employee.Group) pie(tbl.Employee) mytable &lt;- table(iris$Species) lbls &lt;- paste(names(mytable), &quot;\\n&quot;, mytable, sep=&quot;&quot;) pie(mytable, labels = lbls, main=&quot;Pie Chart of Species\\n (with sample sizes)&quot;) 6.1.6 Boxplot boxplot(Salary$Actual.Salary.Paid) boxplot(Actual.Salary.Paid ~ Employee.Group, data = Salary, cex.axis=.8) boxplot(Actual.Salary.Paid ~ Employee.Group, data = Salary, notch = TRUE, col = RColorBrewer::brewer.pal(length(unique(Salary$Employee.Group)),&#39;Set2&#39;), cex.axis=.8) 6.1.7 Layout par(mfrow = c(2,2), cex.main = 0.75) ## plot 1 plot(Salary$Base.Annualized.Salary, Salary$Total.Compensation, main = &quot;Scatterplot of Base Annualized Salary vs. Total Compensation&quot;) ## plot 2 hist(Salary$Total.Compensation, main = &quot;Histogram of Total Compensation&quot;) ## plot 3 boxplot(Salary$Actual.Salary.Paid, main = &quot;Actual Salary Paid&quot;) ## plot 4 barplot(table(Salary$Employee.Group), las = 2, cex.names = 0.65, main = &quot;Barplot of Employee Group&quot;) par(mfrow = c(2,1), cex.main = 0.75) ## plot 1 plot(Salary$Base.Annualized.Salary, Salary$Total.Compensation, main = &quot;Scatterplot of Base Annualized Salary vs. Total Compensation&quot;) ## plot 2 barplot(table(Salary$Employee.Group), las = 2, cex.names = 0.65, main = &quot;Barplot of Employee Group&quot;) layout(matrix(c(1,1,2,3), 2, 2, byrow = TRUE)) hist(Salary$Actual.Salary.Paid, breaks = 50) hist(Salary$Base.Annualized.Salary) hist(Salary$Total.Compensation) par(cex.main = 0.7) layout(matrix(c(1,1,2,3), 2, 2, byrow = TRUE), widths = c(3,1)) # column 2 is 1/3 the width of the column 1 hist(Salary$Actual.Salary.Paid, breaks = 50) hist(Salary$Base.Annualized.Salary) hist(Salary$Total.Compensation) 6.1.8 Latihan/Responsi 6.1.8.1 Latihan 1 Buatlah scatter plot seperti gambar berikut # data awal x &lt;- 1:40 y &lt;- rnorm(40,5,1) # data baru x1 &lt;- 41:50 y1 &lt;- rnorm(10,5,1) # scatter plot dg data awal plot(x, y, type=&quot;p&quot;, xlab=&quot;Sumbu x&quot;, ylab=&quot;Sumbu y&quot;, main=&quot;Bilangan Acak Normal&quot;, col=topo.colors(40), pch=16, cex=2, xlim=c(0,50), ylim=c(2.5,7.5)) # plot data baru points(x1, y1, cex=2) #menambahkan garis x2 &lt;- rep(40.5,20) y2 &lt;- seq(min(c(y,y1)), max(c(y,y1)), length=20) abline(v = 40.2, col=&quot;blue&quot;) abline(h=mean(y), col=&quot;red&quot;, lwd=2.5) abline(a=2, b=1/10, col=&quot;purple&quot;, lwd=2, lty=2) #menambahkan tanda panah arrows(x0=30, y0=3.5, x1=40, y1=mean(y)-.1, lwd=2) #menambahkan tulisan text(x=29,y=3.3, labels=&quot;Titik potong&quot;, cex=0.7) text(x=3,y=7.3, labels=&quot;Data awal&quot;, cex=0.7) text(x=46,y=7.3, labels=&quot;Data baru&quot;, cex=0.7) 6.1.8.2 Latihan 2 Buatlah density histogram dan kurva dari contoh acak yang menyebar Chi-Squared dengan derajat bebas 4. x &lt;- rchisq(1000,df=4) hist(x, freq=FALSE, ylim=c(0,0.2), main = &quot;Histogram of Random Variable ~ Chi-Squared(4)&quot;) curve(dchisq(x,df=4), col=2, lty=2, lwd=2, add=TRUE) 6.1.8.3 Latihan 3 Buatlah grafik seperti berikut a1 &lt;- 1:25 a2 &lt;- rnorm(25,4,2) x &lt;- seq(0,10,0.1) sin &lt;- sin(x) par(mfrow=c(2,2)) plot(1:40,y,type=&quot;p&quot;,xlab=&quot;Sumbu x&quot;,ylab=&quot;Sumbu y&quot;, main=&quot;Bilangan Acak Normal&quot;,col=2,pch=16) y=plot(x, sin, type=&quot;l&quot;) plot(table(rpois(100,5)),type=&quot;h&quot;,col=&quot;red&quot;, lwd=1,main=&quot;rpois(100,lambda=5)&quot;) plot(a1,a2,type=&quot;n&quot;,main=&quot;W&quot;) text(a1,a2,labels=paste(&quot;w&quot;,1:25,sep=&quot;&quot;), col=rainbow(25),cex=0.8) 6.1.8.4 Latihan 4 Buat empat grafil dalam satu windows, dengan format berikut: yb &lt;- rnorm(100,5,1) xb &lt;- 1:100 par(mfrow=c(2,2)) plot(xb, yb, pch=16, col=rainbow(100)) title(&quot;Scatter Plot Bilangan Acak Normal&quot;,cex.main=0.7) x &lt;- yb hist(yb, freq=FALSE, main=NULL, ylim=c(0,0.5)) curve(dnorm(x,5,1), col=&quot;red&quot;, lty=2, lwd=2, add=TRUE) title(&quot;Histogram Bilangan Acak Normal&quot;, cex.main=0.7) boxplot(yb) title(&quot;Boxplot Bilangan Acak Normal&quot;,cex.main=0.7) plot(xb, yb, type=&quot;l&quot;,lwd=2,col=&quot;blue&quot;) title(&quot;Line Plot Bilangan Acak Normal&quot;,cex.main=0.7) 6.2 ggplot2 library(ggplot2) 6.2.1 Histogram ggplot(Salary, aes(x=Total.Compensation)) + geom_histogram() ggplot(Salary, aes(x=Total.Compensation)) + geom_histogram(binwidth=10000, colour=&quot;black&quot;, fill=&quot;white&quot;) ggplot(Salary, aes(x=Total.Compensation)) + geom_density() ggplot(Salary, aes(x=Total.Compensation)) + geom_histogram(aes(y=..density..), binwidth=10000, colour=&quot;black&quot;, fill=&quot;white&quot;) + geom_density(alpha=.2, fill=&quot;#FF6666&quot;) ggplot(Salary, aes(x=Total.Compensation, fill=Pay.Type)) + geom_histogram(binwidth=10000, alpha=.5, position=&quot;identity&quot;) ggplot(Salary, aes(x=Total.Compensation)) + geom_histogram(binwidth=10000, colour=&quot;black&quot;, fill=&quot;white&quot;) + facet_grid(Pay.Type ~ .) 6.2.2 Scatterplot ggplot(Salary100, aes(x=Base.Annualized.Salary, y=Total.Compensation)) + geom_point(shape=1) # hollow circles ggplot(Salary100, aes(x=Base.Annualized.Salary, y=Total.Compensation, color = Employee.Group)) + geom_point(shape=1) # hollow circles 6.2.3 Barplot ggplot(Salary, aes(x=Employee.Group)) + geom_bar(stat=&quot;count&quot;) ggplot(Salary, aes(x=Employee.Group, fill=Employee.Group)) + geom_bar(stat=&quot;count&quot;) ggplot(Salary, aes(x=Employee.Group, fill=Pay.Type)) + geom_bar(stat=&quot;count&quot;) ggplot(Salary, aes(x=Employee.Group, fill=Pay.Type)) + geom_bar(stat=&quot;count&quot;, position=&quot;fill&quot;) ggplot(Salary, aes(x=Employee.Group, fill=Pay.Type)) + geom_bar(stat=&quot;count&quot;, position=position_dodge()) 6.2.4 Pie chart Total.Employee &lt;- Salary %&gt;% group_by(Employee.Group) %&gt;% summarise(Total.Employee = n()) %&gt;% ungroup() %&gt;% arrange(desc(Employee.Group)) %&gt;% mutate(lab.ypos = cumsum(Total.Employee) - 0.5*Total.Employee) ggplot(Total.Employee, aes(x=&quot;&quot;, y=Total.Employee, fill=Employee.Group)) + geom_bar(stat=&quot;identity&quot;) + coord_polar(&quot;y&quot;, start = 0) + theme_void() ggplot(Total.Employee, aes(x = 2, y = Total.Employee, fill = Employee.Group)) + geom_bar(stat = &quot;identity&quot;, color = &quot;white&quot;) + coord_polar(theta = &quot;y&quot;, start = 0)+ geom_text(aes(y = lab.ypos, label = Employee.Group), color = &quot;white&quot;)+ theme_void()+ xlim(0.5, 2.5) 6.2.5 Line plot Salary.by.Year &lt;- Salary %&gt;% group_by(Fiscal.Year) %&gt;% summarise(Actual.Salary = mean(Actual.Salary.Paid)) ggplot(Salary.by.Year, aes(x=factor(Fiscal.Year), group=1, y=Actual.Salary)) + geom_line() Salary.by.Year &lt;- Salary %&gt;% group_by(Fiscal.Year, Employee.Group) %&gt;% summarise(Actual.Salary = mean(Actual.Salary.Paid)) ggplot(Salary.by.Year, aes(x=factor(Fiscal.Year), y=Actual.Salary, group=Employee.Group, col=Employee.Group)) + geom_line() ggplot(Salary.by.Year, aes(x=factor(Fiscal.Year), y=Actual.Salary, group=Employee.Group, col=Employee.Group)) + geom_line() + geom_point() 6.2.6 Boxplot ggplot(Salary, aes(x=Total.Compensation)) + geom_boxplot() ggplot(Salary, aes(y=Total.Compensation, fill = Employee.Group)) + geom_boxplot() 6.2.7 Layout Menggunakan fungsi plot_grid() dari library cowplot. library(cowplot) p1 &lt;- ggplot(Salary, aes(y=Total.Compensation)) + geom_boxplot() p2 &lt;- ggplot(Salary100, aes(x=Base.Annualized.Salary, y=Total.Compensation)) + geom_point(shape=1) p3 &lt;- ggplot(Salary, aes(x=Total.Compensation)) + geom_histogram() p4 &lt;- ggplot(Salary, aes(x=Total.Compensation)) + geom_density() plot_grid(p1, p2, labels = NULL) plot_grid(p1, p2, p3, p4, labels = NULL) 6.3 Visualisasi data spasial 6.3.1 Membaca data library(sf) mapIndonesia &lt;- st_read(&quot;map/shp/idn_admbnda_adm3_bps_20200401.shp&quot;, quiet = TRUE) Shape file di peroleh dari: data.humdata.org dplyr::glimpse(mapIndonesia) ## Rows: 7,069 ## Columns: 17 ## $ Shape_Leng &lt;dbl&gt; 0.2798656, 0.7514001, 0.6900061, 0.6483629, 0.2437073, 1.35~ ## $ Shape_Area &lt;dbl&gt; 0.003107633, 0.016925540, 0.024636382, 0.010761277, 0.00116~ ## $ ADM3_EN &lt;chr&gt; &quot;2 X 11 Enam Lingkung&quot;, &quot;2 X 11 Kayu Tanam&quot;, &quot;Abab&quot;, &quot;Abang~ ## $ ADM3_PCODE &lt;chr&gt; &quot;ID1306050&quot;, &quot;ID1306052&quot;, &quot;ID1612030&quot;, &quot;ID5107050&quot;, &quot;ID7471~ ## $ ADM3_REF &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~ ## $ ADM3ALT1EN &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~ ## $ ADM3ALT2EN &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~ ## $ ADM2_EN &lt;chr&gt; &quot;Padang Pariaman&quot;, &quot;Padang Pariaman&quot;, &quot;Penukal Abab Lematan~ ## $ ADM2_PCODE &lt;chr&gt; &quot;ID1306&quot;, &quot;ID1306&quot;, &quot;ID1612&quot;, &quot;ID5107&quot;, &quot;ID7471&quot;, &quot;ID9432&quot;,~ ## $ ADM1_EN &lt;chr&gt; &quot;Sumatera Barat&quot;, &quot;Sumatera Barat&quot;, &quot;Sumatera Selatan&quot;, &quot;Ba~ ## $ ADM1_PCODE &lt;chr&gt; &quot;ID13&quot;, &quot;ID13&quot;, &quot;ID16&quot;, &quot;ID51&quot;, &quot;ID74&quot;, &quot;ID94&quot;, &quot;ID94&quot;, &quot;ID~ ## $ ADM0_EN &lt;chr&gt; &quot;Indonesia&quot;, &quot;Indonesia&quot;, &quot;Indonesia&quot;, &quot;Indonesia&quot;, &quot;Indone~ ## $ ADM0_PCODE &lt;chr&gt; &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;, &quot;ID&quot;,~ ## $ date &lt;date&gt; 2019-12-20, 2019-12-20, 2019-12-20, 2019-12-20, 2019-12-20~ ## $ validOn &lt;date&gt; 2020-04-01, 2020-04-01, 2020-04-01, 2020-04-01, 2020-04-01~ ## $ validTo &lt;date&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~ ## $ geometry &lt;MULTIPOLYGON [Â°]&gt; MULTIPOLYGON (((100.2811 -0..., MULTIPOLYGON (~ dataBogor &lt;- read.csv(&quot;data/Demografi-Bogor.csv&quot;) dataBogor ## Kota Kecamatan KodeBPS KodeKemendagri JumlahPenduduk LuasWilayah ## 1 Kota Bogor Bogor Barat ID3271050 32.71.04 244708 23.08 ## 2 Kota Bogor Bogor Selatan ID3271010 32.71.01 208185 31.16 ## 3 Kota Bogor Bogor Tengah ID3271040 32.71.03 106359 8.11 ## 4 Kota Bogor Bogor Timur ID3271020 32.71.02 105233 10.75 ## 5 Kota Bogor Bogor Utara ID3271030 32.71.05 192837 18.88 ## 6 Kota Bogor Tanah Sareal ID3271060 32.71.06 218135 21.25 ## KepadatanPenduduk ## 1 10603 ## 2 6681 ## 3 13115 ## 4 9789 ## 5 10214 ## 6 10265 mapBogor&lt;- mapIndonesia %&gt;% dplyr::inner_join(dataBogor, by = c(&quot;ADM3_PCODE&quot; = &quot;KodeBPS&quot;)) mapBogor ## Simple feature collection with 6 features and 22 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 106.735 ymin: -6.679585 xmax: 106.8488 ymax: -6.510802 ## Geodetic CRS: WGS 84 ## Shape_Leng Shape_Area ADM3_EN ADM3_PCODE ADM3_REF ADM3ALT1EN ## 1 0.3644271 0.0018624008 Bogor Barat ID3271050 &lt;NA&gt; &lt;NA&gt; ## 2 0.3413273 0.0025144096 Bogor Selatan ID3271010 &lt;NA&gt; &lt;NA&gt; ## 3 0.1849809 0.0006540943 Bogor Tengah ID3271040 &lt;NA&gt; &lt;NA&gt; ## 4 0.1943379 0.0008671386 Bogor Timur ID3271020 &lt;NA&gt; &lt;NA&gt; ## 5 0.2430896 0.0015239343 Bogor Utara ID3271030 &lt;NA&gt; &lt;NA&gt; ## 6 0.2357695 0.0017147180 Tanah Sereal ID3271060 &lt;NA&gt; &lt;NA&gt; ## ADM3ALT2EN ADM2_EN ADM2_PCODE ADM1_EN ADM1_PCODE ADM0_EN ADM0_PCODE ## 1 &lt;NA&gt; Kota Bogor ID3271 Jawa Barat ID32 Indonesia ID ## 2 &lt;NA&gt; Kota Bogor ID3271 Jawa Barat ID32 Indonesia ID ## 3 &lt;NA&gt; Kota Bogor ID3271 Jawa Barat ID32 Indonesia ID ## 4 &lt;NA&gt; Kota Bogor ID3271 Jawa Barat ID32 Indonesia ID ## 5 &lt;NA&gt; Kota Bogor ID3271 Jawa Barat ID32 Indonesia ID ## 6 &lt;NA&gt; Kota Bogor ID3271 Jawa Barat ID32 Indonesia ID ## date validOn validTo Kota Kecamatan KodeKemendagri ## 1 2019-12-20 2020-04-01 &lt;NA&gt; Kota Bogor Bogor Barat 32.71.04 ## 2 2019-12-20 2020-04-01 &lt;NA&gt; Kota Bogor Bogor Selatan 32.71.01 ## 3 2019-12-20 2020-04-01 &lt;NA&gt; Kota Bogor Bogor Tengah 32.71.03 ## 4 2019-12-20 2020-04-01 &lt;NA&gt; Kota Bogor Bogor Timur 32.71.02 ## 5 2019-12-20 2020-04-01 &lt;NA&gt; Kota Bogor Bogor Utara 32.71.05 ## 6 2019-12-20 2020-04-01 &lt;NA&gt; Kota Bogor Tanah Sareal 32.71.06 ## JumlahPenduduk LuasWilayah KepadatanPenduduk geometry ## 1 244708 23.08 10603 MULTIPOLYGON (((106.7649 -6... ## 2 208185 31.16 6681 MULTIPOLYGON (((106.7961 -6... ## 3 106359 8.11 13115 MULTIPOLYGON (((106.7885 -6... ## 4 105233 10.75 9789 MULTIPOLYGON (((106.8315 -6... ## 5 192837 18.88 10214 MULTIPOLYGON (((106.8183 -6... ## 6 218135 21.25 10265 MULTIPOLYGON (((106.7822 -6... 6.3.2 Peta Statis Peta statis dapat dibuat menggunakan ggplot2 p &lt;- ggplot() + geom_sf(data=mapBogor, aes(fill=JumlahPenduduk)) p colorPalette = RColorBrewer::brewer.pal(5,&quot;YlGnBu&quot;) legendBreak = c(120,170,230)*1000 yBreak = seq(106.72, 106.86, by=0.04) p + scale_fill_gradientn(colors = colorPalette, breaks = legendBreak, name = &quot;Jumlah Penduduk&quot;) + labs(title = &quot;Jumlah Penduduk Kota Bogor&quot;) + theme(legend.text = element_text(size=7), legend.title = element_text(size=7), axis.text.x = element_text(size = 7), axis.text.y = element_text(size = 7), title = element_text(size=12, face=&#39;bold&#39;)) + scale_x_continuous(breaks = yBreak) 6.3.3 Peta Interaktif Peta statis dapat dibuat menggunakan leaflet # opsional, jika belum terinstal install.packages(&quot;leaflet&quot;) library(leaflet) Berikut perintah-perintah untuk menampilkan jumlah penduduk Kota Bogor dengan peta leaflet. leaflet(): inisiasi peta dengan memanggil fungsi leaflet() addProviderTiles(): menambahkan peta dasar (base map) dengan perintah addPolygons(): menabahkan poligon dengan gradasi warna berdasarkan jumlah penduduk. Pengaturan warna gradasi menggunakan colorNumeric(). Ditambahkan pula opsi label untu menampilkan popup, yang akan muncul ketika pengguna menyorot area tertentu. addLegend(): menambahkan legenda addLayersControl(): menampilkan tombol untuk memilih layer yang akan ditampilkan setView(): mengatur posisi dan zooming default # membuat custom palette warna populationPalette &lt;- colorNumeric( palette = &quot;YlGnBu&quot;, domain = mapBogor$JumlahPenduduk ) # membuat custom popup popupLabel &lt;- paste0( &quot;&lt;b&gt;Kecamatan &quot;, mapBogor$Kecamatan,&quot;&lt;/b&gt;&lt;br/&gt;&quot;, &quot;Jumlah Penduduk (jiwa): &quot;, mapBogor$JumlahPenduduk, &quot;&lt;br/&gt;&quot;, &quot;Luas Wilayah (km2): &quot;, mapBogor$LuasWilayah, &quot;&lt;br/&gt;&quot;, &quot;Kepadatan Penduduk (jiwa/km2): &quot;, mapBogor$KepadatanPenduduk) %&gt;% lapply(htmltools::HTML) # membuat peta leaflet leaflet(mapBogor) %&gt;% addProviderTiles(providers$CartoDB.PositronNoLabels, group = &quot;Light Mode&quot;) %&gt;% addProviderTiles(providers$CartoDB.DarkMatterNoLabels, group = &quot;Dark Mode&quot;) %&gt;% addPolygons(weight = 1, opacity = 1, fillOpacity = 0.9, label = popupLabel, color = ~populationPalette(JumlahPenduduk), highlightOptions = highlightOptions(color = &quot;white&quot;, weight = 2, bringToFront = TRUE) ) %&gt;% addLegend(position = &quot;bottomright&quot;, pal = populationPalette, values = ~JumlahPenduduk, title = &quot;Jumlah\\nPenduduk&quot;, opacity = 1) %&gt;% addLayersControl(position = &#39;topright&#39;, baseGroups = c(&quot;Light Mode&quot;, &quot;Dark Mode&quot;), options = layersControlOptions(collapsed = FALSE)) %&gt;% setView(lat = - 6.595, lng = 106.87, zoom = 12) Jika peta tidak tampil atau terpotong, bisa dilihat di RPubs berikut: https://rpubs.com/nurandi/simple-choropleth-r-leaflet . "],["pembangkitan-bilangan-acak.html", "Bagian 7 Pembangkitan Bilangan Acak 7.1 Fungsi Peluang Suatu Sebaran 7.2 Teknik Pembangkitan Bilangan Acak 7.3 Membangkitkan Bilangan Acak untuk Regresi", " Bagian 7 Pembangkitan Bilangan Acak Simulasi atau pembangkitan bilangan adalah salah satu topik penting dalam statistika maupun bidang lain. Sangat sering kita ingin menerapkan prosedur statistika yang memerlukan pembangkitan atau pengambilan contoh angka acak. 7.1 Fungsi Peluang Suatu Sebaran R dilengkapi dengan sekumpulan fungsi untuk membangkitkan bilangan acak yang memungkinkan kita untuk mensimulasikan sebaran peluang yang umum digunakan seperti Normal, Poisson, dan binomial dan lain-lain. Beberapa contoh fungsi untuk membangkitkan data yang berasal dari sebaran tertentu antara lain (Peng 2020): rnorm: menghasilkan angka acak dengan rata-rata dan simpangan baku yang diberikan dnorm: mengevaluasi kepekatan peluang normal (dengan rata-rata dan simpangan baku yang diberikan) pada suatu titik (atau vektor titik) pnorm: mengevaluasi fungsi sebaran kumulatif untuk sebaran Normal rpois: menghasilkan anka acak yang menyebar Poisson dengan tingkat tertentu Dalam R, fungsi yang berhubungan dengan simulasi mengenai sebaran disusun dengan format &lt;awalan&gt;&lt;sebaran&gt;. &lt;awalan&gt; berupa satu huruf sebagai berikut: d untuk kepekatan peluang r untuk membangkitkan peubah acak p untuk sebaran kumulatif q untuk fungsi quantile atau inverse Sedangkan &lt;sebaran&gt; adalah nama sebaran (atau singkatannya) seperti norm, pois, unif dan lain lain. Selengkapnya di tabel berikut Distribution R name Arguments beta beta shape1, shape2, ncp binomial binom size, prob Chauchy cauchy location, scale chi-squared chisq df, ncp exponential exp rate F f df1, df2, ncp gamma gamma shape, scale geometric geom prob hypergeometric hyper m, n, k log-normal lnorm meanlog, sdlog uniform unif min, max neg binomial nbinom size, prob normal norm mean, sd Poisson pois lambda Students t t df, ncp 7.2 Teknik Pembangkitan Bilangan Acak Teknik umum dalam pembangkitan bilangan acak antara lain 1. Inverse-transform method 2. Acceptance-rejection method 3. Direct Transformation 7.2.1 The Inverse Transform Method Untuk membangkitkan contoh acak \\(X\\) dengan sebaran tertentu: Tentukan fungsi sebaran kumulatif \\(F(x)\\) dari sebaran yang diinginkan Hitung inverse dari \\(F\\) atau \\(F^{-1}(x)\\) Bangkitkan contoh acak \\(u_1, u_2, u_3, ..., u_n\\) yang menyebar \\(Seragam(0,1)\\) Hitung \\(x_1 = F^{-1}(u_1)\\), \\(x_2 = F^{-1}(u_2)\\), \\(x_3 = F^{-1}(u_3)\\), , \\(x_n = F^{-1}(u_n)\\) \\(x_1, x_2, x_3\\) merupakan contoh acak yang saling bebas dari peubah acak \\(X\\). Contoh membangkitkan sebaran eksponensial. Misal \\(X \\sim Eksponensial(\\lambda)\\) Fungsi sebaran kumulatif \\[ F(X) = 1 - e^{-{\\lambda}x}; \\quad x \\ge 0 \\] Fungsi inverse \\[ \\begin{aligned} 1 - e^{-{\\lambda}x} &amp;= u \\\\ e^{-{\\lambda}x} &amp;= 1 - u \\\\ {-{\\lambda}x} &amp;= ln(1-u) \\\\ x &amp;= -\\frac{1}{\\lambda}ln(1-u) \\\\ \\end{aligned} \\] Sehingga, \\(F^{-1}(u) = -ln(1-u)/\\lambda\\) Bangkitkan contoh acak \\(Seragam(0,1)\\) Terapkan fungsi inverse untuk contoh acak yang telah dibangkitkan tersebut 7.2.1.1 Contoh 1 inv.exp &lt;- function(u, lambda){ -log(1-u)/lambda } rand.exp &lt;- function(n = 1, lambda = 1){ u &lt;- runif(n) x &lt;- inv.exp(u, lambda) return(x) } set.seed(123) rand.exp(n = 10, lambda = 2) ## [1] 0.16954209 0.77630468 0.26295011 1.07286505 1.41061464 0.02331342 ## [7] 0.37549990 1.11475582 0.40085086 0.30496835 set.seed(123) X &lt;- rand.exp(n = 1000, lambda = 2) hist(X, freq=F, breaks =20, xlab=&#39;X&#39;, main=&#39;Contoh Acak Eksponensial&#39;) curve(dexp(x, rate=2) , 0, 3, lwd=2, xlab = &quot;&quot;, ylab = &quot;&quot;, add = T) 7.2.1.2 Contoh 2 Bangkitkan contoh acak dengan sebaran yang mempunyai fungsi kepekatan peluang \\[ f(x) = 3x^2, \\quad 0 &lt; x &lt; 1 \\] Fungsi sebaran kumulatif \\[ F(x) = \\int_0^x f_x(t)\\,dt = x^3 \\] Sehingga diperoleh fungsi inverse \\(F^{-1}(u) = u^{1/3}\\) # http://www.di.fc.ul.pt/~jpn/r/ECS/index.html inv.f &lt;- function(u){ u^(1/3) } inv.transform &lt;- function(n = 1, inv.f){ u &lt;- runif(n) x &lt;- inv.f(u) return(x) } set.seed(123) X &lt;- inv.transform(n = 10000, inv.f) hist(X, freq=F, breaks =20, main=&quot;f(x)=&quot; ~3*x^2~&quot;. Sample vs Density&quot;) curve(3*x^2, 0, 1, lwd=2, xlab = &quot;&quot;, ylab = &quot;&quot;, add = T, col=&quot;red&quot;) Referensi: (Bonakdarpour 2016) dan (Leonelli 2021) 7.2.2 Acceptance-Rejection Method Algoritma untuk membangkitkan peubah acak \\(X \\sim f(x)\\) di mana \\(0 &lt; x &lt; x_1\\) (dari responsi): Bangkitkan \\(x \\sim U(x_0, x_1)\\) Tentukan \\(c\\) sehingga \\(f(x) \\le c\\) untuk \\(0 &lt; x &lt; x_1\\) Bangkitkan \\(y_1 \\sim U(0, c)\\) Tentukan \\(y_2 = f(x)\\) Jika \\(y_1 \\le y_2\\), terima \\(x\\) 7.2.2.1 Latihan 1 (Responsi) Bangkitkan bilangan acak yang memiliki fkp \\(f_Y(y) = 3y^2; \\quad 0 &lt; y &lt; 1\\) dengan menggunakan *acceptance-rejection method ar &lt;- function(n,x0,x1,f) { xx &lt;- seq(x0,x1,length=10000) c &lt;- max(f(xx)) terima &lt;- 0; iterasi &lt;- 0 hasil &lt;- numeric(n) while(terima&lt;n) { x &lt;- runif(1,x0,x1) y1&lt;- runif(1,0,c) y2&lt;- f(x) if(y1&lt;=y2) { terima &lt;- terima+1 hasil[terima]&lt;-x } iterasi &lt;- iterasi+1 } list(hasil=hasil,iterasi=iterasi) } set.seed(10) f &lt;- function(x) {3*x^2} yyy &lt;- ar(100,0,1,f) par(mfrow=c(1,1)) hist(yyy$hasil, main=&quot;f(x)=&quot;~3*x^2~&quot; Sample vs Density&quot;, prob=T) x &lt;- seq(0, 1, 0.01) lines(x, f(x), lwd=2, col=&quot;red&quot;) 7.2.2.2 Contoh 2 Algoritma Carilah peubah acak \\(Y \\sim g\\) sehingga \\(f(t)/g(t) \\le c\\) untuk semua \\(t\\) di mana \\(f(t) &gt; 0\\) Bangkitkan bilangan acak \\(y\\) dari sebaran dengan fungsi kepekatan/masa peluang \\(g\\) Bangkitkan bilangan acak \\(u\\) dari sebaran \\(Seragam(0,1)\\) Jika \\(u &lt; f(y)/(c.g(y))\\), terima \\(y\\) sebagai bilangan acak, selainnya tolak \\(y\\) dan ulangi langkah 2-4 Bangkitkan peubah acak yang menyebar \\(Beta(2,2)\\) # http://www.di.fc.ul.pt/~jpn/r/ECS/index.html accept.reject &lt;- function(f, c, g, rg, n) { n.accepts &lt;- 0 result.sample &lt;- rep(NA, n) while (n.accepts &lt; n) { y &lt;- rg(1) # step 1 u &lt;- runif(1,0,1) # step 2 if (u &lt; f(y)/(c*g(y))) { # step 3 (accept) n.accepts &lt;- n.accepts+1 result.sample[n.accepts] = y } } result.sample } f &lt;- function(x) 6*x*(1-x) # pdf of Beta(2,2), maximum density is 1.5 g &lt;- function(x) x/x # g(x) = 1 but in vectorized version rg &lt;- function(n) runif(n,0,1) # uniform, in this case c &lt;- 2 # c=2 since f(x) &lt;= 2 g(x) vals &lt;- accept.reject(f, c, g, rg, 10000) hist(vals, breaks=30, freq=FALSE, main=&quot;Beta(2,2). Sample vs true Density&quot;) xs &lt;- seq(0, 1, len=100) lines(xs, dbeta(xs,2,2), col=&quot;red&quot;, lwd=2) 7.2.2.3 Contoh 3 Membuat sebaran segitiga # triangle function f &lt;- function(x){ ifelse((0 &lt; x) &amp; (x &lt; 1), x, ifelse((1 &lt;= x) &amp; (x &lt; 2), 2 - x, 0)) } g &lt;- function(x) x/x # g(x) = 1 but in vectorized version rg &lt;- function(n) runif(n, 0, 2) # uniform, in this case. limit x from 0 to 2 c &lt;- 2 # c=2 since f(x) &lt;= 2 g(x) vals &lt;- accept.reject(f, c, g, rg, 10000) # Checking if it went well hist(vals, breaks=30, freq=FALSE, main=&quot;Sample vs true Density&quot;) xs &lt;- seq(0, 2, len=100) lines(xs, f(xs), col=&quot;red&quot;, lwd=2) Dengan cara lain: # https://users.phhp.ufl.edu/rlp176/Courses/PHC6089/R_notes/simulations.html triangle.pdf = function(x){ ifelse((0 &lt; x) &amp; (x &lt; 1), x, ifelse((1 &lt;= x) &amp; (x &lt; 2), 2 - x, 0)) } accept_reject = function(fx, n = 100) { #simulates a sample of size n from the pdf fx using the accept reject algorithm x = numeric(n) count = 0 while(count &lt; n) { temp &lt;- runif(1, 0, 2) y &lt;- runif(1, 0, 2) if (y &lt; fx(temp)) { count = count + 1 x[count] &lt;- temp } } return(x) } data.sample = accept_reject(triangle.pdf, 10000) hist(data.sample, breaks=30, freq=FALSE, main=&quot;Segitiga. Sample vs True Density&quot;) xs = seq(-0.5, 2.5, by = 0.01) lines(xs, triangle.pdf(xs), col=&quot;red&quot;, lwd=2) Referensi: (Neto 2014) 7.2.2.4 Contoh 4 Misalnya akan dibangkitkan bilangan acak dengan fungsi kepekatan peluang \\[ f(x) = \\frac{3}{2}x^3 + \\frac{11}{8}x^2 + \\frac{1}{6}x + \\frac{1}{12}; \\quad 0 \\le x \\le 1 \\] f &lt;- function(x) (3/2)*(x^3)+(11/8)*(x^2)+(1/6)*(x)+(1/12) g &lt;- function(x) x/x # g(x) = 1 rg &lt;- function(n) runif(n, 0, 1) # uniform, in this case c &lt;- 4 # vals &lt;- accept.reject(f, c, g, rg, 10000) hist(vals, breaks=30, freq=FALSE, main=&quot;Beta(2,2). Sample vs true Density&quot;) xs &lt;- seq(0, 1, len=100) lines(xs, f(xs), col=&quot;red&quot;, lwd=2) 7.3 Membangkitkan Bilangan Acak untuk Regresi 7.3.0.1 Contoh 1 Bangkitkan bilangan acak untuk membangun persamaan regresi linier sederhana antara \\(X\\) terhadap \\(Y\\), dengan \\(b_0 = 1, b_1 = 1\\). b0 &lt;- 1 b1 &lt;- 1 b0hat &lt;- NULL b1hat &lt;- NULL for (i in 1:100) { eps &lt;- rnorm (10) X &lt;- runif (10 ,5 ,10) Y &lt;- b0 + b1*X + eps obj &lt;- lm(Y~X) b0hat &lt;- c(b0hat, obj$coefficients[1]) b1hat &lt;- c(b1hat, obj$coefficients[2]) } hasil &lt;- matrix (c(mean(b0hat), sd(b0hat), mean(b1hat) , sd(b1hat)), nrow =2, ncol =2) rownames(hasil) &lt;- c(&quot;mean&quot;,&quot;sd&quot;) colnames(hasil) &lt;- c(&quot;b0&quot;, &quot;b1&quot;) hasil ## b0 b1 ## mean 1.025390 0.9963052 ## sd 1.712748 0.2302015 7.3.0.2 Contoh 2 Bangkitkan bilangan acak untuk membangun persamaan regresi linier berganda antara \\(X_1\\) dan \\(X_2\\) terhadap \\(Y\\), sehingga diperoleh \\(b_0 = 10, b_1 = 2.3, b_2 = 0.7\\). set.seed(123) X1 &lt;- runif(25,10,25) X2 &lt;- runif(25,90,200) Y &lt;- 10 + 2.3*X1 + 0.7*X2 + rnorm(25,0,1) model &lt;- lm(Y~X1+X2) summary(model) ## ## Call: ## lm(formula = Y ~ X1 + X2) ## ## Residuals: ## Min 1Q Median 3Q Max ## -1.64768 -0.51104 -0.05084 0.56224 2.28118 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 8.819021 1.489143 5.922 0.00000584 *** ## X1 2.347724 0.045223 51.914 &lt; 0.0000000000000002 *** ## X2 0.702732 0.006784 103.594 &lt; 0.0000000000000002 *** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 0.9363 on 22 degrees of freedom ## Multiple R-squared: 0.998, Adjusted R-squared: 0.9978 ## F-statistic: 5509 on 2 and 22 DF, p-value: &lt; 0.00000000000000022 7.3.0.3 Contoh 3 Bangkitkan bilangan acak untuk membangun persamaan regresi linier berganda antara \\(X_1\\) dan \\(X_2\\) terhadap \\(Y\\), sehingga diperoleh \\(b_0 = 1, b_1 = 1, b_2 = 1\\). library(MASS) b0 &lt;- 1 b1 &lt;- 1 b2 &lt;- 1 b0hat &lt;- NULL b1hat &lt;- NULL b2hat &lt;- NULL Sigma &lt;- matrix(c(1 ,0.9 ,0.9 ,1), nrow =2 , ncol =2) mu &lt;- c(1 ,1) for ( i in 1:100) { eps &lt;- rnorm (10) X &lt;- mvrnorm (10, mu, Sigma ) Y &lt;- b0 + b1*X [,1] * b2*X [,2] + eps obj &lt;- lm( Y~X ) b0hat &lt;- c(b0hat, obj$coefficients[1]) b1hat &lt;- c(b1hat, obj$coefficients[2]) b2hat &lt;- c(b2hat, obj$coefficients[3]) } hasil&lt;- matrix(c(mean(b0hat), sd(b0hat), mean(b1hat), sd(b1hat), mean(b2hat), sd(b2hat)), nrow=2, ncol=3) rownames(hasil) &lt;- c(&quot;mean&quot;,&quot;sd&quot;) colnames(hasil) &lt;- c(&quot;b0&quot;, &quot;b1&quot;, &quot;b2&quot;) hasil ## b0 b1 b2 ## mean 0.6721352 0.8529024 1.138359 ## sd 1.2919187 1.5528197 1.597078 7.3.0.4 Contoh 4 Dari tugas kelompok Bangkitkan peubah \\(X_1\\), \\(X_2\\), \\(X_3\\) sebanyak 1.000 amatan berdasarkan model regresi linear berganda berikut ini: \\[ Y = 10 + 3X_1 + 5X_2 + 7X_3 + \\varepsilon \\] dengan mengasumsikan bahwa \\(\\varepsilon \\sim N(\\mu = 0, \\sigma^2 = 30)\\) dan antara peubah bebas terjadi multikolinearitas Terdapat beberapa tahapan dalam melakukan pembangkitan data: Mendefinisikan model regresi linier \\(Y = 10 + 3X_1 + 5X_2 + 7X_3 + \\varepsilon\\) Membuat matriks ragam peragam yang menunjukan korlasi antar peubah \\(X\\), di mana dalam simulasi ini nilai korelasi antar peubah adalah adalah 0.95 (korelasi tinggi sehingga terjadi multikolinearitas) Membangkitkan data sisaan \\(\\varepsilon\\) sebanyak 1.000 dengan mengasumsikan bahwa \\(\\varepsilon \\sim N(\\mu = 0, \\sigma^2 = 30)\\) Menentukan nilai tengah peubah bebas sebesar 1 Membangkitkan peubah \\(X\\) dan menghitung peubah \\(y\\) # membuat fungsi untuk membangkitkan bilangan acak multivariate normal # dengan korelasi tertentu rmvn.eigen &lt;- function(n, mu, Sigma) { d &lt;- length(mu) ev &lt;- eigen(Sigma, symmetric = TRUE) lambda &lt;- ev$values V &lt;- ev$vectors R &lt;- V %*% diag(sqrt(lambda)) %*% t(V) Z &lt;- matrix(rnorm(n*d), nrow = n, ncol = d) x &lt;- Z %*% R + matrix(mu,n,d, byrow = T) return(x) } # jumlah pengamatan n &lt;- 1000 # rataan peubah penjelas mu &lt;- c(0,0,0) # matriks ragam-peragam Sigma &lt;- matrix(c(1, 0.95, 0.95, 0.95, 1 , 0.95, 0.95, 0.95, 1 ), nrow = 3, ncol = 3) # membangkitkan bilangan (X dan sisaan) set.seed(5555) x &lt;- rmvn.eigen(n, mu, Sigma) eps &lt;- rnorm(n,0,sqrt(30)) colnames(x) &lt;- paste0(&quot;X&quot;, seq(length(mu))) # menentukan beta, dan membangkitkan Y beta &lt;- c(b0 = 10, b1 = 3, b2 = 5, b3 = 7) y &lt;- round(beta[1] + (x %*% beta[-1]) + eps, 4) Periksa hasil # matriks korelasi cor(x) ## X1 X2 X3 ## X1 1.0000000 0.9519284 0.9474503 ## X2 0.9519284 1.0000000 0.9487071 ## X3 0.9474503 0.9487071 1.0000000 dataRegresi &lt;- data.frame(y, x) # analisis regresi reg &lt;- lm(y ~., data = dataRegresi) reg ## ## Call: ## lm(formula = y ~ ., data = dataRegresi) ## ## Coefficients: ## (Intercept) X1 X2 X3 ## 10.353 2.826 4.412 7.831 "],["pengembangan-fungsi.html", "Bagian 8 Pengembangan Fungsi 8.1 Membuat Fungsi 8.2 Object Oriented Programming 8.3 Object : Class System S3 8.4 Object : Class System S4", " Bagian 8 Pengembangan Fungsi Fungsi (function) adalah kode-kode yang disusun untuk melakukan tugas tertentu, seperti perhitungan matematis, pembacaan data, analisis statistik, dan lainnya 8.1 Membuat Fungsi Struktur fungsi adalah myfunction &lt;- function(arg1, arg2,  ){ statements return(object) } Fungsi 1 dengan output hanya nilai z saja. angka_acak1 = function(n,pw) { x=runif(n) y=runif(n) z=(x+y)^pw return(z) } # menggunakan fungsi angka_acak1(10,2) ## [1] 3.2322800 0.6242086 0.3326876 0.5492360 1.0590209 1.1219177 0.7870891 ## [8] 1.3319721 1.4719276 0.0555511 Fungsi 2 dengan output berupa nilai x, y, dan z. # Membuat fungsi angka_acak2 = function(n,pw) { x = runif(n) y = runif(n) z = (x+y)^pw return(list(x=x,y=y,z=z)) } # Menggunakan fungsi angka_acak2(10,2) ## $x ## [1] 0.13004849 0.97871535 0.06772972 0.65846763 0.82405551 0.28659556 ## [7] 0.25492677 0.69414124 0.02902345 0.52910248 ## ## $y ## [1] 0.9110802 0.9665378 0.3187146 0.4496721 0.9357783 0.4232877 0.5029422 ## [8] 0.1356157 0.3556640 0.5645224 ## ## $z ## [1] 1.0839489 3.7840098 0.1493392 1.2279736 3.0970152 0.5039343 0.5743654 ## [8] 0.6884966 0.1479844 1.1960153 Fungsi 3 dengan memberikan nilai default pada argumen berupa n = 1 dan pw = 2, sehingga ketika fungsi tersebut dipanggil tanpa menuliskan argumen, akan dijalankan fungsi defaultnya. angka_acak3 = function(n=10,pw=2) { x = runif(n) y = runif(n) z = (x+y)^pw return(z) } angka_acak3() ## [1] 3.1055386 1.0626201 0.2837552 0.4773961 0.2354465 0.6206851 2.8971498 ## [8] 1.2952584 2.3422619 0.4302200 Fungsi 4 dituliskan tanpa menggunakan argumen. Ketika fungsi tersebut akan digunakan maka dilakukan assign nilai yang diperlukan di dalam fungsi tersebut. angka_acak4 = function() { x = runif(n) y = runif(n) z = (x+y)^pw return(z) } n &lt;- 5; pw &lt;- 3 angka_acak4() ## [1] 0.544510060 1.069862964 0.339701179 3.082262400 0.007045662 Latihan 1 Menghitung median dari suatu vektor med &lt;- function(vect) { n &lt;- length(vect) vects &lt;- sort(vect) if(n%%2 == 1) { m &lt;- vects[(n+1)/2] } else { m &lt;- (vects[n/2]+vects[(n/2)+1])/2 } return(m) } x1 &lt;- c(1,5,3,7,3,4,2,7) med(x1) ## [1] 3.5 Latihan 2 Menghitung modus dari suatu vektor modus &lt;- function(vect) { v &lt;- unique(vect) f &lt;- NULL for(i in v) { byk &lt;- sum(vect==i) f &lt;- c(f,byk) } fmax &lt;- max(f) vf &lt;- cbind(v,f) mode &lt;- vf[f==fmax,] return(mode) } modus(x1) ## v f ## [1,] 3 2 ## [2,] 7 2 Latihan 3 menduga parameter pada regresi berganda # Membuat fungsi p.est &lt;- function(A) { if(!is.matrix(A)) stop(&quot;input must be on matrix&quot;) x1&lt;-A[,-1] y &lt;-A[,1] one&lt;-rep(1,nrow(A)) x &lt;-cbind(one,x1) colnames(x)&lt;-paste(&quot;x&quot;,1:ncol(x),sep=&quot;&quot;) b.est&lt;-as.vector(solve(t(x) %*% x) %*% (t(x) %*% y)) names(b.est)&lt;-paste(&quot;b&quot;,0:(length(b.est)-1),sep=&quot;&quot;) fitted.value&lt;-as.vector(x%*%b.est) error&lt;-as.vector(y-fitted.value) names(fitted.value)&lt;-names(error)&lt;-1:nrow(A) list(beta.est=b.est,fit.val=fitted.value,error=error) } # Memasukkan data Pendapatan&lt;-c(3.5,3.2,3.0,2.9,4.0,2.5,2.3) Biaya.Iklan&lt;-c(3.1,3.4,3.0,3.2,3.9,2.8,2.2) Jumlah.Warung&lt;-c(30,25,20,30,40,25,30) X&lt;-cbind(Pendapatan,Biaya.Iklan,Jumlah.Warung) p.est(X) ## $beta.est ## b0 b1 b2 ## -0.21381852 0.89843390 0.01745279 ## ## $fit.val ## 1 2 3 4 5 6 7 ## 3.094910 3.277176 2.830539 3.184754 3.988185 2.738116 2.286320 ## ## $error ## 1 2 3 4 5 6 ## 0.40508982 -0.07717642 0.16946108 -0.28475357 0.01181483 -0.23811608 ## 7 ## 0.01368033 8.2 Object Oriented Programming Pemrograman berorientasi objek merupakan sebuah paradigma dalam pembuatan sebuah program. OOP menitikberatkan pada identifikasi objek-objek yang terlibat dalam sebuah program dan bagaimana objek-objek tersebut berinterakasi. Pada OOP, program yang dibangun akan dibagi-bagi menjadi objek-objek. OOP menyediakan class dan object sebagai alat dasar untuk meminimalisir dan mengatur kompleksitas dari program. 8.2.1 Class (kelas) Merupakan definisi statik (kerangka dasar) dari objek yang akan diciptakan. Suatu class dibagi menjadi: Property : data atau state yang dimiliki oleh class. Contoh pada class Mobil, memiliki property: warna, Model, Produsen. Method : behavior (perilaku) sebuah class. Bisa dikatakan sebagai aksi atau tindakan yang bisa dilakukan oleh suatu class. Contoh pada class Mobil, memiliki method: Start, Stop, Change Gear, Turn. 8.2.2 Object Objek adalah komponen yang diciptakan dari class (instance of class). Satu class bisa menghasilkan banyak objek. Proses untuk membuat sebuah objek disebut instantiation. Setiap objek memiliki karakteristik dan fitur masing masing. Objek memiliki siklus creation, manipulation, dan destruction. Prinsip dasar dari OOP adalah abstraksi, enkapsulasi, inherintance (pewarisan), dan polymorphism. 8.2.3 OOP in R R telah mengimplementasikan pemrograman berorientasi objek. Semua dalam R adalah objek. Pengembangan awal objek di R menggunakan Class System S3 yang tidak terlalu ketat. Pendefinisian yang ketat secara formal, R menggunakan Class System S4. Ilustrasi: Sebuah class coords dirancang untuk digunakan dengan menyimpan data koordinat titik pada dua buah vektor X dan Y. Metode pada class ini terdiri dari metode print, length, bbox, dan plot. Class lain dirancang sebagai turunan dari class coords dengan menambahkan data nilai untuk setiap titik pada koordinat X dan Y. Metode pada class vcoords merupakan pewarisan dari class coords dan operasi-operasi aritmetik terhadap nilainya. 8.3 Object : Class System S3 Contoh # List creation with its attributes x and y. pts &lt;- list(x = round(rnorm(5),2), y = round(rnorm(5),2)) class(pts) ## [1] &quot;list&quot; Menjadikan pts sebagai class baru: class(pts) &lt;- &quot;coords&quot; class(pts) ## [1] &quot;coords&quot; pts ## $x ## [1] -1.06 -0.70 0.93 0.07 1.64 ## ## $y ## [1] -0.43 -0.45 1.30 -0.28 -0.09 ## ## attr(,&quot;class&quot;) ## [1] &quot;coords&quot; 8.3.1 Konstruktor Fungsi Konstruktor untuk Membuat class coords coords &lt;- function(x, y) { if (!is.numeric(x) || !is.numeric(y) || !all(is.finite(x)) || !all(is.finite(y))) stop(&quot;Titik koordinat tidak tepat!&quot;) if (length(x) != length(y)) stop(&quot;Panjang koordinat berbeda&quot;) pts &lt;- list(x = x, y = y) class(pts) = &quot;coords&quot; pts } pts &lt;- coords(x = round(rnorm(5), 2), y = round(rnorm(5), 2)) pts ## $x ## [1] -0.84 -0.63 0.25 -0.91 0.97 ## ## $y ## [1] -1.20 0.71 1.09 1.53 -1.06 ## ## attr(,&quot;class&quot;) ## [1] &quot;coords&quot; Fungsi Konstruktor untuk Membuat class mobil # Membuat list Mobil1 Mobil1 &lt;- list(Nama=&quot;Toyota&quot;, Panjang=3.5, Lebar=2, Kecepatan=180) class(Mobil1) ## [1] &quot;list&quot; Mobil &lt;- function(Nama, Panjang, Lebar, Kecepatan) { if(Panjang&lt;2 || Lebar&lt;1.5 || Kecepatan&lt;80) stop(&quot;atribut tidak sesuai&quot;) Mobil &lt;- list(Nama = Nama, Panjang =Panjang, Lebar = Lebar, Kecepatan = Kecepatan) class(Mobil) &lt;- &quot;mobil&quot; Mobil } Mobil3 &lt;- Mobil(&quot;Daihatsu&quot;, 2.1, 1.9, 120) Mobil3 ## $Nama ## [1] &quot;Daihatsu&quot; ## ## $Panjang ## [1] 2.1 ## ## $Lebar ## [1] 1.9 ## ## $Kecepatan ## [1] 120 ## ## attr(,&quot;class&quot;) ## [1] &quot;mobil&quot; 8.3.2 Aksesor Akses pada class coord dengan menggunakan 2 fungsi xcoords &lt;- function(obj) obj$x ycoords &lt;- function(obj) obj$y xcoords(pts) ## [1] -0.84 -0.63 0.25 -0.91 0.97 ycoords(pts) ## [1] -1.20 0.71 1.09 1.53 -1.06 Akses pada class mobil menggunakan fungsi aksesor nama &lt;- function(objek) objek$Nama kecepatan &lt;- function(objek) objek$Kecepatan panjang &lt;- function(objek) objek$Panjang lebar&lt;- function(objek) objek$Lebar nama(Mobil1) ## [1] &quot;Toyota&quot; kecepatan(Mobil3) ## [1] 120 panjang(Mobil3) ## [1] 2.1 8.3.3 Fungsi Generik Fungsi generik bertindak untuk beralih memilih fungsi tertentu atau metode tertentu yang dijalankan sesuai dengan class-nya. Untuk mendefinisi ulang suatu fungsi generik digunakan syntax method.class &lt;-function() ekspresibaru 8.3.3.1 Print Untuk class coords print.coords &lt;- function(obj) { print(paste(&quot;(&quot;, format(xcoords(obj)), &quot;, &quot;, format(ycoords(obj)), &quot;)&quot;, sep = &quot;&quot;), quote = FALSE) } pts ## [1] (-0.84, -1.20) (-0.63, 0.71) ( 0.25, 1.09) (-0.91, 1.53) ( 0.97, -1.06) Untuk class mobil print.mobil &lt;- function(objek) { print(cat(&quot;Nama : &quot;, nama(objek), &quot;\\n&quot;, &quot;Kecepatan : &quot;, kecepatan(objek), sep=&quot;&quot;, &quot;\\n&quot;, &quot;Panjang:&quot;, panjang(objek), &quot;\\n&quot;, &quot;Lebar:&quot;, lebar(objek), &quot;\\n&quot;) ) } print.mobil(Mobil1) ## Nama : Toyota ## Kecepatan : 180 ## Panjang:3.5 ## Lebar:2 ## NULL 8.3.3.2 Length length(pts) ## [1] 2 Definisi ulang length.coords &lt;- function(obj) length(xcoords(obj)) length(pts) ## [1] 5 8.3.4 Membuat Fungsi Generik Baru Misal ingin membuat method bbox yang merupakan boundary box bbox &lt;- function (obj) UseMethod (&quot;bbox&quot;) #menjadikan bbox sebagai fungsi generik bbox.coords &lt;- function (obj){ matrix (c(range (xcoords(obj)), range (ycoords(obj))), nc=2, dimnames = list ( c(&quot;min&quot;, &quot;max&quot;), c(&quot;x:&quot;, &quot;y:&quot;))) } bbox(pts) ## x: y: ## min -0.91 -1.20 ## max 0.97 1.53 Plot khusus untuk class coords plot.coords &lt;- function (obj,bbox=FALSE,...){ if (bbox){ plot (xcoords(obj),ycoords(obj),...); x &lt;- c(bbox(obj)[1],bbox(obj)[2],bbox(obj)[2],bbox(obj)[1]); y &lt;- c(bbox(obj)[3],bbox(obj)[3],bbox(obj)[4],bbox(obj)[4]); polygon (x,y) } else { plot (xcoords(obj),ycoords(obj),...) } } plot(pts) plot(pts, bbox=T, pch=19, col=&quot;red&quot;) 8.3.5 Pewarisan class Sebagai ilustrasi jika diinginkan sebuah objek yang berisi lokasi (coords) dan terdapat nilai pada lokasi tersebut maka diperlukan class baru vcoords sebagai turunan dari coords Konstruktor untuk class vcoords vcoords &lt;- function(x, y, v) { if (!is.numeric(x) || !is.numeric(y) || !is.numeric(v) || !all(is.finite(x)) || !all(is.finite(y))) stop(&quot;Titik koordinat tidak tepat !&quot;) if (length(x) != length(y) || length(x) != length(v)) stop(&quot;Panjang koordinat berbeda &quot;) pts &lt;- list(x = x, y = y, v = v) class(pts) = c(&quot;vcoords&quot;, &quot;coords&quot;) pts } nilai &lt;- function(obj) obj$v vpts &lt;- vcoords(x = round(rnorm(5), 2), y = round(rnorm(5), 2), v = round(runif(5, 0, 100))) vpts ## [1] (-0.94, -0.65) ( 0.68, 1.52) ( 0.77, -1.20) ( 0.14, -1.02) ( 0.74, -1.14) xcoords(vpts) ## [1] -0.94 0.68 0.77 0.14 0.74 ycoords(vpts) ## [1] -0.65 1.52 -1.20 -1.02 -1.14 bbox(vpts) ## x: y: ## min -0.94 -1.20 ## max 0.77 1.52 Pendefinisian ulang method print print.vcoords &lt;- function(obj) { print(paste(&quot;(&quot;, format(xcoords(obj)), &quot;, &quot;, format(ycoords(obj)), &quot;; &quot;, format(nilai(obj)), &quot;)&quot;, sep = &quot;&quot;), quote = FALSE) } vpts ## [1] (-0.94, -0.65; 98) ( 0.68, 1.52; 57) ( 0.77, -1.20; 11) ( 0.14, -1.02; 40) ## [5] ( 0.74, -1.14; 33) Pendefinisian ulang method plot plot.vcoords &lt;- function(obj, txt = FALSE, bbox = FALSE, ...) { if (bbox) { if (!txt) { plot(xcoords(obj), ycoords(obj), ...) } else { plot(xcoords(obj), ycoords(obj), type = &quot;n&quot;, ...) text(xcoords(obj), ycoords(obj), nilai(obj), ...) } x &lt;- c(bbox(pts)[1], bbox(pts)[2], bbox(pts)[2], bbox(pts)[1]) y &lt;- c(bbox(pts)[3], bbox(pts)[3], bbox(pts)[4], bbox(pts)[4]) polygon(x, y) } else { if (!txt) { plot(xcoords(obj), ycoords(obj), ...) } else { plot(xcoords(obj), ycoords(obj), type = &quot;n&quot;, ...) text(xcoords(obj), ycoords(obj), nilai(obj), ...) } } } Menampilkan plot plot(vpts) plot(vpts, txt = T, bbox = T, col = &quot;red&quot;) Subseting `[.vcoords` &lt;- function(x, i) { vcoords(xcoords(x)[i], ycoords(x)[i], nilai(x)[i]) } vpts[1:3] ## [1] (-0.94, -0.65; 98) ( 0.68, 1.52; 57) ( 0.77, -1.20; 11) 8.3.6 Pemeriksaan suatu class objek inherits(pts, &quot; coords &quot;) ## [1] FALSE inherits(pts, &quot; vcoords &quot;) ## [1] FALSE inherits(vpts, &quot; coords &quot;) ## [1] FALSE inherits(vpts, &quot; vcoords &quot;) ## [1] FALSE model &lt;- list(1:10) class(model) &lt;- &quot;lm&quot; model ## ## Call: ## NULL ## ## No coefficients 8.4 Object : Class System S4 Class System S4 mengatasi masalah dalam Class System S3 dengan sistem objek lebih formal. Sebuah class terdiri dari slot dengan tipe atau class spesifik. 8.4.1 Deklarasi Class dideklarasikan dengan fungsi setClass Contoh 1, mendefinisikan ulang class coords ke class system S4 setClass(&quot;coords&quot;, representation(x=&quot;numeric&quot;, y=&quot;numeric&quot;)) Contoh 2, deklarasi class car setClass(&quot;car&quot;, representation(Nama=&quot;character&quot;, Panjang=&quot;numeric&quot;, Lebar=&quot;numeric&quot;, Kecepatan=&quot;numeric&quot;)) Car1 &lt;- new(&quot;car&quot;, Nama=&quot;Toyota&quot;, Panjang=3.5, Lebar=2, Kecepatan=180) 8.4.2 Konstruktor Membuat objek coords coords &lt;- function(x, y) { if (length(x) != length(y)) stop(&quot;length x dan y harus bernilai sama&quot;) if (!is.numeric(x) || !is.numeric(y)) stop(&quot;x dan y harus vektor numeric&quot;) new(&quot;coords&quot;, x = as.vector(x), y = as.vector(y)) } set.seed(123) pts &lt;- coords(round(rnorm(5), 2), round(rnorm(5), 2)) pts ## An object of class &quot;coords&quot; ## Slot &quot;x&quot;: ## [1] -0.56 -0.23 1.56 0.07 0.13 ## ## Slot &quot;y&quot;: ## [1] 1.72 0.46 -1.27 -0.69 -0.45 Membuat object car menggunakan fungsi konstruktor car &lt;- function(Nama,Panjang,Lebar,Kecepatan) { if(Panjang&lt;2 || Lebar&lt;1.5 || Kecepatan&lt;80) stop(&quot;atribut tidak sesuai&quot;) new(&quot;car&quot;, Nama=Nama, Panjang=Panjang, Lebar=Lebar, Kecepatan=Kecepatan) } Car2 &lt;- car(&quot;Suzuki&quot;, 2.4, 1.8, 150) class(Car2) ## [1] &quot;car&quot; ## attr(,&quot;package&quot;) ## [1] &quot;.GlobalEnv&quot; class(Mobil1) ## [1] &quot;list&quot; 8.4.3 Aksesor Akses terhadap slot menggunakan operator @ slot(pts, &quot;x&quot;) ## [1] -0.56 -0.23 1.56 0.07 0.13 pts@x ## [1] -0.56 -0.23 1.56 0.07 0.13 slot(pts, &quot;y&quot;) ## [1] 1.72 0.46 -1.27 -0.69 -0.45 pts@y ## [1] 1.72 0.46 -1.27 -0.69 -0.45 Disarankan menggunakan fungsi xcoords &lt;- function(obj) obj@x ycoords &lt;- function(obj) obj@y xcoords(pts) ## [1] -0.56 -0.23 1.56 0.07 0.13 Akses terhadap slot pada objek car Car1@Nama ## [1] &quot;Toyota&quot; Car2@Kecepatan ## [1] 150 Akses terhadap slot pada objek car dengan fungsi aksesor nama1 &lt;- function(objek) objek@Nama kecepatan1 &lt;- function(objek) objek@Kecepatan nama1(Car1) ## [1] &quot;Toyota&quot; kecepatan1(Car2) ## [1] 150 8.4.4 Fungsi generik Penciptaan fungsi generik menggunakan fungsi setMethod. Argumen didefinisikan dalam signature Contoj: show (setara dengan print pada S3) setMethod(show, signature(object = &quot;coords&quot;), function(object) print(paste(&quot;(&quot;, format(xcoords(object)), &quot;, &quot;, format(ycoords(object)), &quot;)&quot;, sep = &quot;&quot;), quote = FALSE)) pts ## [1] (-0.56, 1.72) (-0.23, 0.46) ( 1.56, -1.27) ( 0.07, -0.69) ( 0.13, -0.45) setMethod(show, &quot;car&quot;, function(object) { print(cat(&quot;Nama : &quot;, nama1(object), &quot;\\n&quot;, &quot;Kecepatan : &quot;, kecepatan1(object), sep=&quot;&quot;) )} ) Car2 ## Nama : Suzuki ## Kecepatan : 150NULL 8.4.5 Definisi fungsi generik baru setGeneric(&quot;bbox&quot;, function(obj) standardGeneric(&quot;bbox&quot;)) ## [1] &quot;bbox&quot; setMethod(&quot;bbox&quot;, signature(obj = &quot;coords&quot;), function(obj) matrix(c(range(xcoords(obj)), range(ycoords(obj))), nc = 2, dimnames = list(c(&quot;min&quot;,&quot;max&quot;), c(&quot;x:&quot;, &quot;y:&quot;) ) )) bbox(pts) ## x: y: ## min -0.56 -1.27 ## max 1.56 1.72 8.4.5.1 Fungsi generik plot setMethod(&quot;plot&quot;, signature(x = &quot;coords&quot;), function(x, bbox = FALSE, ...) { if (bbox) { plot(xcoords(x), ycoords(x), ...) x.1 &lt;- c(bbox(x)[1], bbox(x)[2], bbox(x)[2], bbox(x)[1]) y.1 &lt;- c(bbox(x)[3], bbox(x)[3], bbox(x)[4], bbox(x)[4]) polygon(x.1, y.1) } else { plot(xcoords(x), ycoords(x), ...) } }) plot(pts) plot(pts, bbox = T, pch = 19, col = &quot;red&quot;, xlab = &quot;x&quot;, ylab = &quot;y&quot;) 8.4.6 Pewarisan class Akan dibuat class baru yang diturunkan dari coords dengan menambahkan slot nilai setClass(&quot;vcoords&quot;, representation(nilai = &quot;numeric&quot;), contains = &quot;coords&quot;) vcoords &lt;- function(x, y, nilai) { if ((length(x) != length(y)) || (length(x) != length(nilai))) stop(&quot;length x, y, dan nilai harus bernilai sama&quot;) if (!is.numeric(x) || !is.numeric(y) || !is.numeric(nilai)) stop(&quot;x, y, dan nilai harus vektor numeric&quot;) new(&quot;vcoords&quot;, x = as.vector(x), y = as.vector(y), nilai = as.vector(nilai)) } nilai &lt;- function(obj) obj@nilai vpts &lt;- vcoords(xcoords(pts), ycoords(pts), round(100*runif(5))) vpts ## [1] (-0.56, 1.72) (-0.23, 0.46) ( 1.56, -1.27) ( 0.07, -0.69) ( 0.13, -0.45) Definisi ulang method show setMethod(show, signature(object = &quot;vcoords&quot;), function(object) print(paste(&quot;(&quot;, format(xcoords(object)), &quot;, &quot;, format(ycoords(object)), &quot;; &quot;, format(nilai(object)), &quot;)&quot;, sep = &quot;&quot;), quote = FALSE)) vpts ## [1] (-0.56, 1.72; 89) (-0.23, 0.46; 69) ( 1.56, -1.27; 64) ( 0.07, -0.69; 99) ## [5] ( 0.13, -0.45; 66) Definisi ulang method plot setMethod(&quot;plot&quot;, signature(x = &quot;vcoords&quot;), function(x, txt = FALSE, bbox = FALSE, ...) { if (bbox) { if (!txt) { plot(xcoords(x), ycoords(x), ...) } else { plot(xcoords(x), ycoords(x), type = &quot;n&quot;, ...) text(xcoords(x), ycoords(x), nilai(x), ...) } x.1 &lt;- c(bbox(x)[1], bbox(x)[2], bbox(x)[2], bbox(x)[1]) y.1 &lt;- c(bbox(x)[3], bbox(x)[3], bbox(x)[4], bbox(x)[4]) polygon(x.1, y.1) } else { if (!txt) { plot(xcoords(x), ycoords(x), ...) } else { plot(xcoords(x), ycoords(x), type = &quot;n&quot;, ...) text(xcoords(x), ycoords(x), nilai(x), ...) } } }) plot(vpts) plot(vpts, txt = T, bbox = T, pch = 19, col = &quot;red&quot;) 8.4.7 Operasi Aritmetika Menggunakan perintah setMethod(&quot;Arith&quot;, ... sameloc &lt;- function(e1, e2) ( length(nilai(e1)) == length(nilai(e2)) || any(xcoords(e1) == xcoords(e2)) || any(ycoords(e1) == ycoords(e2)) ) setMethod(&quot;Arith&quot;, signature(e1 = &quot;vcoords&quot;, e2 = &quot;vcoords&quot;), function(e1, e2) { if (!sameloc(e1, e2)) stop(&quot;Dibutuhkan titik identik&quot;) vcoords(xcoords(e1), ycoords(e2), callGeneric(nilai(e1), nilai(e2))) }) vpts + vpts ## [1] (-0.56, 1.72; 178) (-0.23, 0.46; 138) ( 1.56, -1.27; 128) ## [4] ( 0.07, -0.69; 198) ( 0.13, -0.45; 132) 2+vpts ## Error in 2 + vpts: non-numeric argument to binary operator setMethod(&quot;Arith&quot;, signature(e1 = &quot;numeric&quot;, e2 = &quot;vcoords&quot;), function(e1, e2) { if (length(e1) &gt; length(nilai(e2))) stop(&quot;length yang tidak benar&quot;) vcoords(xcoords(e2), ycoords(e2), callGeneric(as.vector(e1), nilai(e2))) }) 2*vpts ## [1] (-0.56, 1.72; 178) (-0.23, 0.46; 138) ( 1.56, -1.27; 128) ## [4] ( 0.07, -0.69; 198) ( 0.13, -0.45; 132) vpts*vpts ## [1] (-0.56, 1.72; 7921) (-0.23, 0.46; 4761) ( 1.56, -1.27; 4096) ## [4] ( 0.07, -0.69; 9801) ( 0.13, -0.45; 4356) 8.4.8 Subset setMethod(&quot;[&quot;, signature(x = &quot;vcoords&quot;, i = &quot;ANY&quot;, j = &quot;missing&quot;, drop = &quot;missing&quot;), function(x,i, j) vcoords(xcoords(x)[i], ycoords(x)[i], nilai(x)[i])) vpts[1:3] ## [1] (-0.56, 1.72; 89) (-0.23, 0.46; 69) ( 1.56, -1.27; 64) 8.4.9 Pemeriksaan Suatu Class Objek is(pts ,&quot;coords&quot;) ## [1] TRUE is(pts ,&quot;vcoords&quot;) ## [1] FALSE is(vpts ,&quot;coords&quot;) ## [1] TRUE is(vpts ,&quot;vcoords&quot;) ## [1] TRUE 8.4.10 Coerce vpts2 &lt;- as(vpts, &quot;coords&quot;) vpts2 ## [1] (-0.56, 1.72) (-0.23, 0.46) ( 1.56, -1.27) ( 0.07, -0.69) ( 0.13, -0.45) is(vpts2, &quot;coords&quot;) ## [1] TRUE pts2 &lt;- as(pts , &quot;vcoords&quot;) pts2 ## [1] (-0.56, 1.72; ) (-0.23, 0.46; ) ( 1.56, -1.27; ) ( 0.07, -0.69; ) ## [5] ( 0.13, -0.45; ) is(pts2, &quot;vcoords&quot;) ## [1] TRUE ob &lt;- list(x = round(rnorm(5), 2), y = round(rnorm(5), 2)) ob ## $x ## [1] 0.55 0.24 -1.05 1.29 0.83 ## ## $y ## [1] -0.06 -0.78 -0.73 -0.22 -0.33 as(ob , &quot;vcoords&quot;) ## Error in as(ob, &quot;vcoords&quot;): no method or default for coercing &quot;list&quot; to &quot;vcoords&quot; mdl &lt;- list(123) class(mdl) &lt;- &quot;lm&quot; mdl ## ## Call: ## NULL ## ## No coefficients 8.4.10.1 Latihan Buat fungsi bernama three.M yang digunakan untuk menghitung mean, median, modus dari suatu vector (tanpa menggunakan fungsi mean, quantile atau pun fungsi instan lain yang sudah tersedia sebelumnya di R). Hitung mean, median, dan modus dari suatu data rbinom(100,10, 0.5) dengan seed(123). three.M &lt;- function(vect) { n &lt;- length(vect) # banyak data # rataan jumlah &lt;- sum(vect) rataan &lt;- jumlah/n # median vects &lt;- sort(vect) # urutkan if(n%%2 == 1) {m &lt;- vects[(n+1)/2]} else {m &lt;- (vects[n/2]+vects[(n/2)+1])/2} # modus v &lt;- unique(vect) f &lt;- NULL for(i in v) { byk &lt;- sum(vect==i) f &lt;- c(f,byk) } fmax &lt;- max(f) vf &lt;- cbind(v,f) mode &lt;- vf[f==fmax,] # output my_list &lt;- list(&quot;mean&quot; = rataan, &quot;median&quot; = m, &quot;modus&quot; = mode) class(my_list) &lt;- &quot;threeM&quot; return(my_list) } Fungsi generik print print.threeM &lt;- function(obj){ cat(&quot;three.M Statitic\\n&quot;) cat(&quot;\\nMean: &quot;, obj$mean) cat(&quot;\\nMedian: &quot;, obj$median) cat(&quot;\\nModus:\\n&quot;) print(obj$modus) } set.seed(123) x1 &lt;- rbinom(100,10,0.5) three.M(x1) ## three.M Statitic ## ## Mean: 4.99 ## Median: 5 ## Modus: ## v f ## [1,] 6 24 ## [2,] 5 24 Latihan, membuat fungsi Regresi Komponen Utama AKU &lt;- function(X){ # transform X into matrix X &lt;- as.matrix(X) # transform all var into z-score X &lt;- scale(X, center = TRUE, scale = TRUE) x.bar &lt;- attr(X, &quot;scaled:center&quot;) x.stdev &lt;- attr(X, &quot;scaled:scale&quot;) # compute singular-value decomposition SVD &lt;- La.svd(X) D &lt;- SVD$d # compute principal component pc.score &lt;- SVD$u %*% diag(D, nrow = ncol(X)) # get eigenvector from SVD eigenvector &lt;- SVD$vt # compute eigenvalues and PC contributions pc.score.stdev &lt;- D / sqrt(max(1, nrow(X) - 1)) eigenvalue &lt;- pc.score.stdev^2 eigenvalue.proportion &lt;- eigenvalue/sum(eigenvalue) eigenvalue.cum.proportion &lt;- cumsum(eigenvalue.proportion) eigenanalysis &lt;- rbind(eigenvalue, eigenvalue.proportion, eigenvalue.cum.proportion) # assign names pc.name &lt;- paste0(&#39;PC&#39;, seq(ncol(X))) colnames(pc.score) &lt;- rownames(eigenvector) &lt;- colnames(eigenanalysis) &lt;- names(pc.score.stdev) &lt;- pc.name rownames(pc.score) &lt;- rownames(X) colnames(eigenvector) &lt;- colnames(X) rownames(eigenanalysis) &lt;- c(&quot;Eigenvalue&quot;, &quot;Proportion&quot;, &quot;Cumulative&quot;) # wrap output into list out &lt;- list( n.col = ncol(X), n.row = nrow(X), x.bar = x.bar, x.stdev = x.stdev, pc.score = pc.score, pc.score.stdev = pc.score.stdev, eigenvalue = eigenanalysis, eigenvector = t(eigenvector) ) # asign a class class(out) &lt;- &quot;AKU&quot; return(out) } Metode generik print.AKU print.AKU &lt;- function(obj) { cat(&quot;PRINCIPAL COMPONENT ANALYSIS\\n&quot;) cat(&quot;Input: &quot;, obj$n.row, &quot;rows X&quot;, obj$n.col, &quot;columns\\n&quot;) cat(&quot;\\nEigenanalysis of Correlation Matrix:\\n&quot;) print(obj$eigenvalue) cat(&quot;\\nEigenvectors:\\n&quot;) print(obj$eigenvector) cat(&quot;\\nScore of Principal Component (Preview):\\n&quot;) print(rbind(head(obj$pc.score))) if(nrow(obj$pc.score) &gt; 6) cat(&quot;...&quot;) } Contoh penggunaan url &lt;- &quot;https://raw.githubusercontent.com/nurandi/sta561-uts/main/data/pca-data.csv&quot; dta &lt;- read.csv(url) y &lt;- dta[1] X &lt;- dta[-1] aku &lt;- AKU(X) aku ## PRINCIPAL COMPONENT ANALYSIS ## Input: 15 rows X 4 columns ## ## Eigenanalysis of Correlation Matrix: ## PC1 PC2 PC3 PC4 ## Eigenvalue 3.7693710 0.16253376 0.04423637 0.023858911 ## Proportion 0.9423427 0.04063344 0.01105909 0.005964728 ## Cumulative 0.9423427 0.98297618 0.99403527 1.000000000 ## ## Eigenvectors: ## PC1 PC2 PC3 PC4 ## X1 0.5056158 -0.3398479 0.35682315 0.7081902 ## X2 0.4940545 0.6392714 0.50650265 -0.3011600 ## X3 0.5035406 0.3178941 -0.78135788 0.1867354 ## X4 0.4966988 -0.6121919 -0.07491445 -0.6106547 ## ## Score of Principal Component (Preview): ## PC1 PC2 PC3 PC4 ## [1,] -3.2417574 -1.03926963 -0.21320529 0.18559324 ## [2,] -1.8486832 0.01142542 0.22832852 -0.10777842 ## [3,] -0.7795219 0.46096143 0.04824186 -0.14517167 ## [4,] -0.1361711 0.04200545 -0.08603160 0.01717014 ## [5,] -1.0044094 -0.07221540 0.24797726 0.02243639 ## [6,] 1.8019258 -0.23968031 -0.11141042 -0.03474123 ## ... print(aku) ## PRINCIPAL COMPONENT ANALYSIS ## Input: 15 rows X 4 columns ## ## Eigenanalysis of Correlation Matrix: ## PC1 PC2 PC3 PC4 ## Eigenvalue 3.7693710 0.16253376 0.04423637 0.023858911 ## Proportion 0.9423427 0.04063344 0.01105909 0.005964728 ## Cumulative 0.9423427 0.98297618 0.99403527 1.000000000 ## ## Eigenvectors: ## PC1 PC2 PC3 PC4 ## X1 0.5056158 -0.3398479 0.35682315 0.7081902 ## X2 0.4940545 0.6392714 0.50650265 -0.3011600 ## X3 0.5035406 0.3178941 -0.78135788 0.1867354 ## X4 0.4966988 -0.6121919 -0.07491445 -0.6106547 ## ## Score of Principal Component (Preview): ## PC1 PC2 PC3 PC4 ## [1,] -3.2417574 -1.03926963 -0.21320529 0.18559324 ## [2,] -1.8486832 0.01142542 0.22832852 -0.10777842 ## [3,] -0.7795219 0.46096143 0.04824186 -0.14517167 ## [4,] -0.1361711 0.04200545 -0.08603160 0.01717014 ## [5,] -1.0044094 -0.07221540 0.24797726 0.02243639 ## [6,] 1.8019258 -0.23968031 -0.11141042 -0.03474123 ## ... aku$eigenvalue ## PC1 PC2 PC3 PC4 ## Eigenvalue 3.7693710 0.16253376 0.04423637 0.023858911 ## Proportion 0.9423427 0.04063344 0.01105909 0.005964728 ## Cumulative 0.9423427 0.98297618 0.99403527 1.000000000 head(aku$pc.score) ## PC1 PC2 PC3 PC4 ## [1,] -3.2417574 -1.03926963 -0.21320529 0.18559324 ## [2,] -1.8486832 0.01142542 0.22832852 -0.10777842 ## [3,] -0.7795219 0.46096143 0.04824186 -0.14517167 ## [4,] -0.1361711 0.04200545 -0.08603160 0.01717014 ## [5,] -1.0044094 -0.07221540 0.24797726 0.02243639 ## [6,] 1.8019258 -0.23968031 -0.11141042 -0.03474123 Fungsi regresi komponen utama RKU &lt;- function(y, X, k){ if(is.null(colnames(X))) colnames(X) &lt;- paste0(&quot;V&quot;, seq(ncol(X))) aku &lt;- AKU(X) if(is.null(k)){ k &lt;- ncol(X) } else if(k &lt; 1){ k &lt;- sum(aku$eigenvalue[3,] &lt; k) + 1 } pc.score &lt;- aku$pc.score[,1:k] pcr.data &lt;- as.data.frame(cbind(y, pc.score)) pc.name &lt;- colnames(aku$pc.score)[1:k] colnames(pcr.data) &lt;- c(&quot;y&quot;, pc.name) pcr.lm &lt;- lm(y ~ ., data = pcr.data) pcr.summary &lt;- summary.lm(pcr.lm)[c(&quot;coefficients&quot;, &quot;sigma&quot;, &quot;r.squared&quot;, &quot;adj.r.squared&quot;, &quot;fstatistic&quot;, &quot;df&quot;)] beta.pcr &lt;- as.matrix(pcr.lm$coefficients) beta.z.score1 &lt;- (aku$eigenvector)[,1:k] %*% as.matrix(beta.pcr[-1]) beta.z.score &lt;- rbind(beta.pcr[1], beta.z.score1) beta.x &lt;- rbind(beta.pcr[1] - (aku$x.bar/aku$x.stdev) %*% beta.z.score1, beta.z.score1/aku$x.stdev) # asign name colnames(beta.pcr) &lt;- colnames(beta.z.score) &lt;- colnames(beta.x) &lt;- &quot;Estimates&quot; rownames(beta.z.score) &lt;- c(&quot;(Intercept)&quot;, paste0(&quot;Z_&quot;, colnames(X))) rownames(beta.x) &lt;- c(&quot;(Intercept)&quot;, colnames(X)) out &lt;- list(pca = aku, k = k, pcr.lm = pcr.lm, pcr.summary = pcr.summary, pcr.coefficient = summary.lm(pcr.lm)$coefficients, beta.z.score = beta.z.score, beta.x = beta.x) out &lt;- c(aku, out) class(out) &lt;- &quot;RKU&quot; return(out) } print.RKU &lt;- function(obj, mode = &quot;simple&quot;) { if(mode == &quot;ext&quot;){ print(obj$pca) cat(&quot;\\n\\n&quot;) } cat(&quot;PRINCIPAL COMPONENT REGRESSION\\n&quot;) cat(&quot;With&quot;, obj$k, &quot;Principal Component(s)\\n&quot;) cat(&quot;\\nFormula: y ~ Principal Component Score\\n\\n&quot;) print(obj$pcr.coefficient) cat(&quot;\\nR-squared: &quot;, obj$pcr.summary$r.squared) cat(&quot;, Adjusted R-squared: &quot;, obj$pcr.summary$adj.r.squared, &quot;\\nF Statistics:&quot;, obj$pcr.summary$fstatistic[1]) cat(&quot;, DF1:&quot;, obj$pcr.summary$fstatistic[2]) cat(&quot;, DF2:&quot;, obj$pcr.summary$fstatistic[3]) cat(&quot;, p-value:&quot;, format.pval(pf(obj$pcr.summary$fstatistic[1], obj$pcr.summary$fstatistic[2], obj$pcr.summary$fstatistic[3], lower.tail = FALSE))) if(mode == &quot;simple&quot;){ cat(&quot;\\n\\nNote: use print(obj, &#39;ext&#39;) to print extended output\\n&quot;)} if(mode == &quot;ext&quot;){ cat(&quot;\\n\\nInverse Transform into Z Score\\n&quot;) print(obj$beta.z.score) cat(&quot;\\nInverse Transform into X\\n&quot;) print(obj$beta.x) } } rku &lt;- RKU(y = y, X = X, k = 1) rku ## PRINCIPAL COMPONENT REGRESSION ## With 1 Principal Component(s) ## ## Formula: y ~ Principal Component Score ## ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 76.273333 0.5588331 136.48679 0.0000000000000000000006595387 ## PC1 3.755193 0.2979403 12.60384 0.0000000115720528926616900058 ## ## R-squared: 0.9243556, Adjusted R-squared: 0.9185368 ## F Statistics: 158.8568, DF1: 1, DF2: 13, p-value: 0.000000011572 ## ## Note: use print(obj, &#39;ext&#39;) to print extended output print(rku) ## PRINCIPAL COMPONENT REGRESSION ## With 1 Principal Component(s) ## ## Formula: y ~ Principal Component Score ## ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 76.273333 0.5588331 136.48679 0.0000000000000000000006595387 ## PC1 3.755193 0.2979403 12.60384 0.0000000115720528926616900058 ## ## R-squared: 0.9243556, Adjusted R-squared: 0.9185368 ## F Statistics: 158.8568, DF1: 1, DF2: 13, p-value: 0.000000011572 ## ## Note: use print(obj, &#39;ext&#39;) to print extended output print(rku, mode = &quot;ext&quot;) ## PRINCIPAL COMPONENT ANALYSIS ## Input: 15 rows X 4 columns ## ## Eigenanalysis of Correlation Matrix: ## PC1 PC2 PC3 PC4 ## Eigenvalue 3.7693710 0.16253376 0.04423637 0.023858911 ## Proportion 0.9423427 0.04063344 0.01105909 0.005964728 ## Cumulative 0.9423427 0.98297618 0.99403527 1.000000000 ## ## Eigenvectors: ## PC1 PC2 PC3 PC4 ## X1 0.5056158 -0.3398479 0.35682315 0.7081902 ## X2 0.4940545 0.6392714 0.50650265 -0.3011600 ## X3 0.5035406 0.3178941 -0.78135788 0.1867354 ## X4 0.4966988 -0.6121919 -0.07491445 -0.6106547 ## ## Score of Principal Component (Preview): ## PC1 PC2 PC3 PC4 ## [1,] -3.2417574 -1.03926963 -0.21320529 0.18559324 ## [2,] -1.8486832 0.01142542 0.22832852 -0.10777842 ## [3,] -0.7795219 0.46096143 0.04824186 -0.14517167 ## [4,] -0.1361711 0.04200545 -0.08603160 0.01717014 ## [5,] -1.0044094 -0.07221540 0.24797726 0.02243639 ## [6,] 1.8019258 -0.23968031 -0.11141042 -0.03474123 ## ... ## ## PRINCIPAL COMPONENT REGRESSION ## With 1 Principal Component(s) ## ## Formula: y ~ Principal Component Score ## ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 76.273333 0.5588331 136.48679 0.0000000000000000000006595387 ## PC1 3.755193 0.2979403 12.60384 0.0000000115720528926616900058 ## ## R-squared: 0.9243556, Adjusted R-squared: 0.9185368 ## F Statistics: 158.8568, DF1: 1, DF2: 13, p-value: 0.000000011572 ## ## Inverse Transform into Z Score ## Estimates ## (Intercept) 76.273333 ## Z_X1 1.898685 ## Z_X2 1.855270 ## Z_X3 1.890892 ## Z_X4 1.865200 ## ## Inverse Transform into X ## Estimates ## (Intercept) 44.0669992 ## X1 0.7520572 ## X2 0.8271652 ## X3 3.0821554 ## X4 3.6330905 rku$pcr.coefficient ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 76.273333 0.5588331 136.48679 0.0000000000000000000006595387 ## PC1 3.755193 0.2979403 12.60384 0.0000000115720528926616900058 # print class lm summary(rku$pcr.lm) ## ## Call: ## lm(formula = y ~ ., data = pcr.data) ## ## Residuals: ## Min 1Q Median 3Q Max ## -3.6187 -1.4432 -0.4312 1.5546 3.4001 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 76.2733 0.5588 136.5 &lt; 0.0000000000000002 *** ## PC1 3.7552 0.2979 12.6 0.0000000116 *** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 2.164 on 13 degrees of freedom ## Multiple R-squared: 0.9244, Adjusted R-squared: 0.9185 ## F-statistic: 158.9 on 1 and 13 DF, p-value: 0.00000001157 Ref (Raharjo 2021b) (Soleh 2021b) (Rahmi 2021b) "],["optimasi-secara-numerik.html", "Bagian 9 Optimasi Secara Numerik 9.1 Fungsi Kalkulus 9.2 Optimasi Numerik", " Bagian 9 Optimasi Secara Numerik Optimasi merupakan suatu proses untuk mecari kondisi yang optimum, dalam arti paling maksimal, atau paling minimal. Optimasi dapat dilakukan dengan meminimumkan atau memaksimumkan suatu fungsi 9.1 Fungsi Kalkulus 9.1.1 Integral Fungsi integral yang dapat digunakan pada R adalah integrate(fungsi, lower, upper). Selain itu, terdapat fungsi yac_str() pada package Ryacas untuk mencari integral tak tentu. Contoh menggunakan fungsi integrate: \\[ \\int x^2 dx \\] fs &lt;- function (x)x^2 integrate(fs,0,1) ## 0.3333333 with absolute error &lt; 0.0000000000000037 \\[ \\int x^2 +4x dx \\] f1 &lt;- function(x) x^2 + 4*x integrate(f1, lower=-10, upper=10) ## 666.6667 with absolute error &lt; 0.0000000000076 \\[ \\int t^4 e^{-t} dt \\] f2 &lt;- function(t)t^4 * exp(-t) integrate(f2, lower=0, upper=Inf) ## 24 with absolute error &lt; 0.000022 Contoh dengan fungsi yac_str pada paket Ryacas library(Ryacas) \\[ \\int x^2 + 4xdx \\] yac_str(&quot;Integrate(x) x^2 + 4*x&quot;) ## [1] &quot;x^3/3+2*x^2&quot; \\[ \\int t^4 e^{-t} dt \\] yac_str(&quot;Integrate(t) t^4 *Exp(-t)&quot;) ## [1] &quot;4*(3*((-2)*(t+1)*Exp(-t)-t^2*Exp(-t))-t^3*Exp(-t))-t^4*Exp(-t)&quot; 9.1.2 Diferensial Untuk mendapatkan turunan dari suatu fungsi pada pemrograman R dapat menggunakan fungsi D(expr, simbol) : jika hasil turunan merupakan suatu fungsi deriv(~fungsi, simbol) : jika akan memasukkan nilai dari hasil turunan pada suatu fungsi Contoh, akan dicari turunan dari fungsi berikut \\[ f(x) = \\mathrm{exp}(x)^2 \\] xfs &lt;- expression(exp(x^2)) D(xfs, &quot;x&quot;) ## exp(x^2) * (2 * x) \\[ f(x) = x^2 \\] untuk nilai \\(x=2\\) xturunan &lt;- deriv(~x^2, &quot;x&quot;) x&lt;-2 eval(xturunan) ## [1] 4 ## attr(,&quot;gradient&quot;) ## x ## [1,] 4 9.2 Optimasi Numerik 9.2.1 Golden Section Search Metode golden section search digunakan untuk mencari nilai minimum suatu fungsi yang dibatasi dari dua buah nilai, yaitu sebuah selang a dan b. Algoritma untuk teknik ini adalah sebagai berikut: Mulai dengan selang [a,b] yang memuat minimum Perkecil selang \\([a, b]\\) yang memuat minimum Berhenti sampai \\(|b - a|\\) lebih kecil dari nilai toleransi Pemilihan nilai \\(a&#39;\\) dan \\(b&#39;\\), adalah sebagai berikut Nilai antara [a,b] memiliki sifat golden ratio Tentukan \\(x_1\\) dan \\(x_2\\) \\(x_1 = b-(b-a)/\\mathrm{goldenratio}\\) \\(x_2 = a+(b-a)/\\mathrm{goldenratio}\\) Hitung \\(f(x_1)\\) dan \\(f(x_2)\\) Jika \\(f(x_1) &gt; f(x_2)\\) maka \\([a, b] = [x_1, b]\\) Jika \\(f(x_1) &lt; f(x_2)\\) maka \\([a, b] = [a, x_2]\\) Fungsi golden section golden &lt;- function (f, a, b, tol=0.0000001){ ratio &lt;- 2 / ( sqrt (5)+1) x1 &lt;- b-ratio * (b-a) x2 &lt;- a+ratio * (b-a) f1 &lt;- f(x1) f2 &lt;- f(x2) while ( abs (b-a)&gt;tol){ if (f2&gt;f1){ b &lt;- x2 x2 &lt;- x1 f2 &lt;- f1 x1 &lt;- b-ratio * (b-a) f1 &lt;- f(x1)} else { a &lt;- x1 x1 &lt;- x2 f1 &lt;- f2 x2 &lt;- a+ratio * (b-a) f2 &lt;- f(x2) } } return ((a+b) / 2) } Contoh \\[ f(x) = |x -3.5| (x-2)^2 \\] # Membuat fungsi f(x) f &lt;- function(x) {abs(x-3.5)+(x-2)^2} # Membuat plot curve(f, 1,5) # Menghitung nilai optimum golden(f,1,2) ## [1] 2 golden(f,1,5) ## [1] 2.5 golden(f,3,5) ## [1] 3 \\[ f(x) = 2\\mathrm{sin}(x) - \\frac{x^2}{10} \\] Membuat fungsi \\(f(x)\\) # Membuat fungsi f(x) f &lt;- function(x) {(2 * sin(x)) - ((x^2) /10)} fa &lt;- function(x) -1 * f(x) # fungsi dikali dengan -1 karena fungsi yang dibuat meminimumkan # Membuat plot curve(f, 0,4) golden(fa,0,4) ## [1] 1.427552 9.2.2 Newton Raphson Jika suatu fungsi memiliki turunan pertama dan kedua, maka nilai minimum dapat menggunakan metode Newton Raphson. Kelebihan metode ini adalah hanya memerlukan satu nilai untuk inisial. Kelemahannya adalah kita harus yakin f(x) memiliki turunan pertama dan turunan kedua. Jika di golden section tidak perlu ada turunan pertama dan turunan kedua. Fungsi Newton Raphson newtonr &lt;- function (fx , x0 =1){ fx1 &lt;- deriv (fx ,&quot;x&quot;) # turunan pertama fx2 &lt;- deriv (D(fx ,&quot;x&quot;),&quot;x&quot;) # turunan kedua er &lt;- 1000 while(er &gt; 1e-6){ x &lt;- x0 f1 &lt;- attr ( eval (fx1),&quot;gradient&quot;)[1] f2 &lt;- attr ( eval (fx2),&quot;gradient&quot;)[1] er &lt;- abs(f1) # bisa juga e &lt;- abs (x1 -x0) x1 &lt;- x0 - f1/f2 x0 &lt;- x1 } return (x1) } Hitung nilai minimum untuk fungsi- fungsi berikut. \\[ f(x) = 4x^2 - 3x - 7 \\] fx &lt;- expression(4*x^2-3*x-7) newtonr(fx,3) ## [1] 0.375 \\[ f(x) = e^{-x}+x^4 \\] fx &lt;- expression(exp(-x)+x^4) newtonr(fx) ## [1] 0.5282519 \\[ f(x) = x^2 - x \\] fx &lt;- expression(x^2-x) newtonr(fx) ## [1] 0.5 9.2.3 Fungsi Optimasi Build-in Algoritma Nelder Mead adalah salah satu metode optimasi untuk fungsi yang memiliki lebih dari satu variabel. Di dalam R, fungsi optimasi dengan salah satu algoritma tersebut adalah optimize atau optimise untuk menduga parameter/ mencari nilai minimum dari satu peubah optim untuk lebih dari satu peubah 9.2.3.1 Fungsi optimize/optimise \\[ f(x) = \\left( x - \\frac{1}{3} \\right)^2 \\] f &lt;- function(x) ((x-(1/3))^2) # membuat fungsi tujuan curve(f) xmin &lt;- optimize(f, c(0,1), tol=0.0001) # tolerance optional xmin ## $minimum ## [1] 0.3333333 ## ## $objective ## [1] 0 Carilah titik maksimum dan minimum dari fungsi berikut: \\[ f(x) = \\mathrm{sin}(x) + \\mathrm{sin}(2x) + \\mathrm{cos}(3x) \\] f3 &lt;- function(x) sin(x) + sin (2*x) + cos(3*x) curve(f3, from =0, to = 2* pi) optimize(f3, interval = c(0, 2*pi)) #minimum lokal ## $minimum ## [1] 3.033129 ## ## $objective ## [1] -1.054505 optimize(f3, interval = c(4, 2*pi)) #minimum global ## $minimum ## [1] 5.273383 ## ## $objective ## [1] -2.741405 optimize(f3, interval = c(0, 2*pi), maximum = T) #maksimum lokal ## $maximum ## [1] 4.0598 ## ## $objective ## [1] 1.096473 optimize(f3, interval = c(0, 1.5), maximum = T) #maksimum global ## $maximum ## [1] 0.3323289 ## ## $objective ## [1] 1.485871 9.2.3.2 Fungsi optim Digunakan untuk mencari nilai minimum dari fungsi yang lebih dari satu peubah. Contoh mencari nilai \\(x_1\\) dan \\(x_2\\), yang mebuat \\(f(x_1,x_2) = 100(x_2 - x_1^2)^2 + (1-x_1)^2\\) fr &lt;- function (x){ # tetap dituliskan dalam sebuah vektor, akan diduga x x1&lt;- x[1] x2 &lt;- x[2] 100 * (x2-x1^2)^2 + (1-x1)^2} # ini adalah nilai fungsi objetivenya optim (c(-1.2,1),fr) # argumen pertama adalah nilai inisial, karena menduga x vektor berukuran 2 maka dimasukkan nilai inisialnya ## $par ## [1] 1.000260 1.000506 ## ## $value ## [1] 0.00000008825241 ## ## $counts ## function gradient ## 195 NA ## ## $convergence ## [1] 0 ## ## $message ## NULL optim(par=2, fn=f3) ## $par ## [1] 3.033154 ## ## $value ## [1] -1.054505 ## ## $counts ## function gradient ## 32 NA ## ## $convergence ## [1] 0 ## ## $message ## NULL optim(par=4, fn=f3) ## $par ## [1] 5.273389 ## ## $value ## [1] -2.741405 ## ## $counts ## function gradient ## 32 NA ## ## $convergence ## [1] 0 ## ## $message ## NULL Jika akan mencari nilai maksimum, maka function dikali -1. f3a &lt;- function(x) -1 * f3(x) optim(par=4, fn=f3a) ## $par ## [1] 4.059814 ## ## $value ## [1] -1.096473 ## ## $counts ## function gradient ## 28 NA ## ## $convergence ## [1] 0 ## ## $message ## NULL optim(par=5.5, fn=f3a) ## $par ## [1] 6.615576 ## ## $value ## [1] -1.485871 ## ## $counts ## function gradient ## 28 NA ## ## $convergence ## [1] 0 ## ## $message ## NULL optim(par=1, fn=f3a) ## $par ## [1] 0.3323242 ## ## $value ## [1] -1.485871 ## ## $counts ## function gradient ## 32 NA ## ## $convergence ## [1] 0 ## ## $message ## NULL Fungsi polinomial \\[ f(x) = 4x^4 - 2x^3 - 3x \\] f4 &lt;- function(x) 4*x^4-2*x^3-3*x curve(f4, from = -1, to = 1.5) optim(par = c(-0.5), fn = f4) ## $par ## [1] 0.728418 ## ## $value ## [1] -1.832126 ## ## $counts ## function gradient ## 36 NA ## ## $convergence ## [1] 0 ## ## $message ## NULL 9.2.4 Metode Kuadrat Terkecil dengan Optim Metode kuadrat terkecil pada regresi adalah mencari parameter \\(\\beta\\) sehingga jumlah kuadrat sisaan adalah minimum. Jadi meminimumkan dari fungsi kuadrat sisaan. Sehingga objective function-nya adalah kuadrat sisaan. f &lt;- function (para,y,x){ X &lt;- cbind (1,x) yhat &lt;- X %*% as.matrix(para) sisa2 &lt;- sum((y-yhat)^2) # kuadrat sisaan return(sisa2) } # simulasi x1 &lt;- runif (10,1,10) x2 &lt;- runif (10,1,10) galat &lt;- rnorm (10,0,0.5) y &lt;- 1+2*x1+3*x2+galat # untuk menduga nilai beta hasil &lt;- optim (c(1,1,1),f,y=y,x= cbind (x1,x2)) hasil$par ## [1] 1.622219 1.925578 2.984449 lm(y~x1+x2) ## ## Call: ## lm(formula = y ~ x1 + x2) ## ## Coefficients: ## (Intercept) x1 x2 ## 1.622 1.926 2.984 Contoh: Lakukan pendugaan paramater regresi dengan meminimumkan jumlah kuadrat galat (residual sum of square) dari data berikut! Kemudian bandingkan hasilnya dnegan output fungsi lm! x y 1 1 2 3 3 5 4 6 5 8 6 12 data5=data.frame(x=c(1,2,3,4,5,6), y=c(1,3,5,6,8,12)) JKG &lt;- function(data, b) { with(data, sum((b[1]+b[2]*x-y)^2))} hasil1 &lt;- optim(par = c(1,1), fn = JKG, data = data5) hasil2 &lt;- lm(y~x, data = data5) plot(data5) abline(hasil1$par,col=4) hasil1$par ## [1] -1.266302 2.028449 hasil2$coefficients ## (Intercept) x ## -1.266667 2.028571 hasil1$value ## [1] 2.819048 sum(hasil2$residuals^2) ## [1] 2.819048 # Menggunakan fungsi LM model1 &lt;- lm(y~x, data=data5) summary(model1) ## ## Call: ## lm(formula = y ~ x, data = data5) ## ## Residuals: ## 1 2 3 4 5 6 ## 0.2381 0.2095 0.1810 -0.8476 -0.8762 1.0952 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) -1.2667 0.7815 -1.621 0.180388 ## x 2.0286 0.2007 10.109 0.000539 *** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 0.8395 on 4 degrees of freedom ## Multiple R-squared: 0.9623, Adjusted R-squared: 0.9529 ## F-statistic: 102.2 on 1 and 4 DF, p-value: 0.000539 9.2.5 MLE (Maximum Likelihood Estimator) Metode ini adalah metode yang paling sering digunakan untuk menduga parameter sebaran. Mencari nilai maksimum dari suatu fungsi tujuan yang berupa fungsi likelihood-nya. Untuk mendapatkan likelihood merupakan perkalian dari fungsi sebaran, lebih mudah menduga teta dengan mentransformasi fungsi likelihood menjadi negatif log likelihood Sebagai contoh, jika \\(x_1, x_2, ..., x_n\\) berasal dari peubah acak \\(X \\sim N(\\mu, \\sigma)\\), tentukan penduga \\(\\mu\\) dan \\(\\sigma\\) menggunakan MLE. Jika log likehood saja meminimumkan, maka menjadi negatif log likelihood suapaya dimaksimumkan. negloglik &lt;- function (para,xd){ nilai &lt;- -1* sum (dnorm (xd, mean =para[1], sd=para[2], log= TRUE)) # penjumlahan fungsi likelihood distribusi normal return (nilai) } x &lt;- rnorm (10,2,5) hasil &lt;- optim (c(1,1),negloglik,xd=x) cat (&quot;Hasil MLE:&quot;, hasil $par) ## Hasil MLE: 0.1836094 4.720975 c(mean(x), sd(x)) # pembanding ## [1] 0.1854109 4.9775375 Pendugaan untuk regresi linear dengan menggunakan metode kemungkinan maksimum. Sebagai contoh, akan diduga parameter dari regresi linear sederhana dengan menggunakan MLE. Contoh soal sebelumnya akan digunakan kembali. x &lt;- matrix(c(1,2,3,4,5,6)) y &lt;- matrix(c(1,3,5,6,8,12)) X &lt;- cbind(1,x) # membuat maxtrix [1 x1] Fungsi log likelihood dari Regresi Linear Sederhana adalah sebagai berikut: \\[ \\mathrm{log}L(\\beta_0, \\beta_1, \\sigma^2) = -\\frac{n}{2}\\mathrm{log}(2\\pi) - \\frac{n}{2}\\mathrm{log}(\\sigma^2) - \\frac{1}{2\\sigma^2}\\sum_{i=1}^n (y_i - \\beta_0 - \\beta_1x_i)^2 \\] Cara pertama: regloglik &lt;- function (beta, y, X) { n &lt;- nrow(X) # jumlah baris pada matrix x k &lt;- ncol(X) # jumlah kolom pada matrix x beta0 &lt;- beta[1] beta1 &lt;- beta[2] var.lin &lt;- beta[3] e &lt;- y - X %*% beta[1:2] # menghitung sisaan logl &lt;- -0.5*n*log(2*pi) - 0.5*n*log(var.lin) - ((t(e)%*%e)/(2*var.lin)) return(-logl) } par.reg &lt;- optim(c(1,1,1), regloglik, y=y, X=X) par.reg$par ## [1] -1.2669724 2.0286218 0.4698408 Cara kedua: regloglik &lt;- function (para,y, x){ # fungsi terdiri dari 3 parameter dalam argumen para # beta0 = para [1] # beta1 = para [2] # sigma = para [3] # nilai tengah dari regresi linear adalah beta0 + b1x1 # standar deviasi adalah sigma nilai &lt;- -1* sum (dnorm (y, mean =para[1]+ x*para[2], sd=para[3], log= TRUE)) return (nilai) } x=c(1,2,3,4,5,6) y=c(1,3,5,6,8,12) hasil &lt;- optim (c(1,1,1),regloglik,y =y, x=x) cat (&quot;Hasil MLE:&quot;, hasil $par) ## Hasil MLE: -1.266469 2.028513 0.6853899 Ref (Raharjo 2021a) (Soleh 2021a) (Rahmi 2021a) "],["linux-shell.html", "Bagian 10 Linux Shell 10.1 Apa itu Shell? 10.2 Perintah Dasar Shell", " Bagian 10 Linux Shell 10.1 Apa itu Shell? Shell adalah istilah untuk commnd-line interface antara user dan sistem operasi. Tampilan ini biasa dikenal dengan TUI (Text User Interfaces). Shell biasa digunakan mode interaktif, yaitu langsung kita ketikan perintah pada terminal dan enter, maka shell akan memberikan response berupa hasil atau response lainnya. Shell juga dapat digunakan dalam mode non interaktif (batch). Kita simpan perintah-perintah ke dalam file, dan kemudian shell membaca dan mengeksekusi setiap baris command/perintah yang ada dalam file tersebut. Shell dapat berfungsi sebagai interpreter sekaligus bahasa pemrograman. Sebagai interpreter, artinya shell sebagai penyedia utility yang dilengkapi banyak sekali command bawaan, seperti cd, rm, mkdir dan lain-lain. Meskipun tujuan utamanya bukan sebagai bahasa pemrograman, shell juga dilengkapi dengan variable, control flow dan lain-lain. Setiap sistem operasi mempunyai shell masing-masing, seperti: Mac OS X = bash Windows = cmd.exe Linux = bash Untuk kesempatan ini, kita akan praktik dasar-dasar shell yang bisa digunakan di sistem operasi berbasis UNIX (seperti Linux, Mac OS dan lain-lain). Sebetulnya, UNIX tidak cuma mempunyai bash atau Bourne Again Shell, tetapi ada shell lain yang bisa digunakan seperti Bourne shell/sh, Korn shell/ksh, POSIX shell/sh. Bagi pengguna Windows, dapat menggunakan Windows Subsystem for Linux (WSL). 10.2 Perintah Dasar Shell 10.2.1 Direktori Melihat working directory: pwd pwd ## /mnt/d/SSD21/Bookdown/sta561 Membuat directory baru: mkdir mkdir test Pindah ke directory lain: cd cd test 10.2.2 File Membuat file baru: touch touch myfile.txt Menulis pada file echo &quot;hello!&quot; &gt;&gt; myfile.txt Menampilkan list file dan folder: ls ls ## 01-what-r.Rmd ## 02-r-dasar.Rmd ## 03-operasi-dasar-r.Rmd ## 04-data-wrangling-1.Rmd ## 05-data-wrangling-2.Rmd ## 06-visualisasi-data.Rmd ## 07-simulation.Rmd ## 08-function-oop.Rmd ## 09-optimization.Rmd ## 91-shell.Rmd ## 99-referensi.Rmd ## README.md ## _bookdown.yml ## _bookdown_files ## _output.yml ## data ## docs ## img ## index.Rmd ## myfile.txt ## nur_andi_sta561.Rmd ## nur_andi_sta561.log ## nur_andi_sta561_cache ## nur_andi_sta561_files ## reference.bib ## series_cache ## sta561.Rproj ## sta561_cache ## test # List file dalam format lebih lengkap ls -l ## total 340 ## -rwxrwxrwx 1 nurandi nurandi 3243 Sep 6 03:16 01-what-r.Rmd ## -rwxrwxrwx 1 nurandi nurandi 15860 Sep 7 18:15 02-r-dasar.Rmd ## -rwxrwxrwx 1 nurandi nurandi 8636 Sep 6 16:13 03-operasi-dasar-r.Rmd ## -rwxrwxrwx 1 nurandi nurandi 5398 Oct 4 14:18 04-data-wrangling-1.Rmd ## -rwxrwxrwx 1 nurandi nurandi 18459 Sep 8 20:30 05-data-wrangling-2.Rmd ## -rwxrwxrwx 1 nurandi nurandi 17032 Sep 18 18:50 06-visualisasi-data.Rmd ## -rwxrwxrwx 1 nurandi nurandi 13297 Oct 5 12:20 07-simulation.Rmd ## -rwxrwxrwx 1 nurandi nurandi 25293 Oct 6 22:42 08-function-oop.Rmd ## -rwxrwxrwx 1 nurandi nurandi 10596 Oct 7 05:22 09-optimization.Rmd ## -rwxrwxrwx 1 nurandi nurandi 2585 Sep 8 20:45 91-shell.Rmd ## -rwxrwxrwx 1 nurandi nurandi 21 Sep 8 20:47 99-referensi.Rmd ## -rwxrwxrwx 1 nurandi nurandi 125 Sep 8 21:44 README.md ## -rwxrwxrwx 1 nurandi nurandi 436 Oct 6 22:44 _bookdown.yml ## drwxrwxrwx 1 nurandi nurandi 512 Oct 7 05:23 _bookdown_files ## -rwxrwxrwx 1 nurandi nurandi 461 Oct 5 10:50 _output.yml ## drwxrwxrwx 1 nurandi nurandi 512 Sep 18 12:23 data ## drwxrwxrwx 1 nurandi nurandi 512 Oct 7 05:23 docs ## drwxrwxrwx 1 nurandi nurandi 512 Sep 18 11:57 img ## -rwxrwxrwx 1 nurandi nurandi 507 Sep 17 21:32 index.Rmd ## -rwxrwxrwx 1 nurandi nurandi 7 Oct 7 05:25 myfile.txt ## -rwxrwxrwx 1 nurandi nurandi 121643 Oct 7 05:23 nur_andi_sta561.Rmd ## -rwxrwxrwx 1 nurandi nurandi 67631 Oct 5 12:23 nur_andi_sta561.log ## drwxrwxrwx 1 nurandi nurandi 512 Sep 6 16:33 nur_andi_sta561_cache ## drwxrwxrwx 1 nurandi nurandi 512 Sep 18 14:47 nur_andi_sta561_files ## -rwxrwxrwx 1 nurandi nurandi 7305 Oct 6 22:43 reference.bib ## drwxrwxrwx 1 nurandi nurandi 512 Sep 6 12:35 series_cache ## -rwxrwxrwx 1 nurandi nurandi 240 Oct 6 22:40 sta561.Rproj ## drwxrwxrwx 1 nurandi nurandi 512 Sep 6 16:32 sta561_cache ## drwxrwxrwx 1 nurandi nurandi 512 Oct 7 05:25 test # List file termasuk hidden file ls -a ## . ## .. ## .Rhistory ## .Rproj.user ## .git ## .gitignore ## 01-what-r.Rmd ## 02-r-dasar.Rmd ## 03-operasi-dasar-r.Rmd ## 04-data-wrangling-1.Rmd ## 05-data-wrangling-2.Rmd ## 06-visualisasi-data.Rmd ## 07-simulation.Rmd ## 08-function-oop.Rmd ## 09-optimization.Rmd ## 91-shell.Rmd ## 99-referensi.Rmd ## README.md ## _bookdown.yml ## _bookdown_files ## _output.yml ## data ## docs ## img ## index.Rmd ## myfile.txt ## nur_andi_sta561.Rmd ## nur_andi_sta561.log ## nur_andi_sta561_cache ## nur_andi_sta561_files ## reference.bib ## series_cache ## sta561.Rproj ## sta561_cache ## test Memindahkan dan mengubah nama file: mv mv myfile.txt fileku.txt Menyalin file: cp cp fileku.txt myfile.txt Tampilkan list file: ls ls ## 01-what-r.Rmd ## 02-r-dasar.Rmd ## 03-operasi-dasar-r.Rmd ## 04-data-wrangling-1.Rmd ## 05-data-wrangling-2.Rmd ## 06-visualisasi-data.Rmd ## 07-simulation.Rmd ## 08-function-oop.Rmd ## 09-optimization.Rmd ## 91-shell.Rmd ## 99-referensi.Rmd ## README.md ## _bookdown.yml ## _bookdown_files ## _output.yml ## data ## docs ## fileku.txt ## img ## index.Rmd ## myfile.txt ## nur_andi_sta561.Rmd ## nur_andi_sta561.log ## nur_andi_sta561_cache ## nur_andi_sta561_files ## reference.bib ## series_cache ## sta561.Rproj ## sta561_cache ## test Menghitung jumlah baris: wc wc myfile.txt ## 1 1 7 myfile.txt Menampilkan isi file: cat cat myfile.txt ## hello! Menghapus file: rm rm myfile.txt fileku.txt Menghapus directory: rm -r rm -r test "],["referensi.html", "Referensi", " Referensi "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
